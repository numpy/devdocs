
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Releasing a version &#8212; NumPy v2.4.dev0 Manual</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Vibur" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyterlite_sphinx.css?v=8ee2c72c" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/numpy.css?v=e8edb4a7" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=530e9895"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    <script src="../_static/jupyterlite_sphinx.js?v=96e329c5"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script data-domain="numpy.org/doc/stable/" defer="defer" src="https://views.scientific-python.org/js/script.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'dev/releasing';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://numpy.org/doc/_static/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'devdocs';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            true;
        </script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NumPy governance" href="governance/index.html" />
    <link rel="prev" title="For downstream package authors" href="depending_on_numpy.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.4.dev0" />
    <meta name="docbuild:last-update" content="Oct 25, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/numpylogo.svg" class="logo__image only-light" alt="NumPy v2.4.dev0 Manual - Home"/>
    <img src="../_static/numpylogo_dark.svg" class="logo__image only-dark pst-js-only" alt="NumPy v2.4.dev0 Manual - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../building/index.html">
    Building from source
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Development
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../release.html">
    Release notes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://numpy.org/numpy-tutorials/">
    Learn
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://numpy.org/neps">
    NEPs
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/numpy/numpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../building/index.html">
    Building from source
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Development
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../release.html">
    Release notes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://numpy.org/numpy-tutorials/">
    Learn
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://numpy.org/neps">
    NEPs
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/numpy/numpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="development_environment.html">Setting up and using your development environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto_build_docs.html">Building the NumPy API and reference docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_workflow.html">Development workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_advanced_debugging.html">Advanced debugging tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_ghcodespaces.html">Using GitHub Codespaces for NumPy development</a></li>
<li class="toctree-l1"><a class="reference internal" href="reviewer_guidelines.html">Reviewer guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarking.html">NumPy benchmarks</a></li>
<li class="toctree-l1"><a class="reference external" href="https://numpy.org/neps/nep-0045-c_style_guide.html">NumPy C style guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="depending_on_numpy.html">For downstream package authors</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Releasing a version</a></li>
<li class="toctree-l1"><a class="reference internal" href="governance/index.html">NumPy governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto-docs.html">How to contribute to the NumPy documentation</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Contributing to NumPy</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Releasing a version</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="releasing-a-version">
<h1>Releasing a version<a class="headerlink" href="#releasing-a-version" title="Link to this heading">#</a></h1>
<p>The following guides include detailed information on how to prepare a NumPy
release.</p>
<section id="how-to-prepare-a-release">
<span id="prepare-release"></span><h2>How to prepare a release<a class="headerlink" href="#how-to-prepare-a-release" title="Link to this heading">#</a></h2>
<p>These instructions give an overview of what is necessary to build binary
releases for NumPy.</p>
<section id="current-build-and-release-info">
<h3>Current build and release info<a class="headerlink" href="#current-build-and-release-info" title="Link to this heading">#</a></h3>
<p>Useful info can be found in <em class="xref py py-obj">building-from-source</em> in the docs as well as in
these three files:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/numpy/numpy/blob/main/doc/HOWTO_RELEASE.rst">HOWTO_RELEASE.rst</a></p></li>
<li><p><a class="reference external" href="https://github.com/numpy/numpy/blob/main/doc/RELEASE_WALKTHROUGH.rst">RELEASE_WALKTHROUGH.rst</a></p></li>
<li><p><a class="reference external" href="https://github.com/numpy/numpy/blob/main/doc/BRANCH_WALKTHROUGH.rst">BRANCH_WALKTHROUGH.rst</a></p></li>
</ul>
</section>
<section id="supported-platforms-and-versions">
<h3>Supported platforms and versions<a class="headerlink" href="#supported-platforms-and-versions" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/dev/toolchain.html#nep29" title="(in SciPy v1.16.2)"><span class="xref std std-ref">NEP 29</span></a> outlines which Python versions are supported <em>at a
minimum</em>. We usually decide to keep support for a given Python version slightly
longer than that minimum, to avoid giving other projects issues - this is at
the discretion of the release manager.</p>
<ul>
<li><p><strong>macOS</strong></p>
<p>We aim to support the same set of macOS versions as are supported by
Python.org and <a class="reference external" href="https://cibuildwheel.readthedocs.io/en/stable/">cibuildwheel</a> for any given Python version.
We build binary wheels for macOS that are compatible with common Python
installation methods, e.g., from python.org, <code class="docutils literal notranslate"><span class="pre">python-build-standalone</span></code> (the
ones <code class="docutils literal notranslate"><span class="pre">uv</span></code> installs), system Python, conda-forge, Homebrew and MacPorts.</p>
</li>
<li><p><strong>Windows</strong></p>
<p>We build 32- and 64-bit wheels on Windows. Windows 7, 8 and 10 are supported.
We build NumPy using the most convenient compilers, which are (as of Aug
2025) MSVC for x86/x86-64 and Clang-cl for arm64, <a class="reference external" href="https://cibuildwheel.readthedocs.io/en/stable/">cibuildwheel</a> and GitHub
Actions.</p>
</li>
</ul>
<ul>
<li><p><strong>Linux</strong></p>
<p>We build and ship <code class="docutils literal notranslate"><span class="pre">manylinux</span></code> and <code class="docutils literal notranslate"><span class="pre">musllinux</span></code> wheels for x86-64 and
aarch64 platforms on PyPI. Wheels for 32-bit platforms are not currently
provided. We aim to support the lowest non-EOL versions, and upgrade roughly
in sync with <a class="reference external" href="https://cibuildwheel.readthedocs.io/en/stable/">cibuildwheel</a>. See
<a class="reference external" href="https://github.com/pypa/manylinux">pypa/manylinux</a> and
<a class="reference external" href="https://github.com/mayeut/pep600_compliance?tab=readme-ov-file#distro-compatibility">this distro compatibility table</a>
for more details.</p>
</li>
<li><p><strong>BSD / Solaris / AIX</strong></p>
<p>No binary wheels are provided on PyPI, however we expect building from source
on these platforms to work fine.</p>
</li>
</ul>
</section>
<section id="toolchains">
<h3>Toolchains<a class="headerlink" href="#toolchains" title="Link to this heading">#</a></h3>
<p>For building wheels, we use the following toolchains:</p>
<ul class="simple">
<li><p>Linux: we use the default compilers in the <code class="docutils literal notranslate"><span class="pre">manylinux</span></code>/<code class="docutils literal notranslate"><span class="pre">musllinux</span></code> Docker
images, which is usually a relatively recent GCC version.</p></li>
<li><p>macOS: we use the Apple Clang compilers and XCode version installed on the
GitHub Actions runner image.</p></li>
<li><p>Windows: for x86 and x86-64 we use the default MSVC and Visual Studio
toolchain installed on the relevant GitHub actions runner image. Note that in
the past it has sometimes been necessary to use an older toolchain to avoid
causing problems through the static <code class="docutils literal notranslate"><span class="pre">libnpymath</span></code> library for SciPy - please
inspect the <a class="reference external" href="https://github.com/numpy/numpy-release">numpy/numpy-release</a>
code and CI logs in case the exact version numbers need to be determined.</p></li>
</ul>
<p>For building from source, minimum compiler versions are tracked in the top-level
<code class="docutils literal notranslate"><span class="pre">meson.build</span></code> file.</p>
<section id="openblas">
<h4>OpenBLAS<a class="headerlink" href="#openblas" title="Link to this heading">#</a></h4>
<p>Most wheels link to a version of <a class="reference external" href="https://github.com/OpenMathLib/OpenBLAS">OpenBLAS</a> supplied via the <a class="reference external" href="https://github.com/MacPython/openblas-libs">openblas-libs</a> repo.
The shared object (or DLL) is shipped within the wheel, renamed to prevent name
collisions with other OpenBLAS shared objects that may exist in the filesystem.</p>
</section>
<section id="building-docs">
<h4>Building docs<a class="headerlink" href="#building-docs" title="Link to this heading">#</a></h4>
<p>We are no longer building <code class="docutils literal notranslate"><span class="pre">pdf</span></code> files. The requirements for building the
<code class="docutils literal notranslate"><span class="pre">html</span></code> docs are no different than for regular development. See the README of
the <a class="reference external" href="https://github.com/numpy/doc">numpy/doc</a> repository and the step by
step instructions in <code class="docutils literal notranslate"><span class="pre">doc/RELEASE_WALKTHROUGH.rst</span></code> for more details.</p>
</section>
<section id="uploading-to-pypi">
<h4>Uploading to PyPI<a class="headerlink" href="#uploading-to-pypi" title="Link to this heading">#</a></h4>
<p>Creating a release on PyPI and uploading wheels and sdist is automated in CI
and uses <a class="reference external" href="https://docs.pypi.org/trusted-publishers/">PyPI’s trusted publishing</a>.
See the README in the <a class="reference external" href="https://github.com/numpy/numpy-release">numpy/numpy-release</a>
repository and the step by step instructions in <code class="docutils literal notranslate"><span class="pre">doc/RELEASE_WALKTHROUGH.rst</span></code>
for more details.</p>
</section>
<section id="generating-author-pr-lists">
<h4>Generating author/PR lists<a class="headerlink" href="#generating-author-pr-lists" title="Link to this heading">#</a></h4>
<p>You will need a personal access token
<a class="reference external" href="https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/">https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/</a>
so that scripts can access the GitHub NumPy repository. With that token, the
author/PR changelog content can be generated by running <code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">changelog</span></code>. It
may require a few extra packages, like <code class="docutils literal notranslate"><span class="pre">gitpython</span></code> and <code class="docutils literal notranslate"><span class="pre">pygithub</span></code>.</p>
</section>
</section>
<section id="what-is-released">
<h3>What is released<a class="headerlink" href="#what-is-released" title="Link to this heading">#</a></h3>
<p>On PyPI we release wheels for a number of platforms (as discussed higher up),
and an sdist.</p>
<p>On GitHub Releases we release the same sdist (because the source archives which
are autogenerated by GitHub itself aren’t complete), as well as the release
notes and changelog.</p>
</section>
<section id="release-process">
<h3>Release process<a class="headerlink" href="#release-process" title="Link to this heading">#</a></h3>
<section id="agree-on-a-release-schedule">
<h4>Agree on a release schedule<a class="headerlink" href="#agree-on-a-release-schedule" title="Link to this heading">#</a></h4>
<p>A typical release schedule for a feature release is two release candidates and
a final release.  It’s best to discuss the timing on the mailing list first, in
order for people to get their commits in on time. After a date is set, create a
new <code class="docutils literal notranslate"><span class="pre">maintenance/x.y.z</span></code> branch, add new empty release notes for the next version
in the main branch and update the Milestones on the issue tracker.</p>
</section>
<section id="check-deprecations">
<h4>Check deprecations<a class="headerlink" href="#check-deprecations" title="Link to this heading">#</a></h4>
<p>Before <a class="reference internal" href="#branching"><span class="std std-ref">the release branch is made</span></a>, it should be checked that
all deprecated code that should be removed is actually removed, and all new
deprecations say in the docstring or deprecation warning what version the code
will be removed.</p>
</section>
<section id="check-the-c-api-version-number">
<h4>Check the C API version number<a class="headerlink" href="#check-the-c-api-version-number" title="Link to this heading">#</a></h4>
<p>The C API version needs to be tracked in three places</p>
<ul class="simple">
<li><p>numpy/_core/meson.build</p></li>
<li><p>numpy/_core/code_generators/cversions.txt</p></li>
<li><p>numpy/_core/include/numpy/numpyconfig.h</p></li>
</ul>
<p>There are three steps to the process.</p>
<ol class="arabic">
<li><p>If the API has changed, increment the C_API_VERSION in
numpy/core/meson.build. The API is unchanged only if any code compiled
against the current API will be backward compatible with the last released
NumPy version. Any changes to C structures or additions to the public
interface will make the new API not backward compatible.</p></li>
<li><p>If the C_API_VERSION in the first step has changed, or if the hash of
the API has changed, the cversions.txt file needs to be updated. To check
the hash, run the script numpy/_core/cversions.py and note the API hash that
is printed. If that hash does not match the last hash in
numpy/_core/code_generators/cversions.txt the hash has changed. Using both
the appropriate C_API_VERSION and hash, add a new entry to cversions.txt.
If the API version was not changed, but the hash differs, you will need to
comment out the previous entry for that API version. For instance, in NumPy
1.9 annotations were added, which changed the hash, but the API was the
same as in 1.8. The hash serves as a check for API changes, but it is not
definitive.</p>
<p>If steps 1 and 2 are done correctly, compiling the release should not give
a warning “API mismatch detect at the beginning of the build”.</p>
</li>
<li><p>The numpy/_core/include/numpy/numpyconfig.h will need a new
NPY_X_Y_API_VERSION macro, where X and Y are the major and minor version
numbers of the release. The value given to that macro only needs to be
increased from the previous version if some of the functions or macros in
the include files were deprecated.</p></li>
</ol>
<p>The C ABI version number in numpy/_core/meson.build should only be updated
for a major release.</p>
</section>
<section id="check-the-release-notes">
<h4>Check the release notes<a class="headerlink" href="#check-the-release-notes" title="Link to this heading">#</a></h4>
<p>Use <a class="reference external" href="https://pypi.org/project/towncrier/">towncrier</a> to build the release note and
commit the changes. This will remove all the fragments from
<code class="docutils literal notranslate"><span class="pre">doc/release/upcoming_changes</span></code> and add <code class="docutils literal notranslate"><span class="pre">doc/release/&lt;version&gt;-note.rst</span></code>.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">towncrier</span> <span class="n">build</span> <span class="o">--</span><span class="n">version</span> <span class="s2">&quot;&lt;version&gt;&quot;</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span><span class="s2">&quot;Create release note&quot;</span>
</pre></div>
</div>
<p>Check that the release notes are up-to-date.</p>
<p>Update the release notes with a Highlights section. Mention some of the
following:</p>
<ul class="simple">
<li><p>major new features</p></li>
<li><p>deprecated and removed features</p></li>
<li><p>supported Python versions</p></li>
<li><p>for SciPy, supported NumPy version(s)</p></li>
<li><p>outlook for the near future</p></li>
</ul>
</section>
</section>
</section>
<section id="step-by-step-directions">
<h2>Step-by-step directions<a class="headerlink" href="#step-by-step-directions" title="Link to this heading">#</a></h2>
<p>This is a walkthrough of the NumPy 2.4.0 release on Linux, which will be the
first feature release using the <a class="reference external" href="https://github.com/numpy/numpy-release">numpy/numpy-release</a> repository.</p>
<p>The commands can be copied into the command line, but be sure to replace 2.4.0
with the correct version. This should be read together with the
<a class="reference internal" href="#prepare-release"><span class="std std-ref">general release guide</span></a>.</p>
<section id="facility-preparation">
<h3>Facility preparation<a class="headerlink" href="#facility-preparation" title="Link to this heading">#</a></h3>
<p>Before beginning to make a release, use the <code class="docutils literal notranslate"><span class="pre">requirements/*_requirements.txt</span></code> files to
ensure that you have the needed software. Most software can be installed with
pip, but some will require apt-get, dnf, or whatever your system uses for
software. You will also need a GitHub personal access token (PAT) to push the
documentation. There are a few ways to streamline things:</p>
<ul class="simple">
<li><p>Git can be set up to use a keyring to store your GitHub personal access token.
Search online for the details.</p></li>
<li><p>You can use the <code class="docutils literal notranslate"><span class="pre">keyring</span></code> app to store the PyPI password for twine. See the
online twine documentation for details.</p></li>
</ul>
</section>
<section id="prior-to-release">
<h3>Prior to release<a class="headerlink" href="#prior-to-release" title="Link to this heading">#</a></h3>
<section id="add-drop-python-versions">
<h4>Add/drop Python versions<a class="headerlink" href="#add-drop-python-versions" title="Link to this heading">#</a></h4>
<p>When adding or dropping Python versions, multiple config and CI files need to
be edited in addition to changing the minimum version in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>.
Make these changes in an ordinary PR against main and backport if necessary.
We currently release wheels for new Python versions after the first Python RC
once manylinux and cibuildwheel support that new Python version.</p>
</section>
<section id="backport-pull-requests">
<h4>Backport pull requests<a class="headerlink" href="#backport-pull-requests" title="Link to this heading">#</a></h4>
<p>Changes that have been marked for this release must be backported to the
maintenance/2.4.x branch.</p>
</section>
<section id="update-2-4-0-milestones">
<h4>Update 2.4.0 milestones<a class="headerlink" href="#update-2-4-0-milestones" title="Link to this heading">#</a></h4>
<p>Look at the issues/prs with 2.4.0 milestones and either push them off to a
later version, or maybe remove the milestone. You may need to add a milestone.</p>
</section>
<section id="check-the-numpy-release-repo">
<h4>Check the numpy-release repo<a class="headerlink" href="#check-the-numpy-release-repo" title="Link to this heading">#</a></h4>
<p>The things to check are the <code class="docutils literal notranslate"><span class="pre">cibuildwheel</span></code> version in
<code class="docutils literal notranslate"><span class="pre">.github/workflows/wheels.yml</span></code> and the <code class="docutils literal notranslate"><span class="pre">openblas</span></code> versions in
<code class="docutils literal notranslate"><span class="pre">openblas_requirements.txt</span></code>.</p>
</section>
</section>
<section id="make-a-release-pr">
<h3>Make a release PR<a class="headerlink" href="#make-a-release-pr" title="Link to this heading">#</a></h3>
<p>Four documents usually need to be updated or created for the release PR:</p>
<ul class="simple">
<li><p>The changelog</p></li>
<li><p>The release notes</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.mailmap</span></code> file</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file</p></li>
</ul>
<p>These changes should be made in an ordinary PR against the maintenance branch.
Other small, miscellaneous fixes may be part of this PR. The commit message
might be something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REL</span><span class="p">:</span> <span class="n">Prepare</span> <span class="k">for</span> <span class="n">the</span> <span class="n">NumPy</span> <span class="mf">2.4.0</span> <span class="n">release</span>

<span class="o">-</span> <span class="n">Create</span> <span class="mf">2.4.0</span><span class="o">-</span><span class="n">changelog</span><span class="o">.</span><span class="n">rst</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Update</span> <span class="mf">2.4.0</span><span class="o">-</span><span class="n">notes</span><span class="o">.</span><span class="n">rst</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Update</span> <span class="o">.</span><span class="n">mailmap</span><span class="o">.</span>
<span class="o">-</span> <span class="n">Update</span> <span class="n">pyproject</span><span class="o">.</span><span class="n">toml</span>
</pre></div>
</div>
<section id="set-the-release-version">
<h4>Set the release version<a class="headerlink" href="#set-the-release-version" title="Link to this heading">#</a></h4>
<p>Check the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file and set the release version and update the
classifier if needed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gvim pyproject.toml
</pre></div>
</div>
</section>
<section id="check-the-doc-source-release-rst-file">
<h4>Check the <code class="docutils literal notranslate"><span class="pre">doc/source/release.rst</span></code> file<a class="headerlink" href="#check-the-doc-source-release-rst-file" title="Link to this heading">#</a></h4>
<p>make sure that the release notes have an entry in the <code class="docutils literal notranslate"><span class="pre">release.rst</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gvim doc/source/release.rst
</pre></div>
</div>
</section>
<section id="generate-the-changelog">
<h4>Generate the changelog<a class="headerlink" href="#generate-the-changelog" title="Link to this heading">#</a></h4>
<p>The changelog is generated using the changelog tool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ spin changelog $GITHUB v2.3.0..maintenance/2.4.x &gt; doc/changelog/2.4.0-changelog.rst
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">GITHUB</span></code> contains your GitHub access token. The text will need to be
checked for non-standard contributor names. It is also a good idea to remove
any links that may be present in the PR titles as they don’t translate well to
Markdown, replace them with monospaced text. The non-standard contributor names
should be fixed by updating the <code class="docutils literal notranslate"><span class="pre">.mailmap</span></code> file, which is a lot of work. It
is best to make several trial runs before reaching this point and ping the
malefactors using a GitHub issue to get the needed information.</p>
</section>
<section id="finish-the-release-notes">
<h4>Finish the release notes<a class="headerlink" href="#finish-the-release-notes" title="Link to this heading">#</a></h4>
<p>If there are any release notes snippets in <code class="docutils literal notranslate"><span class="pre">doc/release/upcoming_changes/</span></code>,
run <code class="docutils literal notranslate"><span class="pre">spin</span> <span class="pre">notes</span></code>, which will incorporate the snippets into the
<code class="docutils literal notranslate"><span class="pre">doc/source/release/notes-towncrier.rst</span></code> file and delete the snippets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ spin notes
$ gvim doc/source/release/notes-towncrier.rst doc/source/release/2.4.0-notes.rst
</pre></div>
</div>
<p>Once the <code class="docutils literal notranslate"><span class="pre">notes-towncrier</span></code> contents has been incorporated into release note
the <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">include::</span> <span class="pre">notes-towncrier.rst</span></code> directive can be removed.  The notes
will always need some fixups, the introduction will need to be written, and
significant changes should be called out. For patch releases the changelog text
may also be appended, but not for the initial release as it is too long. Check
previous release notes to see how this is done.</p>
</section>
<section id="test-the-wheel-builds">
<h4>Test the wheel builds<a class="headerlink" href="#test-the-wheel-builds" title="Link to this heading">#</a></h4>
<p>After the release PR is merged, go to the <code class="docutils literal notranslate"><span class="pre">numpy-release</span></code> repository in your
browser and manually trigger the workflow on the <code class="docutils literal notranslate"><span class="pre">maintenance/2.4.x</span></code> branch
using the <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">workflow</span></code> button in <code class="docutils literal notranslate"><span class="pre">actions</span></code>.  Make sure that the upload
target is <code class="docutils literal notranslate"><span class="pre">none</span></code> in the <em>evironment</em> dropdown. The wheels take about 1 hour
to build, but sometimes GitHub is very slow. If some wheel builds fail for
unrelated reasons, you can re-run them as normal in the GitHub Actions UI with
<code class="docutils literal notranslate"><span class="pre">re-run</span> <span class="pre">failed</span></code>. After the wheels are built review the results, checking that
the number of artifacts are correct, the wheel names are as expected, etc. If
everything looks good, proceed with the release.</p>
</section>
</section>
<section id="release-walkthrough">
<h3>Release walkthrough<a class="headerlink" href="#release-walkthrough" title="Link to this heading">#</a></h3>
<p>Note that in the code snippets below, <code class="docutils literal notranslate"><span class="pre">upstream</span></code> refers to the root repository on
GitHub and <code class="docutils literal notranslate"><span class="pre">origin</span></code> to its fork in your personal GitHub repositories. You may
need to make adjustments if you have not forked the repository but simply
cloned it locally. You can also edit <code class="docutils literal notranslate"><span class="pre">.git/config</span></code> and add <code class="docutils literal notranslate"><span class="pre">upstream</span></code> if it
isn’t already present.</p>
<section id="tag-the-release-commit">
<h4>1. Tag the release commit<a class="headerlink" href="#tag-the-release-commit" title="Link to this heading">#</a></h4>
<p>Checkout the branch for the release, make sure it is up to date, and clean the
repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout maintenance/2.4.x
$ git pull upstream maintenance/2.4.x
$ git submodule update
$ git clean -xdfq
</pre></div>
</div>
<p>Sanity check:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m spin test -m full
</pre></div>
</div>
<p>Tag the release and push the tag. This requires write permission for the numpy
repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git tag -a -s v2.4.0 -m&quot;NumPy 2.4.0 release&quot;
$ git push upstream v2.4.0
</pre></div>
</div>
<p>If you need to delete the tag due to error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git tag -d v2.4.0
$ git push --delete upstream v2.4.0
</pre></div>
</div>
</section>
<section id="build-wheels-and-sdist">
<h4>2. Build wheels and sdist<a class="headerlink" href="#build-wheels-and-sdist" title="Link to this heading">#</a></h4>
<p>Go to the <code class="docutils literal notranslate"><span class="pre">numpy-release</span></code> repository in your browser and manually trigger the
workflow on the <code class="docutils literal notranslate"><span class="pre">maintenance/2.4.x</span></code> branch using the <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">workflow</span></code> button
in <code class="docutils literal notranslate"><span class="pre">actions</span></code>.  Make sure that the upload target is <code class="docutils literal notranslate"><span class="pre">pypi</span></code> in the
<em>evironment</em> dropdown. the wheels take about 1 hour to build, but sometimes
GitHub is very slow. If some wheel builds fail for unrelated reasons, you can
re-run them as normal in the GitHub Actions UI with <code class="docutils literal notranslate"><span class="pre">re-run</span> <span class="pre">failed</span></code>. After
the wheels are built review the results, checking that the number of artifacts
are correct, the wheel names are as expected, etc. If everything looks good
trigger the upload.</p>
</section>
<section id="upload-files-to-github-releases">
<h4>3. Upload files to GitHub Releases<a class="headerlink" href="#upload-files-to-github-releases" title="Link to this heading">#</a></h4>
<p>Go to <a class="github reference external" href="https://github.com/numpy/numpy/releases">numpy/numpy</a>, there should be a <code class="docutils literal notranslate"><span class="pre">v2.4.0</span></code>
tag, click on it and hit the edit button for that tag and update the title to
“v2.4.0 (&lt;date&gt;)”. There are two ways to add files, using an editable text
window and as binary uploads. The text window needs markdown, so translate the
release notes from rst to md:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python tools/write_release.py 2.4.0
</pre></div>
</div>
<p>this will create a <code class="docutils literal notranslate"><span class="pre">release/README.md</span></code> file that you can edit. Check the
result to see that it looks correct. Things that may need fixing: wrapped lines
that need unwrapping and links that should be changed to monospaced text. Then
copy the contents to the clipboard and paste them into the text window. It may
take several tries to get it look right. Then</p>
<ul class="simple">
<li><p>Download the sdist (<code class="docutils literal notranslate"><span class="pre">numpy-2.4.0.tar.gz</span></code>) from PyPI and upload it to GitHub
as a binary file. You cannot do this using pip.</p></li>
<li><p>Upload <code class="docutils literal notranslate"><span class="pre">release/README.rst</span></code> as a binary file.</p></li>
<li><p>Upload <code class="docutils literal notranslate"><span class="pre">doc/changelog/2.4.0-changelog.rst</span></code> as a binary file.</p></li>
<li><p>Check the pre-release button if this is a pre-releases.</p></li>
<li><p>Hit the <code class="docutils literal notranslate"><span class="pre">Publish</span> <span class="pre">release</span></code> button at the bottom.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please ensure that all 3 files are uploaded are present and the
release text is complete. Releases are configured to be immutable, so
mistakes can’t (easily) be fixed anymore.</p>
</div>
</section>
<section id="upload-documents-to-numpy-org-skip-for-prereleases">
<h4>4. Upload documents to numpy.org (skip for prereleases)<a class="headerlink" href="#upload-documents-to-numpy-org-skip-for-prereleases" title="Link to this heading">#</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need a GitHub personal access token to push the update.</p>
</div>
<p>This step is only needed for final releases and can be skipped for pre-releases
and most patch releases. <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">merge-doc</span></code> clones the <code class="docutils literal notranslate"><span class="pre">numpy/doc</span></code> repo into
<code class="docutils literal notranslate"><span class="pre">doc/build/merge</span></code> and updates it with the new documentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clean -xdfq
$ git co v2.4.0
$ rm -rf doc/build  # want version to be current
$ python -m spin docs merge-doc --build
$ pushd doc/build/merge
</pre></div>
</div>
<p>If the release series is a new one, you will need to add a new section to the
<code class="docutils literal notranslate"><span class="pre">doc/build/merge/index.html</span></code> front page just after the “insert here” comment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gvim index.html +/&#39;insert here&#39;
</pre></div>
</div>
<p>Further, update the version-switcher json file to add the new release and
update the version marked <code class="docutils literal notranslate"><span class="pre">(stable)</span></code> and <code class="docutils literal notranslate"><span class="pre">preferred</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gvim _static/versions.json
</pre></div>
</div>
<p>Then run <code class="docutils literal notranslate"><span class="pre">update.py</span></code> to update the version in <code class="docutils literal notranslate"><span class="pre">_static</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 update.py
</pre></div>
</div>
<p>You can “test run” the new documentation in a browser to make sure the links
work, although the version dropdown will not change, it pulls its information
from <code class="docutils literal notranslate"><span class="pre">numpy.org</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ firefox index.html  # or google-chrome, etc.
</pre></div>
</div>
<p>Update the stable link and update:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ln -sfn 2.4 stable
$ ls -l  # check the link
</pre></div>
</div>
<p>Once everything seems satisfactory, update, commit and upload the changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git commit -a -m&quot;Add documentation for v2.4.0&quot;
$ git push git@github.com:numpy/doc
$ popd
</pre></div>
</div>
</section>
<section id="reset-the-maintenance-branch-into-a-development-state-skip-for-prereleases">
<h4>5. Reset the maintenance branch into a development state (skip for prereleases)<a class="headerlink" href="#reset-the-maintenance-branch-into-a-development-state-skip-for-prereleases" title="Link to this heading">#</a></h4>
<p>Create release notes for next release and edit them to set the version. These
notes will be a skeleton and have little content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout -b begin-2.4.1 maintenance/2.4.x
$ cp doc/source/release/template.rst doc/source/release/2.4.1-notes.rst
$ gvim doc/source/release/2.4.1-notes.rst
$ git add doc/source/release/2.4.1-notes.rst
</pre></div>
</div>
<p>Add a link to the new release notes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gvim doc/source/release.rst
</pre></div>
</div>
<p>Update the <code class="docutils literal notranslate"><span class="pre">version</span></code> in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gvim pyproject.toml
</pre></div>
</div>
<p>Commit the result, edit the commit message, note the files in the commit, and
add a line <code class="docutils literal notranslate"><span class="pre">[skip</span> <span class="pre">azp]</span> <span class="pre">[skip</span> <span class="pre">cirrus]</span> <span class="pre">[skip</span> <span class="pre">actions]</span></code>, then push:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git commit -a -m&quot;MAINT: Prepare 2.4.x for further development&quot;
$ git rebase -i HEAD^
$ git push origin HEAD
</pre></div>
</div>
<p>Go to GitHub and make a PR. It should be merged quickly.</p>
</section>
<section id="announce-the-release-on-numpy-org-skip-for-prereleases">
<h4>6. Announce the release on numpy.org (skip for prereleases)<a class="headerlink" href="#announce-the-release-on-numpy-org-skip-for-prereleases" title="Link to this heading">#</a></h4>
<p>This assumes that you have forked <a class="github reference external" href="https://github.com/numpy/numpy.org">numpy/numpy.org</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd ../numpy.org
$ git checkout main
$ git pull upstream main
$ git checkout -b announce-numpy-2.4.0
$ gvim content/en/news.md
</pre></div>
</div>
<ul class="simple">
<li><p>For all releases, go to the bottom of the page and add a one line link. Look
to the previous links for example.</p></li>
<li><p>For the <code class="docutils literal notranslate"><span class="pre">*.0</span></code> release in a cycle, add a new section at the top with a short
description of the new features and point the news link to it.</p></li>
<li><p>Edit the newsHeader and date fields at the top of news.md</p></li>
<li><p>Also edit the buttonText on line 14 in content/en/config.yaml</p></li>
</ul>
<p>commit and push:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git commit -a -m&quot;announce the NumPy 2.4.0 release&quot;
$ git push origin HEAD
</pre></div>
</div>
<p>Go to GitHub and make a PR.</p>
</section>
<section id="announce-to-mailing-lists">
<h4>7. Announce to mailing lists<a class="headerlink" href="#announce-to-mailing-lists" title="Link to this heading">#</a></h4>
<p>The release should be announced on the numpy-discussion and
python-announce-list mailing lists. Look at previous announcements for the
basic template. The contributor and PR lists are the same as generated for the
release notes above. If you cross-post, make sure that python-announce-list is
BCC so that replies will not be sent to that list.</p>
</section>
<section id="post-release-update-main-skip-for-prereleases">
<h4>8. Post-release update main (skip for prereleases)<a class="headerlink" href="#post-release-update-main-skip-for-prereleases" title="Link to this heading">#</a></h4>
<p>Checkout main and forward port the documentation changes. You may also want
to update these notes if procedures have changed or improved:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout -b post-2.4.0-release-update main
$ git checkout maintenance/2.4.x doc/source/release/2.4.0-notes.rst
$ git checkout maintenance/2.4.x doc/changelog/2.4.0-changelog.rst
$ git checkout maintenance/2.4.x .mailmap  # only if updated for release.
$ gvim doc/source/release.rst  # Add link to new notes
$ git status  # check status before commit
$ git commit -a -m&quot;MAINT: Update main after 2.4.0 release.&quot;
$ git push origin HEAD
</pre></div>
</div>
<p>Go to GitHub and make a PR.</p>
</section>
</section>
</section>
<section id="branch-walkthrough">
<span id="branching"></span><h2>Branch walkthrough<a class="headerlink" href="#branch-walkthrough" title="Link to this heading">#</a></h2>
<p>This guide contains a walkthrough of branching NumPy 2.3.x on Linux.  The
commands can be copied into the command line, but be sure to replace 2.3 and
2.4 by the correct versions. It is good practice to make <code class="docutils literal notranslate"><span class="pre">.mailmap</span></code> as
current as possible before making the branch, that may take several weeks.</p>
<p>This should be read together with the
<a class="reference internal" href="#prepare-release"><span class="std std-ref">general release guide</span></a>.</p>
<section id="id2">
<h3>Branching<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<section id="make-the-branch">
<h4>Make the branch<a class="headerlink" href="#make-the-branch" title="Link to this heading">#</a></h4>
<p>This is only needed when starting a new maintenance branch. The start of a new
development cycle in the main branch should get an annotated tag. That is done
as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout main
$ git pull upstream main
$ git commit --allow-empty -m&#39;REL: Begin NumPy 2.4.0 development&#39;
$ git push upstream HEAD
</pre></div>
</div>
<p>If the push fails because new PRs have been merged, do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git pull --rebase upstream
</pre></div>
</div>
<p>and repeat the push. Once the push succeeds, tag it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git tag -a -s v2.4.0.dev0 -m&#39;Begin NumPy 2.4.0 development&#39;
$ git push upstream v2.4.0.dev0
</pre></div>
</div>
<p>then make the new branch and push it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git branch maintenance/2.3.x HEAD^
$ git push upstream maintenance/2.3.x
</pre></div>
</div>
</section>
<section id="prepare-the-main-branch-for-further-development">
<h4>Prepare the main branch for further development<a class="headerlink" href="#prepare-the-main-branch-for-further-development" title="Link to this heading">#</a></h4>
<p>Make a PR branch to prepare <code class="docutils literal notranslate"><span class="pre">main</span></code> for further development:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout -b &#39;prepare-main-for-2.4.0-development&#39; v2.4.0.dev0
</pre></div>
</div>
<p>Delete the release note fragments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git rm doc/release/upcoming_changes/[0-9]*.*.rst
</pre></div>
</div>
<p>Create the new release notes skeleton and add to index:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cp doc/source/release/template.rst doc/source/release/2.4.0-notes.rst
$ gvim doc/source/release/2.4.0-notes.rst  # put the correct version
$ git add doc/source/release/2.4.0-notes.rst
$ gvim doc/source/release.rst  # add new notes to notes index
$ git add doc/source/release.rst
</pre></div>
</div>
<p>Update <code class="docutils literal notranslate"><span class="pre">cversions.txt</span></code> to add current release. There should be no new hash
to worry about at this early point, just add a comment following previous
practice:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gvim numpy/_core/code_generators/cversions.txt
$ git add numpy/_core/code_generators/cversions.txt
</pre></div>
</div>
<p>Check your work, commit it, and push:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git status  # check work
$ git commit -m&#39;REL: Prepare main for NumPy 2.4.0 development&#39;
$ git push origin HEAD
</pre></div>
</div>
<p>Now make a pull request.</p>
</section>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="depending_on_numpy.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">For downstream package authors</p>
      </div>
    </a>
    <a class="right-next"
       href="governance/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">NumPy governance</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-prepare-a-release">How to prepare a release</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#current-build-and-release-info">Current build and release info</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#supported-platforms-and-versions">Supported platforms and versions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#toolchains">Toolchains</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#openblas">OpenBLAS</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#building-docs">Building docs</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#uploading-to-pypi">Uploading to PyPI</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-author-pr-lists">Generating author/PR lists</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-released">What is released</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#release-process">Release process</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#agree-on-a-release-schedule">Agree on a release schedule</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#check-deprecations">Check deprecations</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#check-the-c-api-version-number">Check the C API version number</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#check-the-release-notes">Check the release notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-by-step-directions">Step-by-step directions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#facility-preparation">Facility preparation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prior-to-release">Prior to release</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#add-drop-python-versions">Add/drop Python versions</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#backport-pull-requests">Backport pull requests</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#update-2-4-0-milestones">Update 2.4.0 milestones</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#check-the-numpy-release-repo">Check the numpy-release repo</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#make-a-release-pr">Make a release PR</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#set-the-release-version">Set the release version</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#check-the-doc-source-release-rst-file">Check the <code class="docutils literal notranslate"><span class="pre">doc/source/release.rst</span></code> file</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-the-changelog">Generate the changelog</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#finish-the-release-notes">Finish the release notes</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#test-the-wheel-builds">Test the wheel builds</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#release-walkthrough">Release walkthrough</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#tag-the-release-commit">1. Tag the release commit</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#build-wheels-and-sdist">2. Build wheels and sdist</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#upload-files-to-github-releases">3. Upload files to GitHub Releases</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#upload-documents-to-numpy-org-skip-for-prereleases">4. Upload documents to numpy.org (skip for prereleases)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#reset-the-maintenance-branch-into-a-development-state-skip-for-prereleases">5. Reset the maintenance branch into a development state (skip for prereleases)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#announce-the-release-on-numpy-org-skip-for-prereleases">6. Announce the release on numpy.org (skip for prereleases)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#announce-to-mailing-lists">7. Announce to mailing lists</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#post-release-update-main-skip-for-prereleases">8. Post-release update main (skip for prereleases)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#branch-walkthrough">Branch walkthrough</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Branching</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#make-the-branch">Make the branch</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#prepare-the-main-branch-for-further-development">Prepare the main branch for further development</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2008-2025, NumPy Developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>