
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>NumPy 2.0.0 Release Notes &#8212; NumPy v2.4.dev0 Manual</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Vibur" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyterlite_sphinx.css?v=8ee2c72c" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/numpy.css?v=e8edb4a7" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=530e9895"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    <script src="../_static/jupyterlite_sphinx.js?v=96e329c5"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script data-domain="numpy.org/doc/stable/" defer="defer" src="https://views.scientific-python.org/js/script.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'release/2.0.0-notes';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://numpy.org/doc/_static/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'devdocs';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            true;
        </script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NumPy 1.26.4 Release Notes" href="1.26.4-notes.html" />
    <link rel="prev" title="NumPy 2.0.1 Release Notes" href="2.0.1-notes.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.4.dev0" />
    <meta name="docbuild:last-update" content="Oct 25, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/numpylogo.svg" class="logo__image only-light" alt="NumPy v2.4.dev0 Manual - Home"/>
    <img src="../_static/numpylogo_dark.svg" class="logo__image only-dark pst-js-only" alt="NumPy v2.4.dev0 Manual - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../building/index.html">
    Building from source
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../dev/index.html">
    Development
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../release.html">
    Release notes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://numpy.org/numpy-tutorials/">
    Learn
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://numpy.org/neps">
    NEPs
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/numpy/numpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../building/index.html">
    Building from source
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../dev/index.html">
    Development
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../release.html">
    Release notes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://numpy.org/numpy-tutorials/">
    Learn
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://numpy.org/neps">
    NEPs
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/numpy/numpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../user/whatisnumpy.html">What is NumPy?</a></li>
<li class="toctree-l1"><a class="reference external" href="https://numpy.org/install/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/quickstart.html">NumPy quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/absolute_beginners.html">NumPy: the absolute basics for beginners</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Fundamentals and usage</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../user/basics.html">NumPy fundamentals</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../user/numpy-for-matlab-users.html">NumPy for MATLAB users</a></li>
<li class="toctree-l1"><a class="reference external" href="https://numpy.org/numpy-tutorials/">NumPy tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/howtos_index.html">NumPy how-tos</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced usage and interoperability</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../user/c-info.html">Using NumPy C-API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../f2py/index.html">F2PY user guide and reference manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/underthehood.html">Under-the-hood documentation for developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/basics.interoperability.html">Interoperability with NumPy</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extras</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../release.html">Release notes</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="2.4.0-notes.html">2.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.4-notes.html">2.3.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.3-notes.html">2.3.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.2-notes.html">2.3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.1-notes.html">2.3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.0-notes.html">2.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.6-notes.html">2.2.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.5-notes.html">2.2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.4-notes.html">2.2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.3-notes.html">2.2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.2-notes.html">2.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.1-notes.html">2.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.0-notes.html">2.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.1.3-notes.html">2.1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.1.2-notes.html">2.1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.1.1-notes.html">2.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.1.0-notes.html">2.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.0.2-notes.html">2.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.0.1-notes.html">2.0.1</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">2.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.26.4-notes.html">1.26.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.26.3-notes.html">1.26.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.26.2-notes.html">1.26.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.26.1-notes.html">1.26.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.26.0-notes.html">1.26.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.25.2-notes.html">1.25.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.25.1-notes.html">1.25.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.25.0-notes.html">1.25.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.24.4-notes.html">1.24.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.24.3-notes.html">1.24.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.24.2-notes.html">1.24.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.24.1-notes.html">1.24.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.24.0-notes.html">1.24.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.5-notes.html">1.23.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.4-notes.html">1.23.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.3-notes.html">1.23.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.2-notes.html">1.23.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.1-notes.html">1.23.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.0-notes.html">1.23.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.22.4-notes.html">1.22.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.22.3-notes.html">1.22.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.22.2-notes.html">1.22.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.22.1-notes.html">1.22.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.22.0-notes.html">1.22.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.6-notes.html">1.21.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.5-notes.html">1.21.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.4-notes.html">1.21.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.3-notes.html">1.21.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.2-notes.html">1.21.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.1-notes.html">1.21.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.0-notes.html">1.21.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.20.3-notes.html">1.20.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.20.2-notes.html">1.20.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.20.1-notes.html">1.20.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.20.0-notes.html">1.20.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.5-notes.html">1.19.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.4-notes.html">1.19.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.3-notes.html">1.19.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.2-notes.html">1.19.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.1-notes.html">1.19.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.0-notes.html">1.19.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.5-notes.html">1.18.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.4-notes.html">1.18.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.3-notes.html">1.18.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.2-notes.html">1.18.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.1-notes.html">1.18.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.0-notes.html">1.18.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.5-notes.html">1.17.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.4-notes.html">1.17.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.3-notes.html">1.17.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.2-notes.html">1.17.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.1-notes.html">1.17.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.0-notes.html">1.17.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.6-notes.html">1.16.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.5-notes.html">1.16.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.4-notes.html">1.16.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.3-notes.html">1.16.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.2-notes.html">1.16.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.1-notes.html">1.16.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.0-notes.html">1.16.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.15.4-notes.html">1.15.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.15.3-notes.html">1.15.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.15.2-notes.html">1.15.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.15.1-notes.html">1.15.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.15.0-notes.html">1.15.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.6-notes.html">1.14.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.5-notes.html">1.14.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.4-notes.html">1.14.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.3-notes.html">1.14.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.2-notes.html">1.14.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.1-notes.html">1.14.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.0-notes.html">1.14.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.13.3-notes.html">1.13.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.13.2-notes.html">1.13.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.13.1-notes.html">1.13.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.13.0-notes.html">1.13.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.12.1-notes.html">1.12.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.12.0-notes.html">1.12.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.11.3-notes.html">1.11.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.11.2-notes.html">1.11.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.11.1-notes.html">1.11.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.11.0-notes.html">1.11.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.10.4-notes.html">1.10.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.10.3-notes.html">1.10.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.10.2-notes.html">1.10.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.10.1-notes.html">1.10.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.10.0-notes.html">1.10.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.9.2-notes.html">1.9.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.9.1-notes.html">1.9.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.9.0-notes.html">1.9.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.8.2-notes.html">1.8.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.8.1-notes.html">1.8.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.8.0-notes.html">1.8.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.7.2-notes.html">1.7.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.7.1-notes.html">1.7.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.7.0-notes.html">1.7.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.6.2-notes.html">1.6.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.6.1-notes.html">1.6.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.6.0-notes.html">1.6.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.5.0-notes.html">1.5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.4.0-notes.html">1.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.3.0-notes.html">1.3.0</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../numpy_2_0_migration_guide.html">NumPy 2.0 migration guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">NumPy license</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../user/index.html" class="nav-link">NumPy user guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="../release.html" class="nav-link">Release notes</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">NumPy 2.0.0 Release Notes</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="numpy-2-0-0-release-notes">
<h1>NumPy 2.0.0 Release Notes<a class="headerlink" href="#numpy-2-0-0-release-notes" title="Link to this heading">#</a></h1>
<p>NumPy 2.0.0 is the first major release since 2006. It is the result of 11
months of development since the last feature release and is the work of 212
contributors spread over 1078 pull requests. It contains a large number of
exciting new features as well as changes to both the Python and C APIs.</p>
<p>This major release includes breaking changes that could not happen in a regular
minor (feature) release - including an ABI break, changes to type promotion
rules, and API changes which may not have been emitting deprecation warnings
in 1.26.x. Key documents related to how to adapt to changes in NumPy 2.0, in
addition to these release notes, include:</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="../numpy_2_0_migration_guide.html#numpy-2-migration-guide"><span class="std std-ref">NumPy 2.0 migration guide</span></a></p></li>
<li><p>The <a class="reference internal" href="../dev/depending_on_numpy.html#numpy-2-abi-handling"><span class="std std-ref">NumPy 2.0-specific advice</span></a> in
<a class="reference internal" href="../dev/depending_on_numpy.html#for-downstream-package-authors"><span class="std std-ref">For downstream package authors</span></a></p></li>
</ul>
<section id="highlights">
<h2>Highlights<a class="headerlink" href="#highlights" title="Link to this heading">#</a></h2>
<p>Highlights of this release include:</p>
<ul class="simple">
<li><p>New features:</p>
<ul>
<li><p>A new variable-length string dtype, <a class="reference internal" href="../reference/routines.dtypes.html#numpy.dtypes.StringDType" title="numpy.dtypes.StringDType"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StringDType</span></code></a> and a new
<a class="reference internal" href="../reference/routines.strings.html#module-numpy.strings" title="numpy.strings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.strings</span></code></a> namespace with performant ufuncs for string operations,</p></li>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">float32</span></code> and <code class="docutils literal notranslate"><span class="pre">longdouble</span></code> in all <a class="reference internal" href="../reference/routines.fft.html#module-numpy.fft" title="numpy.fft"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.fft</span></code></a> functions,</p></li>
<li><p>Support for the array API standard in the main <code class="docutils literal notranslate"><span class="pre">numpy</span></code> namespace.</p></li>
</ul>
</li>
<li><p>Performance improvements:</p>
<ul>
<li><p>Sorting functions (<a class="reference internal" href="../reference/generated/numpy.sort.html#numpy.sort" title="numpy.sort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sort</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.argsort.html#numpy.argsort" title="numpy.argsort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">argsort</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.partition.html#numpy.partition" title="numpy.partition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">partition</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.argpartition.html#numpy.argpartition" title="numpy.argpartition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">argpartition</span></code></a>)
have been accelerated through the use of the Intel x86-simd-sort and Google
Highway libraries, and may see large (hardware-specific) speedups,</p></li>
<li><p>macOS Accelerate support and binary wheels for macOS &gt;=14, with significant
performance improvements for linear algebra operations on macOS, and wheels
that are about 3 times smaller,</p></li>
<li><p><a class="reference internal" href="../reference/routines.char.html#module-numpy.char" title="numpy.char"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.char</span></code></a> fixed-length string operations have been accelerated by
implementing ufuncs that also support <a class="reference internal" href="../reference/routines.dtypes.html#numpy.dtypes.StringDType" title="numpy.dtypes.StringDType"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StringDType</span></code></a> in
addition to the fixed-length string dtypes,</p></li>
<li><p>A new tracing and introspection API, <a class="reference internal" href="../reference/generated/numpy.lib.introspect.opt_func_info.html#numpy.lib.introspect.opt_func_info" title="numpy.lib.introspect.opt_func_info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">opt_func_info</span></code></a>,
to determine which hardware-specific kernels are available and will be
dispatched to.</p></li>
<li><p><a class="reference internal" href="../reference/generated/numpy.save.html#numpy.save" title="numpy.save"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.save</span></code></a> now uses pickle protocol version 4 for saving arrays with
object dtype, which allows for pickle objects larger than 4GB and improves
saving speed by about 5% for large arrays.</p></li>
</ul>
</li>
<li><p>Python API improvements:</p>
<ul>
<li><p>A clear split between public and private API, with a new
<a class="reference internal" href="../reference/module_structure.html#module-structure"><span class="std std-ref">module structure</span></a>, and each public function now
available in a single place,</p></li>
<li><p>Many removals of non-recommended functions and aliases. This should make
it easier to learn and use NumPy. The number of objects in the main
namespace decreased by ~10% and in <code class="docutils literal notranslate"><span class="pre">numpy.lib</span></code> by ~80%,</p></li>
<li><p><a class="reference internal" href="../user/basics.types.html#canonical-python-and-c-types"><span class="std std-ref">Canonical dtype names</span></a> and a new
<a class="reference internal" href="../reference/generated/numpy.isdtype.html#numpy.isdtype" title="numpy.isdtype"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isdtype</span></code></a> introspection function,</p></li>
</ul>
</li>
<li><p>C API improvements:</p>
<ul>
<li><p>A new <a class="reference internal" href="../reference/c-api/array.html#dtype-api"><span class="std std-ref">public C API for creating custom dtypes</span></a>,</p></li>
<li><p>Many outdated functions and macros removed, and private internals hidden to
ease future extensibility,</p></li>
<li><p>New, easier to use, initialization functions:
<a class="reference internal" href="../reference/c-api/array.html#c.PyArray_ImportNumPyAPI" title="PyArray_ImportNumPyAPI"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_ImportNumPyAPI</span></code></a> and <a class="reference internal" href="../reference/c-api/ufunc.html#c.PyUFunc_ImportUFuncAPI" title="PyUFunc_ImportUFuncAPI"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUFunc_ImportUFuncAPI</span></code></a>.</p></li>
</ul>
</li>
<li><p>Improved behavior:</p>
<ul>
<li><p>Improvements to type promotion behavior was changed by adopting <a class="reference external" href="https://numpy.org/neps/nep-0050-scalar-promotion.html#nep50" title="(in NumPy Enhancement Proposals)"><span class="xref std std-ref">NEP
50</span></a>. This fixes many user surprises about promotions which
previously often depended on data values of input arrays rather than only
their dtypes.  Please see the NEP and the <a class="reference internal" href="../numpy_2_0_migration_guide.html#numpy-2-migration-guide"><span class="std std-ref">NumPy 2.0 migration guide</span></a>
for details as this change can lead to changes in output dtypes and lower
precision results for mixed-dtype operations.</p></li>
<li><p>The default integer type on Windows is now <code class="docutils literal notranslate"><span class="pre">int64</span></code> rather than <code class="docutils literal notranslate"><span class="pre">int32</span></code>,
matching the behavior on other platforms,</p></li>
<li><p>The maximum number of array dimensions is changed from 32 to 64</p></li>
</ul>
</li>
<li><p>Documentation:</p>
<ul>
<li><p>The reference guide navigation was significantly improved, and there is now
documentation on NumPy’s <a class="reference internal" href="../reference/module_structure.html#module-structure"><span class="std std-ref">module structure</span></a>,</p></li>
<li><p>The <a class="reference internal" href="../building/index.html#building-from-source"><span class="std std-ref">building from source</span></a> documentation was
completely rewritten,</p></li>
</ul>
</li>
</ul>
<p>Furthermore there are many changes to NumPy internals, including continuing to
migrate code from C to C++, that will make it easier to improve and maintain
NumPy in the future.</p>
<p>The “no free lunch” theorem dictates that there is a price to pay for all these
API and behavior improvements and better future extensibility. This price is:</p>
<ol class="arabic">
<li><p>Backwards compatibility. There are a significant number of breaking changes
to both the Python and C APIs. In the majority of cases, there are clear
error messages that will inform the user how to adapt their code. However,
there are also changes in behavior for which it was not possible to give
such an error message - these cases are all covered in the Deprecation and
Compatibility sections below, and in the <a class="reference internal" href="../numpy_2_0_migration_guide.html#numpy-2-migration-guide"><span class="std std-ref">NumPy 2.0 migration guide</span></a>.</p>
<p>Note that there is a <code class="docutils literal notranslate"><span class="pre">ruff</span></code> mode to auto-fix many things in Python code.</p>
</li>
<li><p>Breaking changes to the NumPy ABI. As a result, binaries of packages that
use the NumPy C API and were built against a NumPy 1.xx release will not
work with NumPy 2.0. On import, such packages will see an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>
with a message about binary incompatibility.</p>
<p>It is possible to build binaries against NumPy 2.0 that will work at runtime
with both NumPy 2.0 and 1.x. See <a class="reference internal" href="../dev/depending_on_numpy.html#numpy-2-abi-handling"><span class="std std-ref">NumPy 2.0-specific advice</span></a> for more details.</p>
<p><strong>All downstream packages that depend on the NumPy ABI are advised to do a
new release built against NumPy 2.0 and verify that that release works with
both 2.0 and 1.26 - ideally in the period between 2.0.0rc1 (which will be
ABI-stable) and the final 2.0.0 release to avoid problems for their users.</strong></p>
</li>
</ol>
<p>The Python versions supported by this release are 3.9-3.12.</p>
</section>
<section id="numpy-2-0-python-api-removals">
<h2>NumPy 2.0 Python API removals<a class="headerlink" href="#numpy-2-0-python-api-removals" title="Link to this heading">#</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">np.geterrobj</span></code>, <code class="docutils literal notranslate"><span class="pre">np.seterrobj</span></code> and the related ufunc keyword argument
<code class="docutils literal notranslate"><span class="pre">extobj=</span></code> have been removed.  The preferred replacement for all of these
is using the context manager <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">np.errstate():</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23922">gh-23922</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.cast</span></code> has been removed. The literal replacement for
<code class="docutils literal notranslate"><span class="pre">np.cast[dtype](arg)</span></code> is <code class="docutils literal notranslate"><span class="pre">np.asarray(arg,</span> <span class="pre">dtype=dtype)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.source</span></code> has been removed. The preferred replacement is
<code class="docutils literal notranslate"><span class="pre">inspect.getsource</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.lookfor</span></code> has been removed.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24144">gh-24144</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.who</span></code> has been removed. As an alternative for the removed functionality, one
can use a variable explorer that is available in IDEs such as Spyder or Jupyter Notebook.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24321">gh-24321</a>)</p>
</li>
<li><p>Warnings and exceptions present in <a class="reference internal" href="../reference/routines.exceptions.html#module-numpy.exceptions" title="numpy.exceptions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.exceptions</span></code></a> (e.g,
<a class="reference internal" href="../reference/generated/numpy.exceptions.ComplexWarning.html#numpy.exceptions.ComplexWarning" title="numpy.exceptions.ComplexWarning"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ComplexWarning</span></code></a>,
<a class="reference internal" href="../reference/generated/numpy.exceptions.VisibleDeprecationWarning.html#numpy.exceptions.VisibleDeprecationWarning" title="numpy.exceptions.VisibleDeprecationWarning"><code class="xref py py-obj docutils literal notranslate"><span class="pre">VisibleDeprecationWarning</span></code></a>) are no longer exposed in the
main namespace.</p></li>
<li><p>Multiple niche enums, expired members and functions have been removed from
the main namespace, such as: <code class="docutils literal notranslate"><span class="pre">ERR_*</span></code>, <code class="docutils literal notranslate"><span class="pre">SHIFT_*</span></code>, <code class="docutils literal notranslate"><span class="pre">np.fastCopyAndTranspose</span></code>,
<code class="docutils literal notranslate"><span class="pre">np.kernel_version</span></code>, <code class="docutils literal notranslate"><span class="pre">np.numarray</span></code>, <code class="docutils literal notranslate"><span class="pre">np.oldnumeric</span></code> and <code class="docutils literal notranslate"><span class="pre">np.set_numeric_ops</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24316">gh-24316</a>)</p>
</li>
<li><p>Replaced <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">...</span> <span class="pre">import</span> <span class="pre">*</span></code> in the <code class="docutils literal notranslate"><span class="pre">numpy/__init__.py</span></code> with explicit imports.
As a result, these main namespace members got removed: <code class="docutils literal notranslate"><span class="pre">np.FLOATING_POINT_SUPPORT</span></code>,
<code class="docutils literal notranslate"><span class="pre">np.FPE_*</span></code>, <code class="docutils literal notranslate"><span class="pre">np.NINF</span></code>, <code class="docutils literal notranslate"><span class="pre">np.PINF</span></code>, <code class="docutils literal notranslate"><span class="pre">np.NZERO</span></code>, <code class="docutils literal notranslate"><span class="pre">np.PZERO</span></code>, <code class="docutils literal notranslate"><span class="pre">np.CLIP</span></code>,
<code class="docutils literal notranslate"><span class="pre">np.WRAP</span></code>, <code class="docutils literal notranslate"><span class="pre">np.WRAP</span></code>, <code class="docutils literal notranslate"><span class="pre">np.RAISE</span></code>, <code class="docutils literal notranslate"><span class="pre">np.BUFSIZE</span></code>, <code class="docutils literal notranslate"><span class="pre">np.UFUNC_BUFSIZE_DEFAULT</span></code>,
<code class="docutils literal notranslate"><span class="pre">np.UFUNC_PYVALS_NAME</span></code>, <code class="docutils literal notranslate"><span class="pre">np.ALLOW_THREADS</span></code>, <code class="docutils literal notranslate"><span class="pre">np.MAXDIMS</span></code>, <code class="docutils literal notranslate"><span class="pre">np.MAY_SHARE_EXACT</span></code>,
<code class="docutils literal notranslate"><span class="pre">np.MAY_SHARE_BOUNDS</span></code>, <code class="docutils literal notranslate"><span class="pre">add_newdoc</span></code>, <code class="docutils literal notranslate"><span class="pre">np.add_docstring</span></code> and
<code class="docutils literal notranslate"><span class="pre">np.add_newdoc_ufunc</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24357">gh-24357</a>)</p>
</li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.float_</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.float64</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.complex_</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.complex128</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.longfloat</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.longdouble</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.singlecomplex</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.complex64</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.cfloat</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.complex128</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.longcomplex</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.clongdouble</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.clongfloat</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.clongdouble</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.string_</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.bytes_</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.unicode_</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.str_</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.Inf</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.Infinity</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.NaN</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.infty</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.mat</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.asmatrix</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.issubclass_</span></code> has been removed. Use the <code class="docutils literal notranslate"><span class="pre">issubclass</span></code> builtin instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.asfarray</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.asarray</span></code> with a proper dtype instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.set_string_function</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.set_printoptions</span></code>
instead with a formatter for custom printing of NumPy objects.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.tracemalloc_domain</span></code> is now only available from <code class="docutils literal notranslate"><span class="pre">np.lib</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.recfromcsv</span></code> and <code class="docutils literal notranslate"><span class="pre">np.recfromtxt</span></code> were removed from the main namespace.
Use <code class="docutils literal notranslate"><span class="pre">np.genfromtxt</span></code> with comma delimiter instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.issctype</span></code>, <code class="docutils literal notranslate"><span class="pre">np.maximum_sctype</span></code>, <code class="docutils literal notranslate"><span class="pre">np.obj2sctype</span></code>, <code class="docutils literal notranslate"><span class="pre">np.sctype2char</span></code>,
<code class="docutils literal notranslate"><span class="pre">np.sctypes</span></code>, <code class="docutils literal notranslate"><span class="pre">np.issubsctype</span></code> were all removed from the
main namespace without replacement, as they where niche members.</p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">np.deprecate</span></code> and <code class="docutils literal notranslate"><span class="pre">np.deprecate_with_doc</span></code> has been removed
from the main namespace. Use <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> instead.</p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">np.safe_eval</span></code> has been removed from the main namespace.
Use <code class="docutils literal notranslate"><span class="pre">ast.literal_eval</span></code> instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24376">gh-24376</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.find_common_type</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">numpy.promote_types</span></code> or
<code class="docutils literal notranslate"><span class="pre">numpy.result_type</span></code> instead. To achieve semantics for the <code class="docutils literal notranslate"><span class="pre">scalar_types</span></code>
argument, use <code class="docutils literal notranslate"><span class="pre">numpy.result_type</span></code> and pass <code class="docutils literal notranslate"><span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">0.0</span></code>, or <code class="docutils literal notranslate"><span class="pre">0j</span></code> as a
Python scalar instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.round_</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.round</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.nbytes</span></code> has been removed. Use <code class="docutils literal notranslate"><span class="pre">np.dtype(&lt;dtype&gt;).itemsize</span></code> instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24477">gh-24477</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.compare_chararrays</span></code> has been removed from the main namespace.
Use <code class="docutils literal notranslate"><span class="pre">np.char.compare_chararrays</span></code> instead.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">charrarray</span></code> in the main namespace has been deprecated. It can be imported
without a deprecation warning from <code class="docutils literal notranslate"><span class="pre">np.char.chararray</span></code> for now,
but we are planning to fully deprecate and remove <code class="docutils literal notranslate"><span class="pre">chararray</span></code> in the future.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.format_parser</span></code> has been removed from the main namespace.
Use <code class="docutils literal notranslate"><span class="pre">np.rec.format_parser</span></code> instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24587">gh-24587</a>)</p>
</li>
<li><p>Support for seven data type string aliases has been removed from <code class="docutils literal notranslate"><span class="pre">np.dtype</span></code>:
<code class="docutils literal notranslate"><span class="pre">int0</span></code>, <code class="docutils literal notranslate"><span class="pre">uint0</span></code>, <code class="docutils literal notranslate"><span class="pre">void0</span></code>, <code class="docutils literal notranslate"><span class="pre">object0</span></code>, <code class="docutils literal notranslate"><span class="pre">str0</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes0</span></code> and <code class="docutils literal notranslate"><span class="pre">bool8</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24807">gh-24807</a>)</p>
</li>
<li><p>The experimental <code class="docutils literal notranslate"><span class="pre">numpy.array_api</span></code> submodule has been removed. Use the main
<code class="docutils literal notranslate"><span class="pre">numpy</span></code> namespace for regular usage instead, or the separate
<code class="docutils literal notranslate"><span class="pre">array-api-strict</span></code> package for the compliance testing use case for which
<code class="docutils literal notranslate"><span class="pre">numpy.array_api</span></code> was mostly used.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25911">gh-25911</a>)</p>
</li>
</ul>
<section id="array-prepare-is-removed">
<h3><code class="docutils literal notranslate"><span class="pre">__array_prepare__</span></code> is removed<a class="headerlink" href="#array-prepare-is-removed" title="Link to this heading">#</a></h3>
<p>UFuncs called <code class="docutils literal notranslate"><span class="pre">__array_prepare__</span></code> before running computations
for normal ufunc calls (not generalized ufuncs, reductions, etc.).
The function was also called instead of <code class="docutils literal notranslate"><span class="pre">__array_wrap__</span></code> on the
results of some linear algebra functions.</p>
<p>It is now removed. If you use it, migrate to <code class="docutils literal notranslate"><span class="pre">__array_ufunc__</span></code> or rely on
<code class="docutils literal notranslate"><span class="pre">__array_wrap__</span></code> which is called with a context in all cases, although only
after the result array is filled. In those code paths, <code class="docutils literal notranslate"><span class="pre">__array_wrap__</span></code> will
now be passed a base class, rather than a subclass array.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25105">gh-25105</a>)</p>
</section>
</section>
<section id="deprecations">
<h2>Deprecations<a class="headerlink" href="#deprecations" title="Link to this heading">#</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">np.compat</span></code> has been deprecated, as Python 2 is no longer supported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.int8</span></code> and similar classes will no longer support conversion of
out of bounds python integers to integer arrays. For example,
conversion of 255 to int8 will not return -1.
<code class="docutils literal notranslate"><span class="pre">numpy.iinfo(dtype)</span></code> can be used to check the machine limits for data types.
For example, <code class="docutils literal notranslate"><span class="pre">np.iinfo(np.uint16)</span></code> returns min = 0 and max = 65535.</p>
<p><code class="docutils literal notranslate"><span class="pre">np.array(value).astype(dtype)</span></code> will give the desired result.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.safe_eval</span></code> has been deprecated. <code class="docutils literal notranslate"><span class="pre">ast.literal_eval</span></code> should be used instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23830">gh-23830</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.recfromcsv</span></code>, <code class="docutils literal notranslate"><span class="pre">np.recfromtxt</span></code>, <code class="docutils literal notranslate"><span class="pre">np.disp</span></code>, <code class="docutils literal notranslate"><span class="pre">np.get_array_wrap</span></code>,
<code class="docutils literal notranslate"><span class="pre">np.maximum_sctype</span></code>, <code class="docutils literal notranslate"><span class="pre">np.deprecate</span></code> and <code class="docutils literal notranslate"><span class="pre">np.deprecate_with_doc</span></code>
have been deprecated.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24154">gh-24154</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.trapz</span></code> has been deprecated. Use <code class="docutils literal notranslate"><span class="pre">np.trapezoid</span></code> or a <code class="docutils literal notranslate"><span class="pre">scipy.integrate</span></code> function instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.in1d</span></code> has been deprecated. Use <code class="docutils literal notranslate"><span class="pre">np.isin</span></code> instead.</p></li>
<li><p>Alias <code class="docutils literal notranslate"><span class="pre">np.row_stack</span></code> has been deprecated. Use <code class="docutils literal notranslate"><span class="pre">np.vstack</span></code> directly.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24445">gh-24445</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">__array_wrap__</span></code> is now passed <code class="docutils literal notranslate"><span class="pre">arr,</span> <span class="pre">context,</span> <span class="pre">return_scalar</span></code> and
support for implementations not accepting all three are deprecated.  Its signature
should be <code class="docutils literal notranslate"><span class="pre">__array_wrap__(self,</span> <span class="pre">arr,</span> <span class="pre">context=None,</span> <span class="pre">return_scalar=False)</span></code></p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25409">gh-25409</a>)</p>
</li>
<li><p>Arrays of 2-dimensional vectors for <code class="docutils literal notranslate"><span class="pre">np.cross</span></code> have been deprecated. Use
arrays of 3-dimensional vectors instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24818">gh-24818</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;a&quot;)</span></code> alias for <code class="docutils literal notranslate"><span class="pre">np.dtype(np.bytes_)</span></code> was deprecated. Use
<code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;S&quot;)</span></code> alias instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24854">gh-24854</a>)</p>
</li>
<li><p>Use of keyword arguments <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> with functions
<code class="docutils literal notranslate"><span class="pre">assert_array_equal</span></code> and <code class="docutils literal notranslate"><span class="pre">assert_array_almost_equal</span></code> has been deprecated.
Pass the first two arguments as positional arguments instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24978">gh-24978</a>)</p>
</li>
</ul>
<section id="numpy-fft-deprecations-for-n-d-transforms-with-none-values-in-arguments">
<h3><code class="docutils literal notranslate"><span class="pre">numpy.fft</span></code> deprecations for n-D transforms with None values in arguments<a class="headerlink" href="#numpy-fft-deprecations-for-n-d-transforms-with-none-values-in-arguments" title="Link to this heading">#</a></h3>
<p>Using <code class="docutils literal notranslate"><span class="pre">fftn</span></code>, <code class="docutils literal notranslate"><span class="pre">ifftn</span></code>, <code class="docutils literal notranslate"><span class="pre">rfftn</span></code>, <code class="docutils literal notranslate"><span class="pre">irfftn</span></code>, <code class="docutils literal notranslate"><span class="pre">fft2</span></code>, <code class="docutils literal notranslate"><span class="pre">ifft2</span></code>,
<code class="docutils literal notranslate"><span class="pre">rfft2</span></code> or <code class="docutils literal notranslate"><span class="pre">irfft2</span></code> with the <code class="docutils literal notranslate"><span class="pre">s</span></code> parameter set to a value that is not
<code class="docutils literal notranslate"><span class="pre">None</span></code> and the <code class="docutils literal notranslate"><span class="pre">axes</span></code> parameter set to <code class="docutils literal notranslate"><span class="pre">None</span></code> has been deprecated, in
line with the array API standard. To retain current behaviour, pass a sequence
[0, …, k-1] to <code class="docutils literal notranslate"><span class="pre">axes</span></code> for an array of dimension k.</p>
<p>Furthermore, passing an array to <code class="docutils literal notranslate"><span class="pre">s</span></code> which contains <code class="docutils literal notranslate"><span class="pre">None</span></code> values is
deprecated as the parameter is documented to accept a sequence of integers
in both the NumPy docs and the array API specification. To use the default
behaviour of the corresponding 1-D transform, pass the value matching
the default for its <code class="docutils literal notranslate"><span class="pre">n</span></code> parameter. To use the default behaviour for every
axis, the <code class="docutils literal notranslate"><span class="pre">s</span></code> argument can be omitted.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25495">gh-25495</a>)</p>
</section>
<section id="np-linalg-lstsq-now-defaults-to-a-new-rcond-value">
<h3><code class="docutils literal notranslate"><span class="pre">np.linalg.lstsq</span></code> now defaults to a new <code class="docutils literal notranslate"><span class="pre">rcond</span></code> value<a class="headerlink" href="#np-linalg-lstsq-now-defaults-to-a-new-rcond-value" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/generated/numpy.linalg.lstsq.html#numpy.linalg.lstsq" title="numpy.linalg.lstsq"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lstsq</span></code></a> now uses the new rcond value of the machine precision
times <code class="docutils literal notranslate"><span class="pre">max(M,</span> <span class="pre">N)</span></code>.  Previously, the machine precision was used but a
FutureWarning was given to notify that this change will happen eventually.
That old behavior can still be achieved by passing <code class="docutils literal notranslate"><span class="pre">rcond=-1</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25721">gh-25721</a>)</p>
</section>
</section>
<section id="expired-deprecations">
<h2>Expired deprecations<a class="headerlink" href="#expired-deprecations" title="Link to this heading">#</a></h2>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">np.core.umath_tests</span></code> submodule has been removed from the public API.
(Deprecated in NumPy 1.15)</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23809">gh-23809</a>)</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">PyDataMem_SetEventHook</span></code> deprecation has expired and it is
removed.  Use <code class="docutils literal notranslate"><span class="pre">tracemalloc</span></code> and the <code class="docutils literal notranslate"><span class="pre">np.lib.tracemalloc_domain</span></code>
domain.  (Deprecated in NumPy 1.23)</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23921">gh-23921</a>)</p>
</li>
<li><p>The deprecation of <code class="docutils literal notranslate"><span class="pre">set_numeric_ops</span></code> and the C functions
<code class="docutils literal notranslate"><span class="pre">PyArray_SetNumericOps</span></code> and <code class="docutils literal notranslate"><span class="pre">PyArray_GetNumericOps</span></code> has
been expired and the functions removed.  (Deprecated in NumPy 1.16)</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23998">gh-23998</a>)</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">fasttake</span></code>, <code class="docutils literal notranslate"><span class="pre">fastclip</span></code>, and <code class="docutils literal notranslate"><span class="pre">fastputmask</span></code>  <code class="docutils literal notranslate"><span class="pre">ArrFuncs</span></code>
deprecation is now finalized.</p></li>
<li><p>The deprecated function <code class="docutils literal notranslate"><span class="pre">fastCopyAndTranspose</span></code> and its C counterpart
are now removed.</p></li>
<li><p>The deprecation of <code class="docutils literal notranslate"><span class="pre">PyArray_ScalarFromObject</span></code> is now finalized.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24312">gh-24312</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.msort</span></code> has been removed. For a replacement, <code class="docutils literal notranslate"><span class="pre">np.sort(a,</span> <span class="pre">axis=0)</span></code>
should be used instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24494">gh-24494</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.dtype((&quot;f8&quot;,</span> <span class="pre">1)</span></code> will now return a shape 1 subarray dtype
rather than a non-subarray one.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25761">gh-25761</a>)</p>
</li>
<li><p>Assigning to the <code class="docutils literal notranslate"><span class="pre">.data</span></code> attribute of an ndarray is disallowed and will
raise.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.binary_repr(a,</span> <span class="pre">width)</span></code> will raise if width is too small.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">NPY_CHAR</span></code> in <code class="docutils literal notranslate"><span class="pre">PyArray_DescrFromType()</span></code> will raise, use
<code class="docutils literal notranslate"><span class="pre">NPY_STRING</span></code> <code class="docutils literal notranslate"><span class="pre">NPY_UNICODE</span></code>, or <code class="docutils literal notranslate"><span class="pre">NPY_VSTRING</span></code> instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25794">gh-25794</a>)</p>
</li>
</ul>
</section>
<section id="compatibility-notes">
<h2>Compatibility notes<a class="headerlink" href="#compatibility-notes" title="Link to this heading">#</a></h2>
<section id="loadtxt-and-genfromtxt-default-encoding-changed">
<h3><code class="docutils literal notranslate"><span class="pre">loadtxt</span></code> and <code class="docutils literal notranslate"><span class="pre">genfromtxt</span></code> default encoding changed<a class="headerlink" href="#loadtxt-and-genfromtxt-default-encoding-changed" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">loadtxt</span></code> and <code class="docutils literal notranslate"><span class="pre">genfromtxt</span></code> now both default to <code class="docutils literal notranslate"><span class="pre">encoding=None</span></code>
which may mainly modify how <code class="docutils literal notranslate"><span class="pre">converters</span></code> work.
These will now be passed <code class="docutils literal notranslate"><span class="pre">str</span></code> rather than <code class="docutils literal notranslate"><span class="pre">bytes</span></code>. Pass the
encoding explicitly to always get the new or old behavior.
For <code class="docutils literal notranslate"><span class="pre">genfromtxt</span></code> the change also means that returned values will now be
unicode strings rather than bytes.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25158">gh-25158</a>)</p>
</section>
<section id="f2py-compatibility-notes">
<h3><code class="docutils literal notranslate"><span class="pre">f2py</span></code> compatibility notes<a class="headerlink" href="#f2py-compatibility-notes" title="Link to this heading">#</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">f2py</span></code> will no longer accept ambiguous <code class="docutils literal notranslate"><span class="pre">-m</span></code> and <code class="docutils literal notranslate"><span class="pre">.pyf</span></code> CLI
combinations.  When more than one <code class="docutils literal notranslate"><span class="pre">.pyf</span></code> file is passed, an error is
raised. When both <code class="docutils literal notranslate"><span class="pre">-m</span></code> and a <code class="docutils literal notranslate"><span class="pre">.pyf</span></code> is passed, a warning is emitted and
the <code class="docutils literal notranslate"><span class="pre">-m</span></code> provided name is ignored.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25181">gh-25181</a>)</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">f2py.compile()</span></code> helper has been removed because it leaked memory, has
been marked as experimental for several years now, and was implemented as a
thin <code class="docutils literal notranslate"><span class="pre">subprocess.run</span></code> wrapper. It was also one of the test bottlenecks. See
<a class="reference external" href="https://github.com/numpy/numpy/issues/25122">gh-25122</a> for the full
rationale. It also used several <code class="docutils literal notranslate"><span class="pre">np.distutils</span></code> features which are too
fragile to be ported to work with <code class="docutils literal notranslate"><span class="pre">meson</span></code>.</p></li>
<li><p>Users are urged to replace calls to <code class="docutils literal notranslate"><span class="pre">f2py.compile</span></code> with calls to
<code class="docutils literal notranslate"><span class="pre">subprocess.run(&quot;python&quot;,</span> <span class="pre">&quot;-m&quot;,</span> <span class="pre">&quot;numpy.f2py&quot;,...</span></code> instead, and to use
environment variables to interact with <code class="docutils literal notranslate"><span class="pre">meson</span></code>. <a class="reference external" href="https://mesonbuild.com/Machine-files.html">Native files</a> are also an option.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25193">gh-25193</a>)</p>
</li>
</ul>
</section>
<section id="minor-changes-in-behavior-of-sorting-functions">
<h3>Minor changes in behavior of sorting functions<a class="headerlink" href="#minor-changes-in-behavior-of-sorting-functions" title="Link to this heading">#</a></h3>
<p>Due to algorithmic changes and use of SIMD code, sorting functions with methods
that aren’t stable may return slightly different results in 2.0.0 compared to
1.26.x. This includes the default method of <a class="reference internal" href="../reference/generated/numpy.argsort.html#numpy.argsort" title="numpy.argsort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">argsort</span></code></a> and
<a class="reference internal" href="../reference/generated/numpy.argpartition.html#numpy.argpartition" title="numpy.argpartition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">argpartition</span></code></a>.</p>
</section>
<section id="removed-ambiguity-when-broadcasting-in-np-solve">
<h3>Removed ambiguity when broadcasting in <code class="docutils literal notranslate"><span class="pre">np.solve</span></code><a class="headerlink" href="#removed-ambiguity-when-broadcasting-in-np-solve" title="Link to this heading">#</a></h3>
<p>The broadcasting rules for <code class="docutils literal notranslate"><span class="pre">np.solve(a,</span> <span class="pre">b)</span></code> were ambiguous when <code class="docutils literal notranslate"><span class="pre">b</span></code> had 1
fewer dimensions than <code class="docutils literal notranslate"><span class="pre">a</span></code>. This has been resolved in a backward-incompatible
way and is now compliant with the Array API. The old behaviour can be
reconstructed by using <code class="docutils literal notranslate"><span class="pre">np.solve(a,</span> <span class="pre">b[...,</span> <span class="pre">None])[...,</span> <span class="pre">0]</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25914">gh-25914</a>)</p>
</section>
<section id="modified-representation-for-polynomial">
<h3>Modified representation for <code class="docutils literal notranslate"><span class="pre">Polynomial</span></code><a class="headerlink" href="#modified-representation-for-polynomial" title="Link to this heading">#</a></h3>
<p>The representation method for <a class="reference internal" href="../reference/generated/numpy.polynomial.polynomial.Polynomial.html#numpy.polynomial.polynomial.Polynomial" title="numpy.polynomial.polynomial.Polynomial"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Polynomial</span></code></a> was
updated to include the domain in the representation. The plain text and latex
representations are now consistent. For example the output of
<code class="docutils literal notranslate"><span class="pre">str(np.polynomial.Polynomial([1,</span> <span class="pre">1],</span> <span class="pre">domain=[.1,</span> <span class="pre">.2]))</span></code> used to be <code class="docutils literal notranslate"><span class="pre">1.0</span> <span class="pre">+</span>
<span class="pre">1.0</span> <span class="pre">x</span></code>, but now is <code class="docutils literal notranslate"><span class="pre">1.0</span> <span class="pre">+</span> <span class="pre">1.0</span> <span class="pre">(-3.0000000000000004</span> <span class="pre">+</span> <span class="pre">20.0</span> <span class="pre">x)</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/21760">gh-21760</a>)</p>
</section>
</section>
<section id="c-api-changes">
<h2>C API changes<a class="headerlink" href="#c-api-changes" title="Link to this heading">#</a></h2>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">PyArray_CGT</span></code>, <code class="docutils literal notranslate"><span class="pre">PyArray_CLT</span></code>, <code class="docutils literal notranslate"><span class="pre">PyArray_CGE</span></code>, <code class="docutils literal notranslate"><span class="pre">PyArray_CLE</span></code>,
<code class="docutils literal notranslate"><span class="pre">PyArray_CEQ</span></code>, <code class="docutils literal notranslate"><span class="pre">PyArray_CNE</span></code> macros have been removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArray_MIN</span></code> and <code class="docutils literal notranslate"><span class="pre">PyArray_MAX</span></code> have been moved from <code class="docutils literal notranslate"><span class="pre">ndarraytypes.h</span></code>
to <code class="docutils literal notranslate"><span class="pre">npy_math.h</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24258">gh-24258</a>)</p>
</li>
<li><p>A C API for working with <a class="reference internal" href="../reference/routines.dtypes.html#numpy.dtypes.StringDType" title="numpy.dtypes.StringDType"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.dtypes.StringDType</span></code></a> arrays has been exposed.
This includes functions for acquiring and releasing mutexes which lock access
to the string data, as well as packing and unpacking UTF-8 bytestreams from
array entries.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NPY_NTYPES</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">NPY_NTYPES_LEGACY</span></code> as it does not
include new NumPy built-in DTypes. In particular the new string DType
will likely not work correctly with code that handles legacy DTypes.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25347">gh-25347</a>)</p>
</li>
<li><p>The C-API now only exports the static inline function versions
of the array accessors (previously this depended on using “deprecated API”).
While we discourage it, the struct fields can still be used directly.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25789">gh-25789</a>)</p>
</li>
<li><p>NumPy now defines <a class="reference internal" href="../reference/c-api/array.html#c.PyArray_Pack" title="PyArray_Pack"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_Pack</span></code></a> to set an individual memory
address.  Unlike <code class="docutils literal notranslate"><span class="pre">PyArray_SETITEM</span></code> this function is equivalent to setting
an individual array item and does not require a NumPy array input.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25954">gh-25954</a>)</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-&gt;f</span></code> slot has been removed from <code class="docutils literal notranslate"><span class="pre">PyArray_Descr</span></code>.
If you use this slot, replace accessing it with
<code class="docutils literal notranslate"><span class="pre">PyDataType_GetArrFuncs</span></code> (see its documentation and the
<a class="reference internal" href="../numpy_2_0_migration_guide.html#numpy-2-migration-guide"><span class="std std-ref">NumPy 2.0 migration guide</span></a>). In some cases using other functions like
<code class="docutils literal notranslate"><span class="pre">PyArray_GETITEM</span></code> may be an alternatives.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArray_GETITEM</span></code> and <code class="docutils literal notranslate"><span class="pre">PyArray_SETITEM</span></code> now require the import of the
NumPy API table to be used and are no longer defined in <code class="docutils literal notranslate"><span class="pre">ndarraytypes.h</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25812">gh-25812</a>)</p>
</li>
<li><p>Due to runtime dependencies, the definition for functionality accessing
the dtype flags was moved from <code class="docutils literal notranslate"><span class="pre">numpy/ndarraytypes.h</span></code> and is only available
after including <code class="docutils literal notranslate"><span class="pre">numpy/ndarrayobject.h</span></code> as it requires <code class="docutils literal notranslate"><span class="pre">import_array()</span></code>.
This includes <code class="docutils literal notranslate"><span class="pre">PyDataType_FLAGCHK</span></code>, <code class="docutils literal notranslate"><span class="pre">PyDataType_REFCHK</span></code> and
<code class="docutils literal notranslate"><span class="pre">NPY_BEGIN_THREADS_DESCR</span></code>.</p></li>
<li><p>The dtype flags on <code class="docutils literal notranslate"><span class="pre">PyArray_Descr</span></code> must now be accessed through the
<code class="docutils literal notranslate"><span class="pre">PyDataType_FLAGS</span></code> inline function to be compatible with both 1.x and 2.x.
This function is defined in <code class="docutils literal notranslate"><span class="pre">npy_2_compat.h</span></code> to allow backporting.
Most or all users should use <code class="docutils literal notranslate"><span class="pre">PyDataType_FLAGCHK</span></code> which is available on
1.x and does not require backporting.
Cython users should use Cython 3.  Otherwise access will go through Python
unless they use <code class="docutils literal notranslate"><span class="pre">PyDataType_FLAGCHK</span></code> instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25816">gh-25816</a>)</p>
</li>
</ul>
<section id="datetime-functionality-exposed-in-the-c-api-and-cython-bindings">
<h3>Datetime functionality exposed in the C API and Cython bindings<a class="headerlink" href="#datetime-functionality-exposed-in-the-c-api-and-cython-bindings" title="Link to this heading">#</a></h3>
<p>The functions <code class="docutils literal notranslate"><span class="pre">NpyDatetime_ConvertDatetime64ToDatetimeStruct</span></code>,
<code class="docutils literal notranslate"><span class="pre">NpyDatetime_ConvertDatetimeStructToDatetime64</span></code>,
<code class="docutils literal notranslate"><span class="pre">NpyDatetime_ConvertPyDateTimeToDatetimeStruct</span></code>,
<code class="docutils literal notranslate"><span class="pre">NpyDatetime_GetDatetimeISO8601StrLen</span></code>, <code class="docutils literal notranslate"><span class="pre">NpyDatetime_MakeISO8601Datetime</span></code>,
and <code class="docutils literal notranslate"><span class="pre">NpyDatetime_ParseISO8601Datetime</span></code> have been added to the C API to
facilitate converting between strings, Python datetimes, and NumPy datetimes in
external libraries.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/21199">gh-21199</a>)</p>
</section>
<section id="const-correctness-for-the-generalized-ufunc-c-api">
<h3>Const correctness for the generalized ufunc C API<a class="headerlink" href="#const-correctness-for-the-generalized-ufunc-c-api" title="Link to this heading">#</a></h3>
<p>The NumPy C API’s functions for constructing generalized ufuncs
(<code class="docutils literal notranslate"><span class="pre">PyUFunc_FromFuncAndData</span></code>, <code class="docutils literal notranslate"><span class="pre">PyUFunc_FromFuncAndDataAndSignature</span></code>,
<code class="docutils literal notranslate"><span class="pre">PyUFunc_FromFuncAndDataAndSignatureAndIdentity</span></code>) take <code class="docutils literal notranslate"><span class="pre">types</span></code> and <code class="docutils literal notranslate"><span class="pre">data</span></code>
arguments that are not modified by NumPy’s internals. Like the <code class="docutils literal notranslate"><span class="pre">name</span></code> and
<code class="docutils literal notranslate"><span class="pre">doc</span></code> arguments, third-party Python extension modules are likely to supply
these arguments from static constants. The <code class="docutils literal notranslate"><span class="pre">types</span></code> and <code class="docutils literal notranslate"><span class="pre">data</span></code> arguments are
now const-correct: they are declared as <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*types</span></code> and
<code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*const</span> <span class="pre">*data</span></code>, respectively. C code should not be affected, but C++
code may be.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23847">gh-23847</a>)</p>
</section>
<section id="larger-npy-maxdims-and-npy-maxargs-npy-ravel-axis-introduced">
<h3>Larger <code class="docutils literal notranslate"><span class="pre">NPY_MAXDIMS</span></code> and <code class="docutils literal notranslate"><span class="pre">NPY_MAXARGS</span></code>, <code class="docutils literal notranslate"><span class="pre">NPY_RAVEL_AXIS</span></code> introduced<a class="headerlink" href="#larger-npy-maxdims-and-npy-maxargs-npy-ravel-axis-introduced" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">NPY_MAXDIMS</span></code> is now 64, you may want to review its use.  This is usually
used in a stack allocation, where the increase should be safe.
However, we do encourage generally to remove any use of <code class="docutils literal notranslate"><span class="pre">NPY_MAXDIMS</span></code> and
<code class="docutils literal notranslate"><span class="pre">NPY_MAXARGS</span></code> to eventually allow removing the constraint completely.
For the conversion helper and C-API functions mirroring Python ones such as
<code class="docutils literal notranslate"><span class="pre">take</span></code>, <code class="docutils literal notranslate"><span class="pre">NPY_MAXDIMS</span></code> was used to mean <code class="docutils literal notranslate"><span class="pre">axis=None</span></code>. Such usage must be
replaced with <code class="docutils literal notranslate"><span class="pre">NPY_RAVEL_AXIS</span></code>. See also <a class="reference internal" href="../numpy_2_0_migration_guide.html#migration-maxdims"><span class="std std-ref">Increased maximum number of dimensions</span></a>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25149">gh-25149</a>)</p>
</section>
<section id="npy-maxargs-not-constant-and-pyarraymultiiterobject-size-change">
<h3><code class="docutils literal notranslate"><span class="pre">NPY_MAXARGS</span></code> not constant and <code class="docutils literal notranslate"><span class="pre">PyArrayMultiIterObject</span></code> size change<a class="headerlink" href="#npy-maxargs-not-constant-and-pyarraymultiiterobject-size-change" title="Link to this heading">#</a></h3>
<p>Since <code class="docutils literal notranslate"><span class="pre">NPY_MAXARGS</span></code> was increased, it is now a runtime constant and not
compile-time constant anymore.
We expect almost no users to notice this.  But if used for stack allocations
it now must be replaced with a custom constant using <code class="docutils literal notranslate"><span class="pre">NPY_MAXARGS</span></code> as an
additional runtime check.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">sizeof(PyArrayMultiIterObject)</span></code> no longer includes the full size
of the object.  We expect nobody to notice this change.  It was necessary
to avoid issues with Cython.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25271">gh-25271</a>)</p>
</section>
<section id="required-changes-for-custom-legacy-user-dtypes">
<h3>Required changes for custom legacy user dtypes<a class="headerlink" href="#required-changes-for-custom-legacy-user-dtypes" title="Link to this heading">#</a></h3>
<p>In order to improve our DTypes it is unfortunately necessary
to break the ABI, which requires some changes for dtypes registered
with <code class="docutils literal notranslate"><span class="pre">PyArray_RegisterDataType</span></code>.
Please see the documentation of <code class="docutils literal notranslate"><span class="pre">PyArray_RegisterDataType</span></code> for how
to adapt your code and achieve compatibility with both 1.x and 2.x.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25792">gh-25792</a>)</p>
</section>
<section id="new-public-dtype-api">
<h3>New Public DType API<a class="headerlink" href="#new-public-dtype-api" title="Link to this heading">#</a></h3>
<p>The C implementation of the NEP 42 DType API is now public. While the DType API
has shipped in NumPy for a few versions, it was only usable in sessions with a
special environment variable set. It is now possible to write custom DTypes
outside of NumPy using the new DType API and the normal <code class="docutils literal notranslate"><span class="pre">import_array()</span></code>
mechanism for importing the numpy C API.</p>
<p>See <a class="reference internal" href="../reference/c-api/array.html#dtype-api"><span class="std std-ref">Custom Data Types</span></a> for more details about the API. As always with a new
feature, please report any bugs you run into implementing or using a new
DType. It is likely that downstream C code that works with dtypes will need to
be updated to work correctly with new DTypes.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25754">gh-25754</a>)</p>
</section>
<section id="new-c-api-import-functions">
<h3>New C-API import functions<a class="headerlink" href="#new-c-api-import-functions" title="Link to this heading">#</a></h3>
<p>We have now added <code class="docutils literal notranslate"><span class="pre">PyArray_ImportNumPyAPI</span></code> and <code class="docutils literal notranslate"><span class="pre">PyUFunc_ImportUFuncAPI</span></code>
as static inline functions to import the NumPy C-API tables.
The new functions have two advantages over <code class="docutils literal notranslate"><span class="pre">import_array</span></code> and
<code class="docutils literal notranslate"><span class="pre">import_ufunc</span></code>:</p>
<ul class="simple">
<li><p>They check whether the import was already performed and are light-weight
if not, allowing to add them judiciously (although this is not preferable
in most cases).</p></li>
<li><p>The old mechanisms were macros rather than functions which included a
<code class="docutils literal notranslate"><span class="pre">return</span></code> statement.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">PyArray_ImportNumPyAPI()</span></code> function is included in <code class="docutils literal notranslate"><span class="pre">npy_2_compat.h</span></code>
for simpler backporting.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25866">gh-25866</a>)</p>
</section>
<section id="structured-dtype-information-access-through-functions">
<h3>Structured dtype information access through functions<a class="headerlink" href="#structured-dtype-information-access-through-functions" title="Link to this heading">#</a></h3>
<p>The dtype structures fields <code class="docutils literal notranslate"><span class="pre">c_metadata</span></code>, <code class="docutils literal notranslate"><span class="pre">names</span></code>,
<code class="docutils literal notranslate"><span class="pre">fields</span></code>, and <code class="docutils literal notranslate"><span class="pre">subarray</span></code> must now be accessed through new
functions following the same names, such as <code class="docutils literal notranslate"><span class="pre">PyDataType_NAMES</span></code>.
Direct access of the fields is not valid as they do not exist for
all <code class="docutils literal notranslate"><span class="pre">PyArray_Descr</span></code> instances.
The <code class="docutils literal notranslate"><span class="pre">metadata</span></code> field is kept, but the macro version should also be preferred.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25802">gh-25802</a>)</p>
</section>
<section id="descriptor-elsize-and-alignment-access">
<h3>Descriptor <code class="docutils literal notranslate"><span class="pre">elsize</span></code> and <code class="docutils literal notranslate"><span class="pre">alignment</span></code> access<a class="headerlink" href="#descriptor-elsize-and-alignment-access" title="Link to this heading">#</a></h3>
<p>Unless compiling only with NumPy 2 support, the <code class="docutils literal notranslate"><span class="pre">elsize</span></code> and <code class="docutils literal notranslate"><span class="pre">alignment</span></code>
fields must now be accessed via <code class="docutils literal notranslate"><span class="pre">PyDataType_ELSIZE</span></code>,
<code class="docutils literal notranslate"><span class="pre">PyDataType_SET_ELSIZE</span></code>, and <code class="docutils literal notranslate"><span class="pre">PyDataType_ALIGNMENT</span></code>.
In cases where the descriptor is attached to an array, we advise
using <code class="docutils literal notranslate"><span class="pre">PyArray_ITEMSIZE</span></code> as it exists on all NumPy versions.
Please see <a class="reference internal" href="../numpy_2_0_migration_guide.html#migration-c-descr"><span class="std std-ref">The PyArray_Descr struct has been changed</span></a> for more information.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25943">gh-25943</a>)</p>
</section>
</section>
<section id="numpy-2-0-c-api-removals">
<h2>NumPy 2.0 C API removals<a class="headerlink" href="#numpy-2-0-c-api-removals" title="Link to this heading">#</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">npy_interrupt.h</span></code> and the corresponding macros like <code class="docutils literal notranslate"><span class="pre">NPY_SIGINT_ON</span></code>
have been removed.  We recommend querying <code class="docutils literal notranslate"><span class="pre">PyErr_CheckSignals()</span></code> or
<code class="docutils literal notranslate"><span class="pre">PyOS_InterruptOccurred()</span></code> periodically (these do currently require
holding the GIL though).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">noprefix.h</span></code> header has been removed. Replace missing symbols with
their prefixed counterparts (usually an added <code class="docutils literal notranslate"><span class="pre">NPY_</span></code> or <code class="docutils literal notranslate"><span class="pre">npy_</span></code>).</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23919">gh-23919</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyUFunc_GetPyVals</span></code>, <code class="docutils literal notranslate"><span class="pre">PyUFunc_handlefperr</span></code>, and <code class="docutils literal notranslate"><span class="pre">PyUFunc_checkfperr</span></code>
have been removed.
If needed, a new backwards compatible function to raise floating point errors
could be restored. Reason for removal: there are no known users and the
functions would have made <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">np.errstate()</span></code> fixes much more difficult).</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23922">gh-23922</a>)</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">numpy/old_defines.h</span></code> which was part of the API deprecated since NumPy 1.7
has been removed.  This removes macros of the form <code class="docutils literal notranslate"><span class="pre">PyArray_CONSTANT</span></code>.
The <a class="reference external" href="https://github.com/numpy/numpy/blob/main/tools/replace_old_macros.sed">replace_old_macros.sed</a>
script may be useful to convert them to the <code class="docutils literal notranslate"><span class="pre">NPY_CONSTANT</span></code> version.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24011">gh-24011</a>)</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">legacy_inner_loop_selector</span></code> member of the ufunc struct is removed
to simplify improvements to the dispatching system.
There are no known users overriding or directly accessing this member.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24271">gh-24271</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">NPY_INTPLTR</span></code> has been removed to avoid confusion (see <code class="docutils literal notranslate"><span class="pre">intp</span></code>
redefinition).</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24888">gh-24888</a>)</p>
</li>
<li><p>The advanced indexing <code class="docutils literal notranslate"><span class="pre">MapIter</span></code> and related API has been removed.
The (truly) public part of it was not well tested and had only one
known user (Theano).  Making it private will simplify improvements
to speed up <code class="docutils literal notranslate"><span class="pre">ufunc.at</span></code>, make advanced indexing more maintainable,
and was important for increasing the maximum number of dimensions of arrays
to 64. Please let us know if this API is important to you so we can find a
solution together.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25138">gh-25138</a>)</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">NPY_MAX_ELSIZE</span></code> macro has been removed, as it only ever reflected
builtin numeric types and served no internal purpose.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25149">gh-25149</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArray_REFCNT</span></code> and <code class="docutils literal notranslate"><span class="pre">NPY_REFCOUNT</span></code> are removed. Use <code class="docutils literal notranslate"><span class="pre">Py_REFCNT</span></code> instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25156">gh-25156</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArrayFlags_Type</span></code> and <code class="docutils literal notranslate"><span class="pre">PyArray_NewFlagsObject</span></code> as well as
<code class="docutils literal notranslate"><span class="pre">PyArrayFlagsObject</span></code> are private now.
There is no known use-case; use the Python API if needed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArray_MoveInto</span></code>, <code class="docutils literal notranslate"><span class="pre">PyArray_CastTo</span></code>, <code class="docutils literal notranslate"><span class="pre">PyArray_CastAnyTo</span></code> are removed
use <code class="docutils literal notranslate"><span class="pre">PyArray_CopyInto</span></code> and if absolutely needed <code class="docutils literal notranslate"><span class="pre">PyArray_CopyAnyInto</span></code>
(the latter does a flat copy).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArray_FillObjectArray</span></code> is removed, its only true use was for
implementing <code class="docutils literal notranslate"><span class="pre">np.empty</span></code>.  Create a new empty array or use
<code class="docutils literal notranslate"><span class="pre">PyArray_FillWithScalar()</span></code> (decrefs existing objects).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArray_CompareUCS4</span></code> and <code class="docutils literal notranslate"><span class="pre">PyArray_CompareString</span></code> are removed.
Use the standard C string comparison functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArray_ISPYTHON</span></code> is removed as it is misleading, has no known
use-cases, and is easy to replace.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArray_FieldNames</span></code> is removed, as it is unclear what it would
be useful for.  It also has incorrect semantics in some possible
use-cases.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArray_TypestrConvert</span></code> is removed, since it seems a misnomer and unlikely
to be used by anyone.  If you know the size or are limited to few types, just
use it explicitly, otherwise go via Python strings.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25292">gh-25292</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyDataType_GetDatetimeMetaData</span></code> is removed, it did not actually
do anything since at least NumPy 1.7.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25802">gh-25802</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArray_GetCastFunc</span></code> is removed. Note that custom legacy user dtypes
can still provide a castfunc as their implementation, but any access to them
is now removed.  The reason for this is that NumPy never used these
internally for many years.  If you use simple numeric types, please just use
C casts directly.  In case you require an alternative, please let us know so
we can create new API such as <code class="docutils literal notranslate"><span class="pre">PyArray_CastBuffer()</span></code> which could use old or
new cast functions depending on the NumPy version.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25161">gh-25161</a>)</p>
</li>
</ul>
</section>
<section id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Link to this heading">#</a></h2>
<section id="np-add-was-extended-to-work-with-unicode-and-bytes-dtypes">
<h3><code class="docutils literal notranslate"><span class="pre">np.add</span></code> was extended to work with <code class="docutils literal notranslate"><span class="pre">unicode</span></code> and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> dtypes.<a class="headerlink" href="#np-add-was-extended-to-work-with-unicode-and-bytes-dtypes" title="Link to this heading">#</a></h3>
<blockquote>
<div><p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24858">gh-24858</a>)</p>
</div></blockquote>
</section>
<section id="a-new-bitwise-count-function">
<h3>A new <code class="docutils literal notranslate"><span class="pre">bitwise_count</span></code> function<a class="headerlink" href="#a-new-bitwise-count-function" title="Link to this heading">#</a></h3>
<p>This new function counts the number of 1-bits in a number.
<a class="reference internal" href="../reference/generated/numpy.bitwise_count.html#numpy.bitwise_count" title="numpy.bitwise_count"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bitwise_count</span></code></a> works on all the numpy integer types and
integer-like objects.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="o">**</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">bitwise_count</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15],</span>
<span class="go">      dtype=uint8)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/19355">gh-19355</a>)</p>
</section>
<section id="macos-accelerate-support-including-the-ilp64">
<h3>macOS Accelerate support, including the ILP64<a class="headerlink" href="#macos-accelerate-support-including-the-ilp64" title="Link to this heading">#</a></h3>
<p>Support for the updated Accelerate BLAS/LAPACK library, including ILP64 (64-bit
integer) support, in macOS 13.3 has been added. This brings arm64 support, and
significant performance improvements of up to 10x for commonly used linear
algebra operations. When Accelerate is selected at build time, or if no
explicit BLAS library selection is done, the 13.3+ version will automatically
be used if available.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24053">gh-24053</a>)</p>
<p>Binary wheels are also available. On macOS &gt;=14.0, users who install NumPy from
PyPI will get wheels built against Accelerate rather than OpenBLAS.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25255">gh-25255</a>)</p>
</section>
<section id="option-to-use-weights-for-quantile-and-percentile-functions">
<h3>Option to use weights for quantile and percentile functions<a class="headerlink" href="#option-to-use-weights-for-quantile-and-percentile-functions" title="Link to this heading">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">weights</span></code> keyword is now available for <a class="reference internal" href="../reference/generated/numpy.quantile.html#numpy.quantile" title="numpy.quantile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">quantile</span></code></a>,
<a class="reference internal" href="../reference/generated/numpy.percentile.html#numpy.percentile" title="numpy.percentile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">percentile</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.nanquantile.html#numpy.nanquantile" title="numpy.nanquantile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanquantile</span></code></a> and <a class="reference internal" href="../reference/generated/numpy.nanpercentile.html#numpy.nanpercentile" title="numpy.nanpercentile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanpercentile</span></code></a>. Only
<code class="docutils literal notranslate"><span class="pre">method=&quot;inverted_cdf&quot;</span></code> supports weights.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24254">gh-24254</a>)</p>
</section>
<section id="improved-cpu-optimization-tracking">
<h3>Improved CPU optimization tracking<a class="headerlink" href="#improved-cpu-optimization-tracking" title="Link to this heading">#</a></h3>
<p>A new tracer mechanism is available which enables tracking of the enabled
targets for each optimized function (i.e., that uses hardware-specific SIMD
instructions) in the NumPy library. With this enhancement, it becomes possible
to precisely monitor the enabled CPU dispatch targets for the dispatched
functions.</p>
<p>A new function named <code class="docutils literal notranslate"><span class="pre">opt_func_info</span></code> has been added to the new namespace
<a class="reference internal" href="../reference/generated/numpy.lib.introspect.html#module-numpy.lib.introspect" title="numpy.lib.introspect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.lib.introspect</span></code></a>, offering this tracing capability. This function allows
you to retrieve information about the enabled targets based on function names
and data type signatures.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24420">gh-24420</a>)</p>
</section>
<section id="a-new-meson-backend-for-f2py">
<h3>A new Meson backend for <code class="docutils literal notranslate"><span class="pre">f2py</span></code><a class="headerlink" href="#a-new-meson-backend-for-f2py" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">f2py</span></code> in compile mode (i.e. <code class="docutils literal notranslate"><span class="pre">f2py</span> <span class="pre">-c</span></code>) now accepts the <code class="docutils literal notranslate"><span class="pre">--backend</span> <span class="pre">meson</span></code>
option. This is the default option for Python &gt;=3.12. For older Python versions,
<code class="docutils literal notranslate"><span class="pre">f2py</span></code> will still default to <code class="docutils literal notranslate"><span class="pre">--backend</span> <span class="pre">distutils</span></code>.</p>
<p>To support this in realistic use-cases, in compile mode <code class="docutils literal notranslate"><span class="pre">f2py</span></code> takes a
<code class="docutils literal notranslate"><span class="pre">--dep</span></code> flag one or many times which maps to <code class="docutils literal notranslate"><span class="pre">dependency()</span></code> calls in the
<code class="docutils literal notranslate"><span class="pre">meson</span></code> backend, and does nothing in the <code class="docutils literal notranslate"><span class="pre">distutils</span></code> backend.</p>
<p>There are no changes for users of <code class="docutils literal notranslate"><span class="pre">f2py</span></code> only as a code generator, i.e. without <code class="docutils literal notranslate"><span class="pre">-c</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24532">gh-24532</a>)</p>
</section>
<section id="bind-c-support-for-f2py">
<h3><code class="docutils literal notranslate"><span class="pre">bind(c)</span></code> support for <code class="docutils literal notranslate"><span class="pre">f2py</span></code><a class="headerlink" href="#bind-c-support-for-f2py" title="Link to this heading">#</a></h3>
<p>Both functions and subroutines can be annotated with <code class="docutils literal notranslate"><span class="pre">bind(c)</span></code>. <code class="docutils literal notranslate"><span class="pre">f2py</span></code> will
handle both the correct type mapping, and preserve the unique label for other
C interfaces.</p>
<p><strong>Note:</strong> <code class="docutils literal notranslate"><span class="pre">bind(c,</span> <span class="pre">name</span> <span class="pre">=</span> <span class="pre">'routine_name_other_than_fortran_routine')</span></code> is not
honored by the <code class="docutils literal notranslate"><span class="pre">f2py</span></code> bindings by design, since <code class="docutils literal notranslate"><span class="pre">bind(c)</span></code> with the <code class="docutils literal notranslate"><span class="pre">name</span></code>
is meant to guarantee only the same name in C and Fortran, not in Python and
Fortran.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24555">gh-24555</a>)</p>
</section>
<section id="a-new-strict-option-for-several-testing-functions">
<h3>A new <code class="docutils literal notranslate"><span class="pre">strict</span></code> option for several testing functions<a class="headerlink" href="#a-new-strict-option-for-several-testing-functions" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">strict</span></code> keyword is now available for <a class="reference internal" href="../reference/generated/numpy.testing.assert_allclose.html#numpy.testing.assert_allclose" title="numpy.testing.assert_allclose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assert_allclose</span></code></a>,
<a class="reference internal" href="../reference/generated/numpy.testing.assert_equal.html#numpy.testing.assert_equal" title="numpy.testing.assert_equal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assert_equal</span></code></a>, and <a class="reference internal" href="../reference/generated/numpy.testing.assert_array_less.html#numpy.testing.assert_array_less" title="numpy.testing.assert_array_less"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assert_array_less</span></code></a>.
Setting <code class="docutils literal notranslate"><span class="pre">strict=True</span></code> will disable the broadcasting behaviour for scalars
and ensure that input arrays have the same data type.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24680">gh-24680</a>,
<a class="reference external" href="https://github.com/numpy/numpy/pull/24770">gh-24770</a>,
<a class="reference external" href="https://github.com/numpy/numpy/pull/24775">gh-24775</a>)</p>
</section>
<section id="add-np-core-umath-find-and-np-core-umath-rfind-ufuncs">
<h3>Add <code class="docutils literal notranslate"><span class="pre">np.core.umath.find</span></code> and <code class="docutils literal notranslate"><span class="pre">np.core.umath.rfind</span></code> UFuncs<a class="headerlink" href="#add-np-core-umath-find-and-np-core-umath-rfind-ufuncs" title="Link to this heading">#</a></h3>
<p>Add two <code class="docutils literal notranslate"><span class="pre">find</span></code> and <code class="docutils literal notranslate"><span class="pre">rfind</span></code> UFuncs that operate on unicode or byte strings
and are used in <code class="docutils literal notranslate"><span class="pre">np.char</span></code>. They operate similar to <code class="docutils literal notranslate"><span class="pre">str.find</span></code> and
<code class="docutils literal notranslate"><span class="pre">str.rfind</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24868">gh-24868</a>)</p>
</section>
<section id="diagonal-and-trace-for-numpy-linalg">
<h3><code class="docutils literal notranslate"><span class="pre">diagonal</span></code> and <code class="docutils literal notranslate"><span class="pre">trace</span></code> for <code class="docutils literal notranslate"><span class="pre">numpy.linalg</span></code><a class="headerlink" href="#diagonal-and-trace-for-numpy-linalg" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/generated/numpy.linalg.diagonal.html#numpy.linalg.diagonal" title="numpy.linalg.diagonal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.diagonal</span></code></a> and <a class="reference internal" href="../reference/generated/numpy.linalg.trace.html#numpy.linalg.trace" title="numpy.linalg.trace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.trace</span></code></a> have been
added, which are array API standard-compatible variants of <a class="reference internal" href="../reference/generated/numpy.diagonal.html#numpy.diagonal" title="numpy.diagonal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.diagonal</span></code></a> and
<a class="reference internal" href="../reference/generated/numpy.trace.html#numpy.trace" title="numpy.trace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.trace</span></code></a>. They differ in the default axis selection which define 2-D
sub-arrays.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24887">gh-24887</a>)</p>
</section>
<section id="new-long-and-ulong-dtypes">
<h3>New <code class="docutils literal notranslate"><span class="pre">long</span></code> and <code class="docutils literal notranslate"><span class="pre">ulong</span></code> dtypes<a class="headerlink" href="#new-long-and-ulong-dtypes" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/arrays.scalars.html#numpy.long" title="numpy.long"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.long</span></code></a> and <a class="reference internal" href="../reference/arrays.scalars.html#numpy.ulong" title="numpy.ulong"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ulong</span></code></a> have been added as NumPy integers mapping
to C’s <code class="docutils literal notranslate"><span class="pre">long</span></code> and <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span></code>. Prior to NumPy 1.24, <code class="docutils literal notranslate"><span class="pre">numpy.long</span></code> was
an alias to Python’s <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24922">gh-24922</a>)</p>
</section>
<section id="svdvals-for-numpy-linalg">
<h3><code class="docutils literal notranslate"><span class="pre">svdvals</span></code> for <code class="docutils literal notranslate"><span class="pre">numpy.linalg</span></code><a class="headerlink" href="#svdvals-for-numpy-linalg" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/generated/numpy.linalg.svdvals.html#numpy.linalg.svdvals" title="numpy.linalg.svdvals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.svdvals</span></code></a> has been added. It computes singular values for
(a stack of) matrices. Executing <code class="docutils literal notranslate"><span class="pre">np.svdvals(x)</span></code> is the same as calling
<code class="docutils literal notranslate"><span class="pre">np.svd(x,</span> <span class="pre">compute_uv=False,</span> <span class="pre">hermitian=False)</span></code>.
This function is compatible with the array API standard.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24940">gh-24940</a>)</p>
</section>
<section id="a-new-isdtype-function">
<h3>A new <code class="docutils literal notranslate"><span class="pre">isdtype</span></code> function<a class="headerlink" href="#a-new-isdtype-function" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/generated/numpy.isdtype.html#numpy.isdtype" title="numpy.isdtype"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.isdtype</span></code></a> was added to provide a canonical way to classify NumPy’s dtypes
in compliance with the array API standard.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25054">gh-25054</a>)</p>
</section>
<section id="a-new-astype-function">
<h3>A new <code class="docutils literal notranslate"><span class="pre">astype</span></code> function<a class="headerlink" href="#a-new-astype-function" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/generated/numpy.astype.html#numpy.astype" title="numpy.astype"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.astype</span></code></a> was added to provide an array API standard-compatible
alternative to the <a class="reference internal" href="../reference/generated/numpy.ndarray.astype.html#numpy.ndarray.astype" title="numpy.ndarray.astype"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray.astype</span></code></a> method.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25079">gh-25079</a>)</p>
</section>
<section id="array-api-compatible-functions-aliases">
<h3>Array API compatible functions’ aliases<a class="headerlink" href="#array-api-compatible-functions-aliases" title="Link to this heading">#</a></h3>
<p>13 aliases for existing functions were added to improve compatibility with the array API standard:</p>
<ul class="simple">
<li><p>Trigonometry: <code class="docutils literal notranslate"><span class="pre">acos</span></code>, <code class="docutils literal notranslate"><span class="pre">acosh</span></code>, <code class="docutils literal notranslate"><span class="pre">asin</span></code>, <code class="docutils literal notranslate"><span class="pre">asinh</span></code>, <code class="docutils literal notranslate"><span class="pre">atan</span></code>, <code class="docutils literal notranslate"><span class="pre">atanh</span></code>, <code class="docutils literal notranslate"><span class="pre">atan2</span></code>.</p></li>
<li><p>Bitwise: <code class="docutils literal notranslate"><span class="pre">bitwise_left_shift</span></code>, <code class="docutils literal notranslate"><span class="pre">bitwise_invert</span></code>, <code class="docutils literal notranslate"><span class="pre">bitwise_right_shift</span></code>.</p></li>
<li><p>Misc: <code class="docutils literal notranslate"><span class="pre">concat</span></code>, <code class="docutils literal notranslate"><span class="pre">permute_dims</span></code>, <code class="docutils literal notranslate"><span class="pre">pow</span></code>.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">numpy.linalg</span></code>: <code class="docutils literal notranslate"><span class="pre">tensordot</span></code>, <code class="docutils literal notranslate"><span class="pre">matmul</span></code>.</p></li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25086">gh-25086</a>)</p>
</section>
<section id="new-unique-functions">
<h3>New <code class="docutils literal notranslate"><span class="pre">unique_*</span></code> functions<a class="headerlink" href="#new-unique-functions" title="Link to this heading">#</a></h3>
<p>The <a class="reference internal" href="../reference/generated/numpy.unique_all.html#numpy.unique_all" title="numpy.unique_all"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unique_all</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.unique_counts.html#numpy.unique_counts" title="numpy.unique_counts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unique_counts</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.unique_inverse.html#numpy.unique_inverse" title="numpy.unique_inverse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unique_inverse</span></code></a>,
and <a class="reference internal" href="../reference/generated/numpy.unique_values.html#numpy.unique_values" title="numpy.unique_values"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unique_values</span></code></a> functions have been added. They provide
functionality of <a class="reference internal" href="../reference/generated/numpy.unique.html#numpy.unique" title="numpy.unique"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unique</span></code></a> with different sets of flags. They are array API
standard-compatible, and because the number of arrays they return does not
depend on the values of input arguments, they are easier to target for JIT
compilation.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25088">gh-25088</a>)</p>
</section>
<section id="matrix-transpose-support-for-ndarrays">
<h3>Matrix transpose support for ndarrays<a class="headerlink" href="#matrix-transpose-support-for-ndarrays" title="Link to this heading">#</a></h3>
<p>NumPy now offers support for calculating the matrix transpose of an array (or
stack of arrays). The matrix transpose is equivalent to swapping the last two
axes of an array. Both <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> and <code class="docutils literal notranslate"><span class="pre">np.ma.MaskedArray</span></code> now expose a
<code class="docutils literal notranslate"><span class="pre">.mT</span></code> attribute, and there is a matching new <a class="reference internal" href="../reference/generated/numpy.matrix_transpose.html#numpy.matrix_transpose" title="numpy.matrix_transpose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.matrix_transpose</span></code></a>
function.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23762">gh-23762</a>)</p>
</section>
<section id="array-api-compatible-functions-for-numpy-linalg">
<h3>Array API compatible functions for <code class="docutils literal notranslate"><span class="pre">numpy.linalg</span></code><a class="headerlink" href="#array-api-compatible-functions-for-numpy-linalg" title="Link to this heading">#</a></h3>
<p>Six new functions and two aliases were added to improve compatibility with
the Array API standard for <a class="reference internal" href="../reference/routines.linalg.html#module-numpy.linalg" title="numpy.linalg"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg</span></code></a>:</p>
<ul>
<li><p><a class="reference internal" href="../reference/generated/numpy.linalg.matrix_norm.html#numpy.linalg.matrix_norm" title="numpy.linalg.matrix_norm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.matrix_norm</span></code></a> - Computes the matrix norm of a matrix (or a stack of matrices).</p></li>
<li><p><a class="reference internal" href="../reference/generated/numpy.linalg.vector_norm.html#numpy.linalg.vector_norm" title="numpy.linalg.vector_norm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.vector_norm</span></code></a> - Computes the vector norm of a vector (or batch of vectors).</p></li>
<li><p><a class="reference internal" href="../reference/generated/numpy.vecdot.html#numpy.vecdot" title="numpy.vecdot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.vecdot</span></code></a> - Computes the (vector) dot product of two arrays.</p></li>
<li><p><a class="reference internal" href="../reference/generated/numpy.linalg.vecdot.html#numpy.linalg.vecdot" title="numpy.linalg.vecdot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.vecdot</span></code></a> - An alias for <a class="reference internal" href="../reference/generated/numpy.vecdot.html#numpy.vecdot" title="numpy.vecdot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.vecdot</span></code></a>.</p></li>
<li><p><a class="reference internal" href="../reference/generated/numpy.linalg.matrix_transpose.html#numpy.linalg.matrix_transpose" title="numpy.linalg.matrix_transpose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.matrix_transpose</span></code></a> - An alias for <a class="reference internal" href="../reference/generated/numpy.matrix_transpose.html#numpy.matrix_transpose" title="numpy.matrix_transpose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.matrix_transpose</span></code></a>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25155">gh-25155</a>)</p>
</li>
<li><p><a class="reference internal" href="../reference/generated/numpy.linalg.outer.html#numpy.linalg.outer" title="numpy.linalg.outer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.outer</span></code></a> has been added. It computes the outer product of two
vectors. It differs from <a class="reference internal" href="../reference/generated/numpy.outer.html#numpy.outer" title="numpy.outer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.outer</span></code></a> by accepting one-dimensional arrays
only. This function is compatible with the array API standard.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25101">gh-25101</a>)</p>
</li>
<li><p><a class="reference internal" href="../reference/generated/numpy.linalg.cross.html#numpy.linalg.cross" title="numpy.linalg.cross"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.cross</span></code></a> has been added. It computes the cross product of two
(arrays of) 3-dimensional vectors. It differs from <a class="reference internal" href="../reference/generated/numpy.cross.html#numpy.cross" title="numpy.cross"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.cross</span></code></a> by accepting
three-dimensional vectors only. This function is compatible with the array
API standard.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25145">gh-25145</a>)</p>
</li>
</ul>
</section>
<section id="a-correction-argument-for-var-and-std">
<h3>A <code class="docutils literal notranslate"><span class="pre">correction</span></code> argument for <code class="docutils literal notranslate"><span class="pre">var</span></code> and <code class="docutils literal notranslate"><span class="pre">std</span></code><a class="headerlink" href="#a-correction-argument-for-var-and-std" title="Link to this heading">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">correction</span></code> argument was added to <a class="reference internal" href="../reference/generated/numpy.var.html#numpy.var" title="numpy.var"><code class="xref py py-obj docutils literal notranslate"><span class="pre">var</span></code></a> and <a class="reference internal" href="../reference/generated/numpy.std.html#numpy.std" title="numpy.std"><code class="xref py py-obj docutils literal notranslate"><span class="pre">std</span></code></a>, which is
an array API standard compatible alternative to <code class="docutils literal notranslate"><span class="pre">ddof</span></code>. As both arguments
serve a similar purpose, only one of them can be provided at the same time.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25169">gh-25169</a>)</p>
</section>
<section id="ndarray-device-and-ndarray-to-device">
<h3><code class="docutils literal notranslate"><span class="pre">ndarray.device</span></code> and <code class="docutils literal notranslate"><span class="pre">ndarray.to_device</span></code><a class="headerlink" href="#ndarray-device-and-ndarray-to-device" title="Link to this heading">#</a></h3>
<p>An <code class="docutils literal notranslate"><span class="pre">ndarray.device</span></code> attribute and <code class="docutils literal notranslate"><span class="pre">ndarray.to_device</span></code> method were
added to <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> for array API standard compatibility.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">device</span></code> keyword-only arguments were added to:
<a class="reference internal" href="../reference/generated/numpy.asarray.html#numpy.asarray" title="numpy.asarray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asarray</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.arange.html#numpy.arange" title="numpy.arange"><code class="xref py py-obj docutils literal notranslate"><span class="pre">arange</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.empty.html#numpy.empty" title="numpy.empty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">empty</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.empty_like.html#numpy.empty_like" title="numpy.empty_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">empty_like</span></code></a>,
<a class="reference internal" href="../reference/generated/numpy.eye.html#numpy.eye" title="numpy.eye"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eye</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.full.html#numpy.full" title="numpy.full"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.full_like.html#numpy.full_like" title="numpy.full_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_like</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.linspace.html#numpy.linspace" title="numpy.linspace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linspace</span></code></a>,
<a class="reference internal" href="../reference/generated/numpy.ones.html#numpy.ones" title="numpy.ones"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ones</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.ones_like.html#numpy.ones_like" title="numpy.ones_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ones_like</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.zeros.html#numpy.zeros" title="numpy.zeros"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zeros</span></code></a>, and <a class="reference internal" href="../reference/generated/numpy.zeros_like.html#numpy.zeros_like" title="numpy.zeros_like"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zeros_like</span></code></a>.</p>
<p>For all these new arguments, only <code class="docutils literal notranslate"><span class="pre">device=&quot;cpu&quot;</span></code> is supported.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25233">gh-25233</a>)</p>
</section>
<section id="stringdtype-has-been-added-to-numpy">
<h3>StringDType has been added to NumPy<a class="headerlink" href="#stringdtype-has-been-added-to-numpy" title="Link to this heading">#</a></h3>
<p>We have added a new variable-width UTF-8 encoded string data type, implementing
a “NumPy array of Python strings”, including support for a user-provided missing
data sentinel. It is intended as a drop-in replacement for arrays of Python
strings and missing data sentinels using the object dtype. See <a class="reference external" href="https://numpy.org/neps/nep-0055-string_dtype.html">NEP 55</a> and <a class="reference internal" href="../user/basics.strings.html#stringdtype"><span class="std std-ref">the
documentation</span></a> for more details.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25347">gh-25347</a>)</p>
</section>
<section id="new-keywords-for-cholesky-and-pinv">
<h3>New keywords for <code class="docutils literal notranslate"><span class="pre">cholesky</span></code> and <code class="docutils literal notranslate"><span class="pre">pinv</span></code><a class="headerlink" href="#new-keywords-for-cholesky-and-pinv" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">upper</span></code> and <code class="docutils literal notranslate"><span class="pre">rtol</span></code> keywords were added to <a class="reference internal" href="../reference/generated/numpy.linalg.cholesky.html#numpy.linalg.cholesky" title="numpy.linalg.cholesky"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.cholesky</span></code></a> and
<a class="reference internal" href="../reference/generated/numpy.linalg.pinv.html#numpy.linalg.pinv" title="numpy.linalg.pinv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg.pinv</span></code></a>, respectively, to improve array API standard compatibility.</p>
<p>For <a class="reference internal" href="../reference/generated/numpy.linalg.pinv.html#numpy.linalg.pinv" title="numpy.linalg.pinv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pinv</span></code></a>, if neither <code class="docutils literal notranslate"><span class="pre">rcond</span></code> nor <code class="docutils literal notranslate"><span class="pre">rtol</span></code> is specified,
the <code class="docutils literal notranslate"><span class="pre">rcond</span></code>’s default is used. We plan to deprecate and remove <code class="docutils literal notranslate"><span class="pre">rcond</span></code> in
the future.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25388">gh-25388</a>)</p>
</section>
<section id="new-keywords-for-sort-argsort-and-linalg-matrix-rank">
<h3>New keywords for <code class="docutils literal notranslate"><span class="pre">sort</span></code>, <code class="docutils literal notranslate"><span class="pre">argsort</span></code> and <code class="docutils literal notranslate"><span class="pre">linalg.matrix_rank</span></code><a class="headerlink" href="#new-keywords-for-sort-argsort-and-linalg-matrix-rank" title="Link to this heading">#</a></h3>
<p>New keyword parameters were added to improve array API standard compatibility:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rtol</span></code> was added to <a class="reference internal" href="../reference/generated/numpy.linalg.matrix_rank.html#numpy.linalg.matrix_rank" title="numpy.linalg.matrix_rank"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matrix_rank</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stable</span></code> was added to <a class="reference internal" href="../reference/generated/numpy.sort.html#numpy.sort" title="numpy.sort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sort</span></code></a> and <a class="reference internal" href="../reference/generated/numpy.argsort.html#numpy.argsort" title="numpy.argsort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">argsort</span></code></a>.</p></li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25437">gh-25437</a>)</p>
</section>
<section id="new-numpy-strings-namespace-for-string-ufuncs">
<h3>New <code class="docutils literal notranslate"><span class="pre">numpy.strings</span></code> namespace for string ufuncs<a class="headerlink" href="#new-numpy-strings-namespace-for-string-ufuncs" title="Link to this heading">#</a></h3>
<p>NumPy now implements some string operations as ufuncs. The old <code class="docutils literal notranslate"><span class="pre">np.char</span></code>
namespace is still available, and where possible the string manipulation
functions in that namespace have been updated to use the new ufuncs,
substantially improving their performance.</p>
<p>Where possible, we suggest updating code to use functions in <code class="docutils literal notranslate"><span class="pre">np.strings</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">np.char</span></code>. In the future we may deprecate <code class="docutils literal notranslate"><span class="pre">np.char</span></code> in favor of
<code class="docutils literal notranslate"><span class="pre">np.strings</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25463">gh-25463</a>)</p>
</section>
<section id="numpy-fft-support-for-different-precisions-and-in-place-calculations">
<h3><code class="docutils literal notranslate"><span class="pre">numpy.fft</span></code> support for different precisions and in-place calculations<a class="headerlink" href="#numpy-fft-support-for-different-precisions-and-in-place-calculations" title="Link to this heading">#</a></h3>
<p>The various FFT routines in <a class="reference internal" href="../reference/routines.fft.html#module-numpy.fft" title="numpy.fft"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.fft</span></code></a> now do their calculations natively in
float, double, or long double precision, depending on the input precision,
instead of always calculating in double precision. Hence, the calculation will
now be less precise for single and more precise for long double precision.
The data type of the output array will now be adjusted accordingly.</p>
<p>Furthermore, all FFT routines have gained an <code class="docutils literal notranslate"><span class="pre">out</span></code> argument that can be used
for in-place calculations.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25536">gh-25536</a>)</p>
</section>
<section id="configtool-and-pkg-config-support">
<h3>configtool and pkg-config support<a class="headerlink" href="#configtool-and-pkg-config-support" title="Link to this heading">#</a></h3>
<p>A new <code class="docutils literal notranslate"><span class="pre">numpy-config</span></code> CLI script is available that can be queried for the
NumPy version and for compile flags needed to use the NumPy C API. This will
allow build systems to better support the use of NumPy as a dependency.
Also, a <code class="docutils literal notranslate"><span class="pre">numpy.pc</span></code> pkg-config file is now included with Numpy. In order to
find its location for use with <code class="docutils literal notranslate"><span class="pre">PKG_CONFIG_PATH</span></code>, use
<code class="docutils literal notranslate"><span class="pre">numpy-config</span> <span class="pre">--pkgconfigdir</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25730">gh-25730</a>)</p>
</section>
<section id="array-api-standard-support-in-the-main-namespace">
<h3>Array API standard support in the main namespace<a class="headerlink" href="#array-api-standard-support-in-the-main-namespace" title="Link to this heading">#</a></h3>
<p>The main <code class="docutils literal notranslate"><span class="pre">numpy</span></code> namespace now supports the array API standard. See
<a class="reference internal" href="../reference/array_api.html#array-api-standard-compatibility"><span class="std std-ref">Array API standard compatibility</span></a> for details.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25911">gh-25911</a>)</p>
</section>
</section>
<section id="improvements">
<h2>Improvements<a class="headerlink" href="#improvements" title="Link to this heading">#</a></h2>
<section id="strings-are-now-supported-by-any-all-and-the-logical-ufuncs">
<h3>Strings are now supported by <code class="docutils literal notranslate"><span class="pre">any</span></code>, <code class="docutils literal notranslate"><span class="pre">all</span></code>, and the logical ufuncs.<a class="headerlink" href="#strings-are-now-supported-by-any-all-and-the-logical-ufuncs" title="Link to this heading">#</a></h3>
<blockquote>
<div><p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25651">gh-25651</a>)</p>
</div></blockquote>
</section>
<section id="integer-sequences-as-the-shape-argument-for-memmap">
<h3>Integer sequences as the shape argument for <code class="docutils literal notranslate"><span class="pre">memmap</span></code><a class="headerlink" href="#integer-sequences-as-the-shape-argument-for-memmap" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/generated/numpy.memmap.html#numpy.memmap" title="numpy.memmap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.memmap</span></code></a> can now be created with any integer sequence as the <code class="docutils literal notranslate"><span class="pre">shape</span></code>
argument, such as a list or numpy array of integers. Previously, only the
types of tuple and int could be used without raising an error.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23729">gh-23729</a>)</p>
</section>
<section id="errstate-is-now-faster-and-context-safe">
<h3><code class="docutils literal notranslate"><span class="pre">errstate</span></code> is now faster and context safe<a class="headerlink" href="#errstate-is-now-faster-and-context-safe" title="Link to this heading">#</a></h3>
<p>The <a class="reference internal" href="../reference/generated/numpy.errstate.html#numpy.errstate" title="numpy.errstate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.errstate</span></code></a> context manager/decorator is now faster and
safer.  Previously, it was not context safe and had (rare)
issues with thread-safety.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23936">gh-23936</a>)</p>
</section>
<section id="aarch64-quicksort-speed-improved-by-using-highway-s-vqsort">
<h3>AArch64 quicksort speed improved by using Highway’s VQSort<a class="headerlink" href="#aarch64-quicksort-speed-improved-by-using-highway-s-vqsort" title="Link to this heading">#</a></h3>
<p>The first introduction of the Google Highway library, using VQSort on AArch64.
Execution time is improved by up to 16x in some cases, see the PR for benchmark
results. Extensions to other platforms will be done in the future.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24018">gh-24018</a>)</p>
</section>
<section id="complex-types-underlying-c-type-changes">
<h3>Complex types - underlying C type changes<a class="headerlink" href="#complex-types-underlying-c-type-changes" title="Link to this heading">#</a></h3>
<ul>
<li><p>The underlying C types for all of NumPy’s complex types have been changed to
use C99 complex types.</p></li>
<li><p>While this change does not affect the memory layout of complex types, it
changes the API to be used to directly retrieve or write the real or
complex part of the complex number, since direct field access (as in <code class="docutils literal notranslate"><span class="pre">c.real</span></code>
or <code class="docutils literal notranslate"><span class="pre">c.imag</span></code>) is no longer an option. You can now use utilities provided in
<code class="docutils literal notranslate"><span class="pre">numpy/npy_math.h</span></code> to do these operations, like this:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">npy_cdouble</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<span class="n">npy_csetreal</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="n">npy_csetimag</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d + %di</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">npy_creal</span><span class="p">(</span><span class="n">c</span><span class="p">),</span><span class="w"> </span><span class="n">npy_cimag</span><span class="p">(</span><span class="n">c</span><span class="p">));</span>
</pre></div>
</div>
</li>
<li><p>To ease cross-version compatibility, equivalent macros and a compatibility
layer have been added which can be used by downstream packages to continue
to support both NumPy 1.x and 2.x. See <a class="reference internal" href="../reference/c-api/coremath.html#complex-numbers"><span class="std std-ref">Support for complex numbers</span></a> for more info.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy/npy_common.h</span></code> now includes <code class="docutils literal notranslate"><span class="pre">complex.h</span></code>, which means that <code class="docutils literal notranslate"><span class="pre">complex</span></code>
is now a reserved keyword.</p></li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24085">gh-24085</a>)</p>
</section>
<section id="iso-c-binding-support-and-improved-common-blocks-for-f2py">
<h3><code class="docutils literal notranslate"><span class="pre">iso_c_binding</span></code> support and improved common blocks for <code class="docutils literal notranslate"><span class="pre">f2py</span></code><a class="headerlink" href="#iso-c-binding-support-and-improved-common-blocks-for-f2py" title="Link to this heading">#</a></h3>
<p>Previously, users would have to define their own custom <code class="docutils literal notranslate"><span class="pre">f2cmap</span></code> file to use
type mappings defined by the Fortran2003 <code class="docutils literal notranslate"><span class="pre">iso_c_binding</span></code> intrinsic module.
These type maps are now natively supported by <code class="docutils literal notranslate"><span class="pre">f2py</span></code></p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24555">gh-24555</a>)</p>
<p><code class="docutils literal notranslate"><span class="pre">f2py</span></code> now handles <code class="docutils literal notranslate"><span class="pre">common</span></code> blocks which have <code class="docutils literal notranslate"><span class="pre">kind</span></code> specifications from
modules. This further expands the usability of intrinsics like
<code class="docutils literal notranslate"><span class="pre">iso_fortran_env</span></code> and <code class="docutils literal notranslate"><span class="pre">iso_c_binding</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25186">gh-25186</a>)</p>
</section>
<section id="call-str-automatically-on-third-argument-to-functions-like-assert-equal">
<h3>Call <code class="docutils literal notranslate"><span class="pre">str</span></code> automatically on third argument to functions like <code class="docutils literal notranslate"><span class="pre">assert_equal</span></code><a class="headerlink" href="#call-str-automatically-on-third-argument-to-functions-like-assert-equal" title="Link to this heading">#</a></h3>
<p>The third argument to functions like <a class="reference internal" href="../reference/generated/numpy.testing.assert_equal.html#numpy.testing.assert_equal" title="numpy.testing.assert_equal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">assert_equal</span></code></a> now has
<code class="docutils literal notranslate"><span class="pre">str</span></code> called on it automatically. This way it mimics the built-in <code class="docutils literal notranslate"><span class="pre">assert</span></code>
statement, where <code class="docutils literal notranslate"><span class="pre">assert_equal(a,</span> <span class="pre">b,</span> <span class="pre">obj)</span></code> works like <code class="docutils literal notranslate"><span class="pre">assert</span> <span class="pre">a</span> <span class="pre">==</span> <span class="pre">b,</span> <span class="pre">obj</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24877">gh-24877</a>)</p>
</section>
<section id="support-for-array-like-atol-rtol-in-isclose-allclose">
<h3>Support for array-like <code class="docutils literal notranslate"><span class="pre">atol</span></code>/<code class="docutils literal notranslate"><span class="pre">rtol</span></code> in <code class="docutils literal notranslate"><span class="pre">isclose</span></code>, <code class="docutils literal notranslate"><span class="pre">allclose</span></code><a class="headerlink" href="#support-for-array-like-atol-rtol-in-isclose-allclose" title="Link to this heading">#</a></h3>
<p>The keywords <code class="docutils literal notranslate"><span class="pre">atol</span></code> and <code class="docutils literal notranslate"><span class="pre">rtol</span></code> in <a class="reference internal" href="../reference/generated/numpy.isclose.html#numpy.isclose" title="numpy.isclose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isclose</span></code></a> and <a class="reference internal" href="../reference/generated/numpy.allclose.html#numpy.allclose" title="numpy.allclose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">allclose</span></code></a>
now accept both scalars and arrays. An array, if given, must broadcast
to the shapes of the first two array arguments.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24878">gh-24878</a>)</p>
</section>
<section id="consistent-failure-messages-in-test-functions">
<h3>Consistent failure messages in test functions<a class="headerlink" href="#consistent-failure-messages-in-test-functions" title="Link to this heading">#</a></h3>
<p>Previously, some <a class="reference internal" href="../reference/routines.testing.html#module-numpy.testing" title="numpy.testing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.testing</span></code></a> assertions printed messages that
referred to the actual and desired results as <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>.
Now, these values are consistently referred to as <code class="docutils literal notranslate"><span class="pre">ACTUAL</span></code> and
<code class="docutils literal notranslate"><span class="pre">DESIRED</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24931">gh-24931</a>)</p>
</section>
<section id="n-d-fft-transforms-allow-s-i-1">
<h3>n-D FFT transforms allow <code class="docutils literal notranslate"><span class="pre">s[i]</span> <span class="pre">==</span> <span class="pre">-1</span></code><a class="headerlink" href="#n-d-fft-transforms-allow-s-i-1" title="Link to this heading">#</a></h3>
<p>The <a class="reference internal" href="../reference/generated/numpy.fft.fftn.html#numpy.fft.fftn" title="numpy.fft.fftn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fftn</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.fft.ifftn.html#numpy.fft.ifftn" title="numpy.fft.ifftn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ifftn</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.fft.rfftn.html#numpy.fft.rfftn" title="numpy.fft.rfftn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rfftn</span></code></a>,
<a class="reference internal" href="../reference/generated/numpy.fft.irfftn.html#numpy.fft.irfftn" title="numpy.fft.irfftn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">irfftn</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.fft.fft2.html#numpy.fft.fft2" title="numpy.fft.fft2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fft2</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.fft.ifft2.html#numpy.fft.ifft2" title="numpy.fft.ifft2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ifft2</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.fft.rfft2.html#numpy.fft.rfft2" title="numpy.fft.rfft2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rfft2</span></code></a>
and <a class="reference internal" href="../reference/generated/numpy.fft.irfft2.html#numpy.fft.irfft2" title="numpy.fft.irfft2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">irfft2</span></code></a> functions now use the whole input array along the axis
<code class="docutils literal notranslate"><span class="pre">i</span></code> if <code class="docutils literal notranslate"><span class="pre">s[i]</span> <span class="pre">==</span> <span class="pre">-1</span></code>, in line with the array API standard.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25495">gh-25495</a>)</p>
</section>
<section id="guard-pyarrayscalar-val-and-pyunicodescalarobject-for-the-limited-api">
<h3>Guard PyArrayScalar_VAL and PyUnicodeScalarObject for the limited API<a class="headerlink" href="#guard-pyarrayscalar-val-and-pyunicodescalarobject-for-the-limited-api" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">PyUnicodeScalarObject</span></code> holds a <code class="docutils literal notranslate"><span class="pre">PyUnicodeObject</span></code>, which is not available
when using <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code>. Add guards to hide it and consequently also make
the <code class="docutils literal notranslate"><span class="pre">PyArrayScalar_VAL</span></code> macro hidden.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25531">gh-25531</a>)</p>
</section>
</section>
<section id="changes">
<h2>Changes<a class="headerlink" href="#changes" title="Link to this heading">#</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">np.gradient()</span></code> now returns a tuple rather than a list making the
return value immutable.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23861">gh-23861</a>)</p>
</li>
<li><p>Being fully context and thread-safe, <code class="docutils literal notranslate"><span class="pre">np.errstate</span></code> can only
be entered once now.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.setbufsize</span></code> is now tied to <code class="docutils literal notranslate"><span class="pre">np.errstate()</span></code>: leaving an
<code class="docutils literal notranslate"><span class="pre">np.errstate</span></code> context will also reset the <code class="docutils literal notranslate"><span class="pre">bufsize</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23936">gh-23936</a>)</p>
</li>
<li><p>A new public <code class="docutils literal notranslate"><span class="pre">np.lib.array_utils</span></code> submodule has been introduced and it
currently contains three functions: <code class="docutils literal notranslate"><span class="pre">byte_bounds</span></code> (moved from
<code class="docutils literal notranslate"><span class="pre">np.lib.utils</span></code>), <code class="docutils literal notranslate"><span class="pre">normalize_axis_tuple</span></code> and <code class="docutils literal notranslate"><span class="pre">normalize_axis_index</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24540">gh-24540</a>)</p>
</li>
<li><p>Introduce <a class="reference internal" href="../reference/arrays.scalars.html#numpy.bool" title="numpy.bool"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.bool</span></code></a> as the new canonical name for NumPy’s boolean dtype,
and make <a class="reference internal" href="../reference/arrays.scalars.html#numpy.bool_" title="numpy.bool_"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.bool_</span></code></a> an alias to it. Note that until NumPy 1.24,
<code class="docutils literal notranslate"><span class="pre">np.bool</span></code> was an alias to Python’s builtin <code class="docutils literal notranslate"><span class="pre">bool</span></code>. The new name helps
with array API standard compatibility and is a more intuitive name.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25080">gh-25080</a>)</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">dtype.flags</span></code> value was previously stored as a signed integer.
This means that the aligned dtype struct flag lead to negative flags being
set (-128 rather than 128). This flag is now stored unsigned (positive). Code
which checks flags manually may need to adapt.  This may include code
compiled with Cython 0.29.x.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25816">gh-25816</a>)</p>
</li>
</ul>
<section id="representation-of-numpy-scalars-changed">
<h3>Representation of NumPy scalars changed<a class="headerlink" href="#representation-of-numpy-scalars-changed" title="Link to this heading">#</a></h3>
<p>As per <a class="reference external" href="https://numpy.org/neps/nep-0051-scalar-representation.html#nep51" title="(in NumPy Enhancement Proposals)"><span class="xref std std-ref">NEP 51</span></a>, the scalar representation has been
updated to include the type information to avoid confusion with
Python scalars.</p>
<p>Scalars are now printed as <code class="docutils literal notranslate"><span class="pre">np.float64(3.0)</span></code> rather than just <code class="docutils literal notranslate"><span class="pre">3.0</span></code>.
This may disrupt workflows that store representations of numbers
(e.g., to files) making it harder to read them. They should be stored as
explicit strings, for example by using <code class="docutils literal notranslate"><span class="pre">str()</span></code> or <code class="docutils literal notranslate"><span class="pre">f&quot;{scalar!s}&quot;</span></code>.
For the time being, affected users can use <code class="docutils literal notranslate"><span class="pre">np.set_printoptions(legacy=&quot;1.25&quot;)</span></code>
to get the old behavior (with possibly a few exceptions).
Documentation of downstream projects may require larger updates,
if code snippets are tested.  We are working on tooling for
<a class="reference external" href="https://github.com/scientific-python/pytest-doctestplus/issues/107">doctest-plus</a>
to facilitate updates.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/22449">gh-22449</a>)</p>
</section>
<section id="truthiness-of-numpy-strings-changed">
<h3>Truthiness of NumPy strings changed<a class="headerlink" href="#truthiness-of-numpy-strings-changed" title="Link to this heading">#</a></h3>
<p>NumPy strings previously were inconsistent about how they defined
if the string is <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> and the definition did not
match the one used by Python.
Strings are now considered <code class="docutils literal notranslate"><span class="pre">True</span></code> when they are non-empty and
<code class="docutils literal notranslate"><span class="pre">False</span></code> when they are empty.
This changes the following distinct cases:</p>
<ul class="simple">
<li><p>Casts from string to boolean were previously roughly equivalent
to <code class="docutils literal notranslate"><span class="pre">string_array.astype(np.int64).astype(bool)</span></code>, meaning that only
valid integers could be cast.
Now a string of <code class="docutils literal notranslate"><span class="pre">&quot;0&quot;</span></code> will be considered <code class="docutils literal notranslate"><span class="pre">True</span></code> since it is not empty.
If you need the old behavior, you may use the above step (casting
to integer first) or <code class="docutils literal notranslate"><span class="pre">string_array</span> <span class="pre">==</span> <span class="pre">&quot;0&quot;</span></code> (if the input is only ever <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">1</span></code>).
To get the new result on old NumPy versions use <code class="docutils literal notranslate"><span class="pre">string_array</span> <span class="pre">!=</span> <span class="pre">&quot;&quot;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.nonzero(string_array)</span></code> previously ignored whitespace so that
a string only containing whitespace was considered <code class="docutils literal notranslate"><span class="pre">False</span></code>.
Whitespace is now considered <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<p>This change does not affect <code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code>, <code class="docutils literal notranslate"><span class="pre">np.fromstring</span></code>, or <code class="docutils literal notranslate"><span class="pre">np.genfromtxt</span></code>.
The first two still use the integer definition, while <code class="docutils literal notranslate"><span class="pre">genfromtxt</span></code> continues to
match for <code class="docutils literal notranslate"><span class="pre">&quot;true&quot;</span></code> (ignoring case).
However, if <code class="docutils literal notranslate"><span class="pre">np.bool_</span></code> is used as a converter the result will change.</p>
<p>The change does affect <code class="docutils literal notranslate"><span class="pre">np.fromregex</span></code> as it uses direct assignments.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/23871">gh-23871</a>)</p>
</section>
<section id="a-mean-keyword-was-added-to-var-and-std-function">
<h3>A <code class="docutils literal notranslate"><span class="pre">mean</span></code> keyword was added to var and std function<a class="headerlink" href="#a-mean-keyword-was-added-to-var-and-std-function" title="Link to this heading">#</a></h3>
<p>Often when the standard deviation is needed the mean is also needed. The same
holds for the variance and the mean. Until now the mean is then calculated twice,
the change introduced here for the <a class="reference internal" href="../reference/generated/numpy.var.html#numpy.var" title="numpy.var"><code class="xref py py-obj docutils literal notranslate"><span class="pre">var</span></code></a> and <a class="reference internal" href="../reference/generated/numpy.std.html#numpy.std" title="numpy.std"><code class="xref py py-obj docutils literal notranslate"><span class="pre">std</span></code></a> functions
allows for passing in a precalculated mean as an keyword argument. See the
docstrings for details and an example illustrating the speed-up.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24126">gh-24126</a>)</p>
</section>
<section id="remove-datetime64-deprecation-warning-when-constructing-with-timezone">
<h3>Remove datetime64 deprecation warning when constructing with timezone<a class="headerlink" href="#remove-datetime64-deprecation-warning-when-constructing-with-timezone" title="Link to this heading">#</a></h3>
<p>The <a class="reference internal" href="../reference/arrays.scalars.html#numpy.datetime64" title="numpy.datetime64"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.datetime64</span></code></a> method now issues a UserWarning rather than a
DeprecationWarning whenever a timezone is included in the datetime
string that is provided.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24193">gh-24193</a>)</p>
</section>
<section id="default-integer-dtype-is-now-64-bit-on-64-bit-windows">
<h3>Default integer dtype is now 64-bit on 64-bit Windows<a class="headerlink" href="#default-integer-dtype-is-now-64-bit-on-64-bit-windows" title="Link to this heading">#</a></h3>
<p>The default NumPy integer is now 64-bit on all 64-bit systems as the historic
32-bit default on Windows was a common source of issues. Most users should not
notice this. The main issues may occur with code interfacing with libraries
written in a compiled language like C.  For more information see
<a class="reference internal" href="../numpy_2_0_migration_guide.html#migration-windows-int64"><span class="std std-ref">Windows default integer</span></a>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24224">gh-24224</a>)</p>
</section>
<section id="renamed-numpy-core-to-numpy-core">
<h3>Renamed <code class="docutils literal notranslate"><span class="pre">numpy.core</span></code> to <code class="docutils literal notranslate"><span class="pre">numpy._core</span></code><a class="headerlink" href="#renamed-numpy-core-to-numpy-core" title="Link to this heading">#</a></h3>
<p>Accessing <code class="docutils literal notranslate"><span class="pre">numpy.core</span></code> now emits a DeprecationWarning. In practice
we have found that most downstream usage of <code class="docutils literal notranslate"><span class="pre">numpy.core</span></code> was to access
functionality that is available in the main <code class="docutils literal notranslate"><span class="pre">numpy</span></code> namespace.
If for some reason you are using functionality in <code class="docutils literal notranslate"><span class="pre">numpy.core</span></code> that
is not available in the main <code class="docutils literal notranslate"><span class="pre">numpy</span></code> namespace, this means you are likely
using private NumPy internals. You can still access these internals via
<code class="docutils literal notranslate"><span class="pre">numpy._core</span></code> without a deprecation warning but we do not provide any
backward compatibility guarantees for NumPy internals. Please open an issue
if you think a mistake was made and something needs to be made public.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24634">gh-24634</a>)</p>
<p>The “relaxed strides” debug build option, which was previously enabled through
the <code class="docutils literal notranslate"><span class="pre">NPY_RELAXED_STRIDES_DEBUG</span></code> environment variable or the
<code class="docutils literal notranslate"><span class="pre">-Drelaxed-strides-debug</span></code> config-settings flag has been removed.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24717">gh-24717</a>)</p>
</section>
<section id="redefinition-of-np-intp-np-uintp-almost-never-a-change">
<h3>Redefinition of <code class="docutils literal notranslate"><span class="pre">np.intp</span></code>/<code class="docutils literal notranslate"><span class="pre">np.uintp</span></code> (almost never a change)<a class="headerlink" href="#redefinition-of-np-intp-np-uintp-almost-never-a-change" title="Link to this heading">#</a></h3>
<p>Due to the actual use of these types almost always matching the use of
<code class="docutils literal notranslate"><span class="pre">size_t</span></code>/<code class="docutils literal notranslate"><span class="pre">Py_ssize_t</span></code> this is now the definition in C.
Previously, it matched <code class="docutils literal notranslate"><span class="pre">intptr_t</span></code> and <code class="docutils literal notranslate"><span class="pre">uintptr_t</span></code> which would often
have been subtly incorrect.
This has no effect on the vast majority of machines since the size
of these types only differ on extremely niche platforms.</p>
<p>However, it means that:</p>
<ul class="simple">
<li><p>Pointers may not necessarily fit into an <code class="docutils literal notranslate"><span class="pre">intp</span></code> typed array anymore.
The <code class="docutils literal notranslate"><span class="pre">p</span></code> and <code class="docutils literal notranslate"><span class="pre">P</span></code> character codes can still be used, however.</p></li>
<li><p>Creating <code class="docutils literal notranslate"><span class="pre">intptr_t</span></code> or <code class="docutils literal notranslate"><span class="pre">uintptr_t</span></code> typed arrays in C remains possible
in a cross-platform way via <code class="docutils literal notranslate"><span class="pre">PyArray_DescrFromType('p')</span></code>.</p></li>
<li><p>The new character codes <code class="docutils literal notranslate"><span class="pre">nN</span></code> were introduced.</p></li>
<li><p>It is now correct to use the Python C-API functions when parsing
to <code class="docutils literal notranslate"><span class="pre">npy_intp</span></code> typed arguments.</p></li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24888">gh-24888</a>)</p>
</section>
<section id="numpy-fft-helper-made-private">
<h3><code class="docutils literal notranslate"><span class="pre">numpy.fft.helper</span></code> made private<a class="headerlink" href="#numpy-fft-helper-made-private" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">numpy.fft.helper</span></code> was renamed to <code class="docutils literal notranslate"><span class="pre">numpy.fft._helper</span></code> to indicate
that it is a private submodule. All public functions exported by it
should be accessed from <a class="reference internal" href="../reference/routines.fft.html#module-numpy.fft" title="numpy.fft"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.fft</span></code></a>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24945">gh-24945</a>)</p>
</section>
<section id="numpy-linalg-linalg-made-private">
<h3><code class="docutils literal notranslate"><span class="pre">numpy.linalg.linalg</span></code> made private<a class="headerlink" href="#numpy-linalg-linalg-made-private" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">numpy.linalg.linalg</span></code> was renamed to <code class="docutils literal notranslate"><span class="pre">numpy.linalg._linalg</span></code>
to indicate that it is a private submodule. All public functions
exported by it should be accessed from <a class="reference internal" href="../reference/routines.linalg.html#module-numpy.linalg" title="numpy.linalg"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.linalg</span></code></a>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/24946">gh-24946</a>)</p>
</section>
<section id="out-of-bound-axis-not-the-same-as-axis-none">
<h3>Out-of-bound axis not the same as <code class="docutils literal notranslate"><span class="pre">axis=None</span></code><a class="headerlink" href="#out-of-bound-axis-not-the-same-as-axis-none" title="Link to this heading">#</a></h3>
<p>In some cases <code class="docutils literal notranslate"><span class="pre">axis=32</span></code> or for concatenate any large value
was the same as <code class="docutils literal notranslate"><span class="pre">axis=None</span></code>.
Except for <code class="docutils literal notranslate"><span class="pre">concatenate</span></code> this was deprecate.
Any out of bound axis value will now error, make sure to use
<code class="docutils literal notranslate"><span class="pre">axis=None</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25149">gh-25149</a>)</p>
</section>
<section id="new-copy-keyword-meaning-for-array-and-asarray-constructors">
<span id="copy-keyword-changes-2-0"></span><h3>New <code class="docutils literal notranslate"><span class="pre">copy</span></code> keyword meaning for <code class="docutils literal notranslate"><span class="pre">array</span></code> and <code class="docutils literal notranslate"><span class="pre">asarray</span></code> constructors<a class="headerlink" href="#new-copy-keyword-meaning-for-array-and-asarray-constructors" title="Link to this heading">#</a></h3>
<p>Now <a class="reference internal" href="../reference/generated/numpy.array.html#numpy.array" title="numpy.array"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.array</span></code></a> and <a class="reference internal" href="../reference/generated/numpy.asarray.html#numpy.asarray" title="numpy.asarray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.asarray</span></code></a> support three values for <code class="docutils literal notranslate"><span class="pre">copy</span></code> parameter:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">None</span></code> - A copy will only be made if it is necessary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">True</span></code> - Always make a copy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">False</span></code> - Never make a copy. If a copy is required a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is raised.</p></li>
</ul>
<p>The meaning of <code class="docutils literal notranslate"><span class="pre">False</span></code> changed as it now raises an exception if a copy is needed.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25168">gh-25168</a>)</p>
</section>
<section id="the-array-special-method-now-takes-a-copy-keyword-argument">
<h3>The <code class="docutils literal notranslate"><span class="pre">__array__</span></code> special method now takes a <code class="docutils literal notranslate"><span class="pre">copy</span></code> keyword argument.<a class="headerlink" href="#the-array-special-method-now-takes-a-copy-keyword-argument" title="Link to this heading">#</a></h3>
<p>NumPy will pass <code class="docutils literal notranslate"><span class="pre">copy</span></code> to the <code class="docutils literal notranslate"><span class="pre">__array__</span></code> special method in situations where
it would be set to a non-default value (e.g. in a call to
<code class="docutils literal notranslate"><span class="pre">np.asarray(some_object,</span> <span class="pre">copy=False)</span></code>). Currently, if an
unexpected keyword argument error is raised after this, NumPy will print a
warning and re-try without the <code class="docutils literal notranslate"><span class="pre">copy</span></code> keyword argument. Implementations of
objects implementing the <code class="docutils literal notranslate"><span class="pre">__array__</span></code> protocol should accept a <code class="docutils literal notranslate"><span class="pre">copy</span></code> keyword
argument with the same meaning as when passed to <a class="reference internal" href="../reference/generated/numpy.array.html#numpy.array" title="numpy.array"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.array</span></code></a> or
<a class="reference internal" href="../reference/generated/numpy.asarray.html#numpy.asarray" title="numpy.asarray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.asarray</span></code></a>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25168">gh-25168</a>)</p>
</section>
<section id="cleanup-of-initialization-of-numpy-dtype-with-strings-with-commas">
<h3>Cleanup of initialization of <code class="docutils literal notranslate"><span class="pre">numpy.dtype</span></code> with strings with commas<a class="headerlink" href="#cleanup-of-initialization-of-numpy-dtype-with-strings-with-commas" title="Link to this heading">#</a></h3>
<p>The interpretation of strings with commas is changed slightly, in that a
trailing comma will now always create a structured dtype.  E.g., where
previously <code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;i&quot;)</span></code> and <code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;i,&quot;)</span></code> were treated as identical,
now <code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;i,&quot;)</span></code> will create a structured dtype, with a single
field. This is analogous to <code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;i,i&quot;)</span></code> creating a structured dtype
with two fields, and makes the behaviour consistent with that expected of
tuples.</p>
<p>At the same time, the use of single number surrounded by parenthesis to
indicate a sub-array shape, like in <code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;(2)i,&quot;)</span></code>, is deprecated.
Instead; one should use <code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;(2,)i&quot;)</span></code> or <code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;2i&quot;)</span></code>.
Eventually, using a number in parentheses will raise an exception, like is the
case for initializations without a comma, like <code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;(2)i&quot;)</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25434">gh-25434</a>)</p>
</section>
<section id="change-in-how-complex-sign-is-calculated">
<h3>Change in how complex sign is calculated<a class="headerlink" href="#change-in-how-complex-sign-is-calculated" title="Link to this heading">#</a></h3>
<p>Following the array API standard, the complex sign is now calculated as
<code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">/</span> <span class="pre">|z|</span></code> (instead of the rather less logical case where the sign of
the real part was taken, unless the real part was zero, in which case
the sign of the imaginary part was returned).  Like for real numbers,
zero is returned if <code class="docutils literal notranslate"><span class="pre">z==0</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25441">gh-25441</a>)</p>
</section>
<section id="return-types-of-functions-that-returned-a-list-of-arrays">
<h3>Return types of functions that returned a list of arrays<a class="headerlink" href="#return-types-of-functions-that-returned-a-list-of-arrays" title="Link to this heading">#</a></h3>
<p>Functions that returned a list of ndarrays have been changed to return a tuple
of ndarrays instead. Returning tuples consistently whenever a sequence of
arrays is returned makes it easier for JIT compilers like Numba, as well as for
static type checkers in some cases, to support these functions. Changed
functions are: <a class="reference internal" href="../reference/generated/numpy.atleast_1d.html#numpy.atleast_1d" title="numpy.atleast_1d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">atleast_1d</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.atleast_2d.html#numpy.atleast_2d" title="numpy.atleast_2d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">atleast_2d</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.atleast_3d.html#numpy.atleast_3d" title="numpy.atleast_3d"><code class="xref py py-obj docutils literal notranslate"><span class="pre">atleast_3d</span></code></a>,
<a class="reference internal" href="../reference/generated/numpy.broadcast_arrays.html#numpy.broadcast_arrays" title="numpy.broadcast_arrays"><code class="xref py py-obj docutils literal notranslate"><span class="pre">broadcast_arrays</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.meshgrid.html#numpy.meshgrid" title="numpy.meshgrid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meshgrid</span></code></a>, <a class="reference internal" href="../reference/generated/numpy.ogrid.html#numpy.ogrid" title="numpy.ogrid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ogrid</span></code></a>,
<a class="reference internal" href="../reference/generated/numpy.histogramdd.html#numpy.histogramdd" title="numpy.histogramdd"><code class="xref py py-obj docutils literal notranslate"><span class="pre">histogramdd</span></code></a>.</p>
</section>
<section id="np-unique-return-inverse-shape-for-multi-dimensional-inputs">
<h3><code class="docutils literal notranslate"><span class="pre">np.unique</span></code> <code class="docutils literal notranslate"><span class="pre">return_inverse</span></code> shape for multi-dimensional inputs<a class="headerlink" href="#np-unique-return-inverse-shape-for-multi-dimensional-inputs" title="Link to this heading">#</a></h3>
<p>When multi-dimensional inputs are passed to <code class="docutils literal notranslate"><span class="pre">np.unique</span></code> with <code class="docutils literal notranslate"><span class="pre">return_inverse=True</span></code>,
the <code class="docutils literal notranslate"><span class="pre">unique_inverse</span></code> output is now shaped such that the input can be reconstructed
directly using <code class="docutils literal notranslate"><span class="pre">np.take(unique,</span> <span class="pre">unique_inverse)</span></code> when <code class="docutils literal notranslate"><span class="pre">axis=None</span></code>, and
<code class="docutils literal notranslate"><span class="pre">np.take_along_axis(unique,</span> <span class="pre">unique_inverse,</span> <span class="pre">axis=axis)</span></code> otherwise.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This change was reverted in 2.0.1 except for <code class="docutils literal notranslate"><span class="pre">axis=None</span></code>.  The correct
reconstruction is always <code class="docutils literal notranslate"><span class="pre">np.take(unique,</span> <span class="pre">unique_inverse,</span> <span class="pre">axis=axis)</span></code>.
When 2.0.0 needs to be supported, add <code class="docutils literal notranslate"><span class="pre">unique_inverse.reshape(-1)</span></code>
to code.</p>
</div>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25553">gh-25553</a>,
<a class="reference external" href="https://github.com/numpy/numpy/pull/25570">gh-25570</a>)</p>
</section>
<section id="any-and-all-return-booleans-for-object-arrays">
<h3><code class="docutils literal notranslate"><span class="pre">any</span></code> and <code class="docutils literal notranslate"><span class="pre">all</span></code> return booleans for object arrays<a class="headerlink" href="#any-and-all-return-booleans-for-object-arrays" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">any</span></code> and <code class="docutils literal notranslate"><span class="pre">all</span></code> functions and methods now return
booleans also for object arrays.  Previously, they did
a reduction which behaved like the Python <code class="docutils literal notranslate"><span class="pre">or</span></code> and
<code class="docutils literal notranslate"><span class="pre">and</span></code> operators which evaluates to one of the arguments.
You can use <code class="docutils literal notranslate"><span class="pre">np.logical_or.reduce</span></code> and <code class="docutils literal notranslate"><span class="pre">np.logical_and.reduce</span></code>
to achieve the previous behavior.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/25712">gh-25712</a>)</p>
</section>
<section id="np-can-cast-cannot-be-called-on-python-int-float-or-complex">
<h3><code class="docutils literal notranslate"><span class="pre">np.can_cast</span></code> cannot be called on Python int, float, or complex<a class="headerlink" href="#np-can-cast-cannot-be-called-on-python-int-float-or-complex" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">np.can_cast</span></code> cannot be called with Python int, float, or complex instances
anymore.  This is because NEP 50 means that the result of <code class="docutils literal notranslate"><span class="pre">can_cast</span></code> must
not depend on the value passed in.
Unfortunately, for Python scalars whether a cast should be considered
<code class="docutils literal notranslate"><span class="pre">&quot;same_kind&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;safe&quot;</span></code> may depend on the context and value so that
this is currently not implemented.
In some cases, this means you may have to add a specific path for:
<code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">type(obj)</span> <span class="pre">in</span> <span class="pre">(int,</span> <span class="pre">float,</span> <span class="pre">complex):</span> <span class="pre">...</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/26393">gh-26393</a>)</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="2.0.1-notes.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">NumPy 2.0.1 Release Notes</p>
      </div>
    </a>
    <a class="right-next"
       href="1.26.4-notes.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">NumPy 1.26.4 Release Notes</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#highlights">Highlights</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-2-0-python-api-removals">NumPy 2.0 Python API removals</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#array-prepare-is-removed"><code class="docutils literal notranslate"><span class="pre">__array_prepare__</span></code> is removed</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecations">Deprecations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-fft-deprecations-for-n-d-transforms-with-none-values-in-arguments"><code class="docutils literal notranslate"><span class="pre">numpy.fft</span></code> deprecations for n-D transforms with None values in arguments</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#np-linalg-lstsq-now-defaults-to-a-new-rcond-value"><code class="docutils literal notranslate"><span class="pre">np.linalg.lstsq</span></code> now defaults to a new <code class="docutils literal notranslate"><span class="pre">rcond</span></code> value</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#expired-deprecations">Expired deprecations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compatibility-notes">Compatibility notes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#loadtxt-and-genfromtxt-default-encoding-changed"><code class="docutils literal notranslate"><span class="pre">loadtxt</span></code> and <code class="docutils literal notranslate"><span class="pre">genfromtxt</span></code> default encoding changed</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#f2py-compatibility-notes"><code class="docutils literal notranslate"><span class="pre">f2py</span></code> compatibility notes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#minor-changes-in-behavior-of-sorting-functions">Minor changes in behavior of sorting functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-ambiguity-when-broadcasting-in-np-solve">Removed ambiguity when broadcasting in <code class="docutils literal notranslate"><span class="pre">np.solve</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#modified-representation-for-polynomial">Modified representation for <code class="docutils literal notranslate"><span class="pre">Polynomial</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#c-api-changes">C API changes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#datetime-functionality-exposed-in-the-c-api-and-cython-bindings">Datetime functionality exposed in the C API and Cython bindings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#const-correctness-for-the-generalized-ufunc-c-api">Const correctness for the generalized ufunc C API</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#larger-npy-maxdims-and-npy-maxargs-npy-ravel-axis-introduced">Larger <code class="docutils literal notranslate"><span class="pre">NPY_MAXDIMS</span></code> and <code class="docutils literal notranslate"><span class="pre">NPY_MAXARGS</span></code>, <code class="docutils literal notranslate"><span class="pre">NPY_RAVEL_AXIS</span></code> introduced</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#npy-maxargs-not-constant-and-pyarraymultiiterobject-size-change"><code class="docutils literal notranslate"><span class="pre">NPY_MAXARGS</span></code> not constant and <code class="docutils literal notranslate"><span class="pre">PyArrayMultiIterObject</span></code> size change</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#required-changes-for-custom-legacy-user-dtypes">Required changes for custom legacy user dtypes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-public-dtype-api">New Public DType API</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-c-api-import-functions">New C-API import functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#structured-dtype-information-access-through-functions">Structured dtype information access through functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#descriptor-elsize-and-alignment-access">Descriptor <code class="docutils literal notranslate"><span class="pre">elsize</span></code> and <code class="docutils literal notranslate"><span class="pre">alignment</span></code> access</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-2-0-c-api-removals">NumPy 2.0 C API removals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#new-features">New Features</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#np-add-was-extended-to-work-with-unicode-and-bytes-dtypes"><code class="docutils literal notranslate"><span class="pre">np.add</span></code> was extended to work with <code class="docutils literal notranslate"><span class="pre">unicode</span></code> and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> dtypes.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-new-bitwise-count-function">A new <code class="docutils literal notranslate"><span class="pre">bitwise_count</span></code> function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#macos-accelerate-support-including-the-ilp64">macOS Accelerate support, including the ILP64</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#option-to-use-weights-for-quantile-and-percentile-functions">Option to use weights for quantile and percentile functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improved-cpu-optimization-tracking">Improved CPU optimization tracking</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-new-meson-backend-for-f2py">A new Meson backend for <code class="docutils literal notranslate"><span class="pre">f2py</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bind-c-support-for-f2py"><code class="docutils literal notranslate"><span class="pre">bind(c)</span></code> support for <code class="docutils literal notranslate"><span class="pre">f2py</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-new-strict-option-for-several-testing-functions">A new <code class="docutils literal notranslate"><span class="pre">strict</span></code> option for several testing functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-np-core-umath-find-and-np-core-umath-rfind-ufuncs">Add <code class="docutils literal notranslate"><span class="pre">np.core.umath.find</span></code> and <code class="docutils literal notranslate"><span class="pre">np.core.umath.rfind</span></code> UFuncs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#diagonal-and-trace-for-numpy-linalg"><code class="docutils literal notranslate"><span class="pre">diagonal</span></code> and <code class="docutils literal notranslate"><span class="pre">trace</span></code> for <code class="docutils literal notranslate"><span class="pre">numpy.linalg</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-long-and-ulong-dtypes">New <code class="docutils literal notranslate"><span class="pre">long</span></code> and <code class="docutils literal notranslate"><span class="pre">ulong</span></code> dtypes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#svdvals-for-numpy-linalg"><code class="docutils literal notranslate"><span class="pre">svdvals</span></code> for <code class="docutils literal notranslate"><span class="pre">numpy.linalg</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-new-isdtype-function">A new <code class="docutils literal notranslate"><span class="pre">isdtype</span></code> function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-new-astype-function">A new <code class="docutils literal notranslate"><span class="pre">astype</span></code> function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#array-api-compatible-functions-aliases">Array API compatible functions’ aliases</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-unique-functions">New <code class="docutils literal notranslate"><span class="pre">unique_*</span></code> functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matrix-transpose-support-for-ndarrays">Matrix transpose support for ndarrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#array-api-compatible-functions-for-numpy-linalg">Array API compatible functions for <code class="docutils literal notranslate"><span class="pre">numpy.linalg</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-correction-argument-for-var-and-std">A <code class="docutils literal notranslate"><span class="pre">correction</span></code> argument for <code class="docutils literal notranslate"><span class="pre">var</span></code> and <code class="docutils literal notranslate"><span class="pre">std</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ndarray-device-and-ndarray-to-device"><code class="docutils literal notranslate"><span class="pre">ndarray.device</span></code> and <code class="docutils literal notranslate"><span class="pre">ndarray.to_device</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stringdtype-has-been-added-to-numpy">StringDType has been added to NumPy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-keywords-for-cholesky-and-pinv">New keywords for <code class="docutils literal notranslate"><span class="pre">cholesky</span></code> and <code class="docutils literal notranslate"><span class="pre">pinv</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-keywords-for-sort-argsort-and-linalg-matrix-rank">New keywords for <code class="docutils literal notranslate"><span class="pre">sort</span></code>, <code class="docutils literal notranslate"><span class="pre">argsort</span></code> and <code class="docutils literal notranslate"><span class="pre">linalg.matrix_rank</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-numpy-strings-namespace-for-string-ufuncs">New <code class="docutils literal notranslate"><span class="pre">numpy.strings</span></code> namespace for string ufuncs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-fft-support-for-different-precisions-and-in-place-calculations"><code class="docutils literal notranslate"><span class="pre">numpy.fft</span></code> support for different precisions and in-place calculations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configtool-and-pkg-config-support">configtool and pkg-config support</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#array-api-standard-support-in-the-main-namespace">Array API standard support in the main namespace</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#improvements">Improvements</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#strings-are-now-supported-by-any-all-and-the-logical-ufuncs">Strings are now supported by <code class="docutils literal notranslate"><span class="pre">any</span></code>, <code class="docutils literal notranslate"><span class="pre">all</span></code>, and the logical ufuncs.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#integer-sequences-as-the-shape-argument-for-memmap">Integer sequences as the shape argument for <code class="docutils literal notranslate"><span class="pre">memmap</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#errstate-is-now-faster-and-context-safe"><code class="docutils literal notranslate"><span class="pre">errstate</span></code> is now faster and context safe</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aarch64-quicksort-speed-improved-by-using-highway-s-vqsort">AArch64 quicksort speed improved by using Highway’s VQSort</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#complex-types-underlying-c-type-changes">Complex types - underlying C type changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iso-c-binding-support-and-improved-common-blocks-for-f2py"><code class="docutils literal notranslate"><span class="pre">iso_c_binding</span></code> support and improved common blocks for <code class="docutils literal notranslate"><span class="pre">f2py</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#call-str-automatically-on-third-argument-to-functions-like-assert-equal">Call <code class="docutils literal notranslate"><span class="pre">str</span></code> automatically on third argument to functions like <code class="docutils literal notranslate"><span class="pre">assert_equal</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#support-for-array-like-atol-rtol-in-isclose-allclose">Support for array-like <code class="docutils literal notranslate"><span class="pre">atol</span></code>/<code class="docutils literal notranslate"><span class="pre">rtol</span></code> in <code class="docutils literal notranslate"><span class="pre">isclose</span></code>, <code class="docutils literal notranslate"><span class="pre">allclose</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#consistent-failure-messages-in-test-functions">Consistent failure messages in test functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#n-d-fft-transforms-allow-s-i-1">n-D FFT transforms allow <code class="docutils literal notranslate"><span class="pre">s[i]</span> <span class="pre">==</span> <span class="pre">-1</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#guard-pyarrayscalar-val-and-pyunicodescalarobject-for-the-limited-api">Guard PyArrayScalar_VAL and PyUnicodeScalarObject for the limited API</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#changes">Changes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#representation-of-numpy-scalars-changed">Representation of NumPy scalars changed</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#truthiness-of-numpy-strings-changed">Truthiness of NumPy strings changed</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-mean-keyword-was-added-to-var-and-std-function">A <code class="docutils literal notranslate"><span class="pre">mean</span></code> keyword was added to var and std function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-datetime64-deprecation-warning-when-constructing-with-timezone">Remove datetime64 deprecation warning when constructing with timezone</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#default-integer-dtype-is-now-64-bit-on-64-bit-windows">Default integer dtype is now 64-bit on 64-bit Windows</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#renamed-numpy-core-to-numpy-core">Renamed <code class="docutils literal notranslate"><span class="pre">numpy.core</span></code> to <code class="docutils literal notranslate"><span class="pre">numpy._core</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#redefinition-of-np-intp-np-uintp-almost-never-a-change">Redefinition of <code class="docutils literal notranslate"><span class="pre">np.intp</span></code>/<code class="docutils literal notranslate"><span class="pre">np.uintp</span></code> (almost never a change)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-fft-helper-made-private"><code class="docutils literal notranslate"><span class="pre">numpy.fft.helper</span></code> made private</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-linalg-linalg-made-private"><code class="docutils literal notranslate"><span class="pre">numpy.linalg.linalg</span></code> made private</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#out-of-bound-axis-not-the-same-as-axis-none">Out-of-bound axis not the same as <code class="docutils literal notranslate"><span class="pre">axis=None</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-copy-keyword-meaning-for-array-and-asarray-constructors">New <code class="docutils literal notranslate"><span class="pre">copy</span></code> keyword meaning for <code class="docutils literal notranslate"><span class="pre">array</span></code> and <code class="docutils literal notranslate"><span class="pre">asarray</span></code> constructors</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-array-special-method-now-takes-a-copy-keyword-argument">The <code class="docutils literal notranslate"><span class="pre">__array__</span></code> special method now takes a <code class="docutils literal notranslate"><span class="pre">copy</span></code> keyword argument.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cleanup-of-initialization-of-numpy-dtype-with-strings-with-commas">Cleanup of initialization of <code class="docutils literal notranslate"><span class="pre">numpy.dtype</span></code> with strings with commas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#change-in-how-complex-sign-is-calculated">Change in how complex sign is calculated</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#return-types-of-functions-that-returned-a-list-of-arrays">Return types of functions that returned a list of arrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#np-unique-return-inverse-shape-for-multi-dimensional-inputs"><code class="docutils literal notranslate"><span class="pre">np.unique</span></code> <code class="docutils literal notranslate"><span class="pre">return_inverse</span></code> shape for multi-dimensional inputs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#any-and-all-return-booleans-for-object-arrays"><code class="docutils literal notranslate"><span class="pre">any</span></code> and <code class="docutils literal notranslate"><span class="pre">all</span></code> return booleans for object arrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#np-can-cast-cannot-be-called-on-python-int-float-or-complex"><code class="docutils literal notranslate"><span class="pre">np.can_cast</span></code> cannot be called on Python int, float, or complex</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2008-2025, NumPy Developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>