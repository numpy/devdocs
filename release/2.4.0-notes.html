
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>NumPy 2.4.0 Release Notes &#8212; NumPy v2.5.dev0 Manual</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Vibur" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyterlite_sphinx.css?v=8ee2c72c" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/numpy.css?v=e8edb4a7" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=ba1e46c4"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    <script src="../_static/jupyterlite_sphinx.js?v=96e329c5"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script data-domain="numpy.org/doc/stable/" defer="defer" src="https://views.scientific-python.org/js/script.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'release/2.4.0-notes';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://numpy.org/doc/_static/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'devdocs';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            true;
        </script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NumPy 2.3.5 Release Notes" href="2.3.5-notes.html" />
    <link rel="prev" title="NumPy 2.4.1 Release Notes" href="2.4.1-notes.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="2.5.dev0" />
    <meta name="docbuild:last-update" content="Feb 28, 2026"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/numpylogo.svg" class="logo__image only-light" alt="NumPy v2.5.dev0 Manual - Home"/>
    <img src="../_static/numpylogo_dark.svg" class="logo__image only-dark pst-js-only" alt="NumPy v2.5.dev0 Manual - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../building/index.html">
    Building from source
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../dev/index.html">
    Development
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../release.html">
    Release notes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://numpy.org/numpy-tutorials/">
    Learn
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://numpy.org/neps">
    NEPs
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/numpy/numpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../building/index.html">
    Building from source
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../dev/index.html">
    Development
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../release.html">
    Release notes
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://numpy.org/numpy-tutorials/">
    Learn
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://numpy.org/neps">
    NEPs
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/numpy/numpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../user/whatisnumpy.html">What is NumPy?</a></li>
<li class="toctree-l1"><a class="reference external" href="https://numpy.org/install/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/quickstart.html">NumPy quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/absolute_beginners.html">NumPy: the absolute basics for beginners</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Fundamentals and usage</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../user/basics.html">NumPy fundamentals</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../user/numpy-for-matlab-users.html">NumPy for MATLAB users</a></li>
<li class="toctree-l1"><a class="reference external" href="https://numpy.org/numpy-tutorials/">NumPy tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/howtos_index.html">NumPy how-tos</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced usage and interoperability</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../user/c-info.html">Using NumPy C-API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../f2py/index.html">F2PY user guide and reference manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/underthehood.html">Under-the-hood documentation for developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/basics.interoperability.html">Interoperability with NumPy</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extras</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../release.html">Release notes</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="2.5.0-notes.html">2.5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.4.2-notes.html">2.4.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.4.1-notes.html">2.4.1</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">2.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.5-notes.html">2.3.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.4-notes.html">2.3.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.3-notes.html">2.3.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.2-notes.html">2.3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.1-notes.html">2.3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.3.0-notes.html">2.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.6-notes.html">2.2.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.5-notes.html">2.2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.4-notes.html">2.2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.3-notes.html">2.2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.2-notes.html">2.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.1-notes.html">2.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.2.0-notes.html">2.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.1.3-notes.html">2.1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.1.2-notes.html">2.1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.1.1-notes.html">2.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.1.0-notes.html">2.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.0.2-notes.html">2.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.0.1-notes.html">2.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.0.0-notes.html">2.0.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.26.4-notes.html">1.26.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.26.3-notes.html">1.26.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.26.2-notes.html">1.26.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.26.1-notes.html">1.26.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.26.0-notes.html">1.26.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.25.2-notes.html">1.25.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.25.1-notes.html">1.25.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.25.0-notes.html">1.25.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.24.4-notes.html">1.24.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.24.3-notes.html">1.24.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.24.2-notes.html">1.24.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.24.1-notes.html">1.24.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.24.0-notes.html">1.24.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.5-notes.html">1.23.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.4-notes.html">1.23.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.3-notes.html">1.23.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.2-notes.html">1.23.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.1-notes.html">1.23.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.23.0-notes.html">1.23.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.22.4-notes.html">1.22.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.22.3-notes.html">1.22.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.22.2-notes.html">1.22.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.22.1-notes.html">1.22.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.22.0-notes.html">1.22.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.6-notes.html">1.21.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.5-notes.html">1.21.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.4-notes.html">1.21.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.3-notes.html">1.21.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.2-notes.html">1.21.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.1-notes.html">1.21.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.21.0-notes.html">1.21.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.20.3-notes.html">1.20.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.20.2-notes.html">1.20.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.20.1-notes.html">1.20.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.20.0-notes.html">1.20.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.5-notes.html">1.19.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.4-notes.html">1.19.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.3-notes.html">1.19.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.2-notes.html">1.19.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.1-notes.html">1.19.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.19.0-notes.html">1.19.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.5-notes.html">1.18.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.4-notes.html">1.18.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.3-notes.html">1.18.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.2-notes.html">1.18.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.1-notes.html">1.18.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.18.0-notes.html">1.18.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.5-notes.html">1.17.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.4-notes.html">1.17.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.3-notes.html">1.17.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.2-notes.html">1.17.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.1-notes.html">1.17.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.17.0-notes.html">1.17.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.6-notes.html">1.16.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.5-notes.html">1.16.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.4-notes.html">1.16.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.3-notes.html">1.16.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.2-notes.html">1.16.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.1-notes.html">1.16.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.16.0-notes.html">1.16.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.15.4-notes.html">1.15.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.15.3-notes.html">1.15.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.15.2-notes.html">1.15.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.15.1-notes.html">1.15.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.15.0-notes.html">1.15.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.6-notes.html">1.14.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.5-notes.html">1.14.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.4-notes.html">1.14.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.3-notes.html">1.14.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.2-notes.html">1.14.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.1-notes.html">1.14.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.14.0-notes.html">1.14.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.13.3-notes.html">1.13.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.13.2-notes.html">1.13.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.13.1-notes.html">1.13.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.13.0-notes.html">1.13.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.12.1-notes.html">1.12.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.12.0-notes.html">1.12.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.11.3-notes.html">1.11.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.11.2-notes.html">1.11.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.11.1-notes.html">1.11.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.11.0-notes.html">1.11.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.10.4-notes.html">1.10.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.10.3-notes.html">1.10.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.10.2-notes.html">1.10.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.10.1-notes.html">1.10.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.10.0-notes.html">1.10.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.9.2-notes.html">1.9.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.9.1-notes.html">1.9.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.9.0-notes.html">1.9.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.8.2-notes.html">1.8.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.8.1-notes.html">1.8.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.8.0-notes.html">1.8.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.7.2-notes.html">1.7.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.7.1-notes.html">1.7.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.7.0-notes.html">1.7.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.6.2-notes.html">1.6.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.6.1-notes.html">1.6.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.6.0-notes.html">1.6.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.5.0-notes.html">1.5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.4.0-notes.html">1.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.3.0-notes.html">1.3.0</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../numpy_2_0_migration_guide.html">NumPy 2.0 migration guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">NumPy license</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../user/index.html" class="nav-link">NumPy user guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="../release.html" class="nav-link">Release notes</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">NumPy 2.4.0 Release Notes</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="numpy-2-4-0-release-notes">
<h1>NumPy 2.4.0 Release Notes<a class="headerlink" href="#numpy-2-4-0-release-notes" title="Link to this heading">#</a></h1>
<p>The NumPy 2.4.0 release continues the work to improve free threaded Python
support, user dtypes implementation, and annotations. There are many expired
deprecations and bug fixes as well.</p>
<p>This release supports Python versions 3.11-3.14</p>
<section id="highlights">
<h2>Highlights<a class="headerlink" href="#highlights" title="Link to this heading">#</a></h2>
<p>Apart from annotations and <code class="docutils literal notranslate"><span class="pre">same_value</span></code> kwarg, the 2.4 highlights are mostly
of interest to downstream developers. They should help in implementing new user
dtypes.</p>
<ul class="simple">
<li><p>Many annotation improvements. In particular, runtime signature introspection.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">casting</span></code> kwarg <code class="docutils literal notranslate"><span class="pre">'same_value'</span></code> for casting by value.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">PyUFunc_AddLoopsFromSpec</span></code> function that can be used to add user sort
loops using the <code class="docutils literal notranslate"><span class="pre">ArrayMethod</span></code> API.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">__numpy_dtype__</span></code> protocol.</p></li>
</ul>
</section>
<section id="deprecations">
<h2>Deprecations<a class="headerlink" href="#deprecations" title="Link to this heading">#</a></h2>
<section id="setting-the-strides-attribute-is-deprecated">
<h3>Setting the <code class="docutils literal notranslate"><span class="pre">strides</span></code> attribute is deprecated<a class="headerlink" href="#setting-the-strides-attribute-is-deprecated" title="Link to this heading">#</a></h3>
<p>Setting the strides attribute is now deprecated since mutating
an array is unsafe if an array is shared, especially by multiple
threads.  As an alternative, you can create a new view (no copy) via:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">np.lib.stride_tricks.strided_window_view</span></code> if applicable,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.lib.stride_tricks.as_strided</span></code> for the general case,</p></li>
<li><p>or the <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> constructor (<code class="docutils literal notranslate"><span class="pre">buffer</span></code> is the original array) for a
light-weight version.</p></li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/28925">gh-28925</a>)</p>
</section>
<section id="positional-out-argument-to-np-maximum-np-minimum-is-deprecated">
<h3>Positional <code class="docutils literal notranslate"><span class="pre">out</span></code> argument to <code class="docutils literal notranslate"><span class="pre">np.maximum</span></code>, <code class="docutils literal notranslate"><span class="pre">np.minimum</span></code> is deprecated<a class="headerlink" href="#positional-out-argument-to-np-maximum-np-minimum-is-deprecated" title="Link to this heading">#</a></h3>
<p>Passing the output array <code class="docutils literal notranslate"><span class="pre">out</span></code> positionally to <code class="docutils literal notranslate"><span class="pre">numpy.maximum</span></code> and
<code class="docutils literal notranslate"><span class="pre">numpy.minimum</span></code> is deprecated. For example, <code class="docutils literal notranslate"><span class="pre">np.maximum(a,</span> <span class="pre">b,</span> <span class="pre">c)</span></code> will emit
a deprecation warning, since <code class="docutils literal notranslate"><span class="pre">c</span></code> is treated as the output buffer rather than
a third input.</p>
<p>Always pass the output with the keyword form, e.g.  <code class="docutils literal notranslate"><span class="pre">np.maximum(a,</span> <span class="pre">b,</span>
<span class="pre">out=c)</span></code>. This makes intent clear and simplifies type annotations.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29052">gh-29052</a>)</p>
</section>
<section id="align-must-be-passed-as-boolean-to-np-dtype">
<h3><code class="docutils literal notranslate"><span class="pre">align=</span></code> must be passed as boolean to <code class="docutils literal notranslate"><span class="pre">np.dtype()</span></code><a class="headerlink" href="#align-must-be-passed-as-boolean-to-np-dtype" title="Link to this heading">#</a></h3>
<p>When creating a new <code class="docutils literal notranslate"><span class="pre">dtype</span></code> a <code class="docutils literal notranslate"><span class="pre">VisibleDeprecationWarning</span></code> will be given if
<code class="docutils literal notranslate"><span class="pre">align=</span></code> is not a boolean.  This is mainly to prevent accidentally passing a
subarray align flag where it has no effect, such as <code class="docutils literal notranslate"><span class="pre">np.dtype(&quot;f8&quot;,</span> <span class="pre">3)</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">np.dtype((&quot;f8&quot;,</span> <span class="pre">3))</span></code>.  We strongly suggest to always pass
<code class="docutils literal notranslate"><span class="pre">align=</span></code> as a keyword argument.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29301">gh-29301</a>)</p>
</section>
<section id="assertion-and-warning-control-utilities-are-deprecated">
<h3>Assertion and warning control utilities are deprecated<a class="headerlink" href="#assertion-and-warning-control-utilities-are-deprecated" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">np.testing.assert_warns</span></code> and <code class="docutils literal notranslate"><span class="pre">np.testing.suppress_warnings</span></code> are
deprecated.  Use <code class="docutils literal notranslate"><span class="pre">warnings.catch_warnings</span></code>, <code class="docutils literal notranslate"><span class="pre">warnings.filterwarnings</span></code>,
<code class="docutils literal notranslate"><span class="pre">pytest.warns</span></code>, or <code class="docutils literal notranslate"><span class="pre">pytest.filterwarnings</span></code> instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29550">gh-29550</a>)</p>
</section>
<section id="np-fix-is-pending-deprecation">
<h3><code class="docutils literal notranslate"><span class="pre">np.fix</span></code> is pending deprecation<a class="headerlink" href="#np-fix-is-pending-deprecation" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">numpy.fix</span></code> function will be deprecated in a future release. It is
recommended to use <code class="docutils literal notranslate"><span class="pre">numpy.trunc</span></code> instead, as it provides the same
functionality of truncating decimal values to their integer parts. Static type
checkers might already report a warning for the use of <code class="docutils literal notranslate"><span class="pre">numpy.fix</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/30168">gh-30168</a>)</p>
</section>
<section id="in-place-modification-of-ndarray-shape-is-pending-deprecation">
<h3>in-place modification of <code class="docutils literal notranslate"><span class="pre">ndarray.shape</span></code> is pending deprecation<a class="headerlink" href="#in-place-modification-of-ndarray-shape-is-pending-deprecation" title="Link to this heading">#</a></h3>
<p>Setting the <code class="docutils literal notranslate"><span class="pre">ndarray.shape</span></code> attribute directly will be deprecated in a future
release.  Instead of modifying the shape in place, it is recommended to use the
<code class="docutils literal notranslate"><span class="pre">numpy.reshape</span></code> function.  Static type checkers might already report a
warning for assignments to <code class="docutils literal notranslate"><span class="pre">ndarray.shape</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/30282">gh-30282</a>)</p>
</section>
<section id="deprecation-of-numpy-lib-user-array-container">
<h3>Deprecation of <code class="docutils literal notranslate"><span class="pre">numpy.lib.user_array.container</span></code><a class="headerlink" href="#deprecation-of-numpy-lib-user-array-container" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">numpy.lib.user_array.container</span></code> class is deprecated and will be removed
in a future version.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/30284">gh-30284</a>)</p>
</section>
</section>
<section id="expired-deprecations">
<h2>Expired deprecations<a class="headerlink" href="#expired-deprecations" title="Link to this heading">#</a></h2>
<section id="removed-deprecated-machar-runtime-discovery-mechanism">
<h3>Removed deprecated <code class="docutils literal notranslate"><span class="pre">MachAr</span></code> runtime discovery mechanism.<a class="headerlink" href="#removed-deprecated-machar-runtime-discovery-mechanism" title="Link to this heading">#</a></h3>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29836">gh-29836</a>)</p>
</section>
<section id="raise-typeerror-on-attempt-to-convert-array-with-ndim-0-to-scalar">
<h3>Raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> on attempt to convert array with <code class="docutils literal notranslate"><span class="pre">ndim</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> to scalar<a class="headerlink" href="#raise-typeerror-on-attempt-to-convert-array-with-ndim-0-to-scalar" title="Link to this heading">#</a></h3>
<p>Conversion of an array with <code class="docutils literal notranslate"><span class="pre">ndim</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> to a scalar was deprecated in NumPy
1.25.  Now, attempting to do so raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.  Ensure you extract a
single element from your array before performing this operation.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29841">gh-29841</a>)</p>
</section>
<section id="removed-numpy-linalg-linalg-and-numpy-fft-helper">
<h3>Removed numpy.linalg.linalg and numpy.fft.helper<a class="headerlink" href="#removed-numpy-linalg-linalg-and-numpy-fft-helper" title="Link to this heading">#</a></h3>
<p>The following were deprecated in NumPy 2.0 and have been moved to private
modules:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.linalg.linalg</span></code>
Use <code class="docutils literal notranslate"><span class="pre">numpy.linalg</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.fft.helper</span></code>
Use <code class="docutils literal notranslate"><span class="pre">numpy.fft</span></code> instead.</p></li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29909">gh-29909</a>)</p>
</section>
<section id="removed-interpolation-parameter-from-quantile-and-percentile-functions">
<h3>Removed <code class="docutils literal notranslate"><span class="pre">interpolation</span></code> parameter from quantile and percentile functions<a class="headerlink" href="#removed-interpolation-parameter-from-quantile-and-percentile-functions" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">interpolation</span></code> parameter was deprecated in NumPy 1.22.0 and has been
removed from the following functions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.percentile</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.nanpercentile</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.quantile</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.nanquantile</span></code></p></li>
</ul>
<p>Use the <code class="docutils literal notranslate"><span class="pre">method</span></code> parameter instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29973">gh-29973</a>)</p>
</section>
<section id="removed-numpy-in1d">
<h3>Removed <code class="docutils literal notranslate"><span class="pre">numpy.in1d</span></code><a class="headerlink" href="#removed-numpy-in1d" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">numpy.in1d</span></code> has been deprecated since NumPy 2.0 and is now removed in favor of <code class="docutils literal notranslate"><span class="pre">numpy.isin</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29978">gh-29978</a>)</p>
</section>
<section id="removed-numpy-ndindex-ndincr">
<h3>Removed <code class="docutils literal notranslate"><span class="pre">numpy.ndindex.ndincr()</span></code><a class="headerlink" href="#removed-numpy-ndindex-ndincr" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ndindex.ndincr()</span></code> method has been deprecated since NumPy 1.20 and is now
removed; use <code class="docutils literal notranslate"><span class="pre">next(ndindex)</span></code> instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29980">gh-29980</a>)</p>
</section>
<section id="removed-fix-imports-parameter-from-numpy-save">
<h3>Removed <code class="docutils literal notranslate"><span class="pre">fix_imports</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">numpy.save</span></code><a class="headerlink" href="#removed-fix-imports-parameter-from-numpy-save" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">fix_imports</span></code> parameter was deprecated in NumPy 2.1.0 and is now removed.
This flag has been ignored since NumPy 1.17 and was only needed to support
loading files in Python 2 that were written in Python 3.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29984">gh-29984</a>)</p>
</section>
<section id="removal-of-four-undocumented-ndarray-ctypes-methods">
<h3>Removal of four undocumented <code class="docutils literal notranslate"><span class="pre">ndarray.ctypes</span></code> methods<a class="headerlink" href="#removal-of-four-undocumented-ndarray-ctypes-methods" title="Link to this heading">#</a></h3>
<p>Four undocumented methods of the <code class="docutils literal notranslate"><span class="pre">ndarray.ctypes</span></code> object have been removed:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_ctypes.get_data()</span></code> (use <code class="docutils literal notranslate"><span class="pre">_ctypes.data</span></code> instead)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_ctypes.get_shape()</span></code> (use <code class="docutils literal notranslate"><span class="pre">_ctypes.shape</span></code> instead)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_ctypes.get_strides()</span></code> (use <code class="docutils literal notranslate"><span class="pre">_ctypes.strides</span></code> instead)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_ctypes.get_as_parameter()</span></code> (use <code class="docutils literal notranslate"><span class="pre">_ctypes._as_parameter_</span></code> instead)</p></li>
</ul>
<p>These methods have been deprecated since NumPy 1.21.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29986">gh-29986</a>)</p>
</section>
<section id="removed-newshape-parameter-from-numpy-reshape">
<h3>Removed <code class="docutils literal notranslate"><span class="pre">newshape</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">numpy.reshape</span></code><a class="headerlink" href="#removed-newshape-parameter-from-numpy-reshape" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">newshape</span></code> parameter was deprecated in NumPy 2.1.0 and has been
removed from <code class="docutils literal notranslate"><span class="pre">numpy.reshape</span></code>. Pass it positionally or use <code class="docutils literal notranslate"><span class="pre">shape=</span></code>
on newer NumPy versions.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29994">gh-29994</a>)</p>
</section>
<section id="removal-of-deprecated-functions-and-arguments">
<h3>Removal of deprecated functions and arguments<a class="headerlink" href="#removal-of-deprecated-functions-and-arguments" title="Link to this heading">#</a></h3>
<p>The following long-deprecated APIs have been removed:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.trapz</span></code> — deprecated since NumPy 2.0 (2023-08-18). Use <code class="docutils literal notranslate"><span class="pre">numpy.trapezoid</span></code> or
<code class="docutils literal notranslate"><span class="pre">scipy.integrate</span></code> functions instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">disp</span></code> function — deprecated from 2.0 release and no longer functional. Use
your own printing function instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bias</span></code> and <code class="docutils literal notranslate"><span class="pre">ddof</span></code> arguments in <code class="docutils literal notranslate"><span class="pre">numpy.corrcoef</span></code> — these had no effect
since NumPy 1.10.</p></li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29997">gh-29997</a>)</p>
</section>
<section id="removed-delimitor-parameter-from-numpy-ma-mrecords-fromtextfile">
<h3>Removed <code class="docutils literal notranslate"><span class="pre">delimitor</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">numpy.ma.mrecords.fromtextfile()</span></code><a class="headerlink" href="#removed-delimitor-parameter-from-numpy-ma-mrecords-fromtextfile" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">delimitor</span></code> parameter was deprecated in NumPy 1.22.0 and has been
removed from <code class="docutils literal notranslate"><span class="pre">numpy.ma.mrecords.fromtextfile()</span></code>. Use <code class="docutils literal notranslate"><span class="pre">delimiter</span></code> instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/30021">gh-30021</a>)</p>
</section>
<section id="numpy-array2string-and-numpy-sum-deprecations-finalized">
<h3><code class="docutils literal notranslate"><span class="pre">numpy.array2string</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.sum</span></code> deprecations finalized<a class="headerlink" href="#numpy-array2string-and-numpy-sum-deprecations-finalized" title="Link to this heading">#</a></h3>
<p>The following long-deprecated APIs have been removed or converted to errors:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">style</span></code> parameter has been removed from <code class="docutils literal notranslate"><span class="pre">numpy.array2string</span></code>.
This argument had no effect since Numpy 1.14.0.  Any arguments following
it, such as <code class="docutils literal notranslate"><span class="pre">formatter</span></code> have now been made keyword-only.</p></li>
<li><p>Calling <code class="docutils literal notranslate"><span class="pre">np.sum(generator)</span></code> directly on a generator object now raises a
<code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.  This behavior was deprecated in NumPy 1.15.0. Use
<code class="docutils literal notranslate"><span class="pre">np.sum(np.fromiter(generator))</span></code> or the python <code class="docutils literal notranslate"><span class="pre">sum</span></code> builtin instead.</p></li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/30068">gh-30068</a>)</p>
</section>
</section>
<section id="compatibility-notes">
<h2>Compatibility notes<a class="headerlink" href="#compatibility-notes" title="Link to this heading">#</a></h2>
<ul>
<li><p>NumPy’s C extension modules have begun to use multi-phase initialisation, as
defined by PEP 489. As part of this, a new explicit check has been added that
each such module is only imported once per Python process. This comes with
the side-effect that deleting <code class="docutils literal notranslate"><span class="pre">numpy</span></code> from <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code> and re-importing
it will now fail with an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>. This has always been unsafe, with
unexpected side-effects, though did not previously raise an error.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29030">gh-29030</a>)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.round</span></code> now always returns a copy. Previously, it returned a view
for integer inputs for <code class="docutils literal notranslate"><span class="pre">decimals</span> <span class="pre">&gt;=</span> <span class="pre">0</span></code> and a copy in all other cases.
This change brings <code class="docutils literal notranslate"><span class="pre">round</span></code> in line with <code class="docutils literal notranslate"><span class="pre">ceil</span></code>, <code class="docutils literal notranslate"><span class="pre">floor</span></code> and <code class="docutils literal notranslate"><span class="pre">trunc</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29137">gh-29137</a>)</p>
</li>
<li><p>Type-checkers will no longer accept calls to <code class="docutils literal notranslate"><span class="pre">numpy.arange</span></code> with
<code class="docutils literal notranslate"><span class="pre">start</span></code> as a keyword argument. This was done for compatibility with
the Array API standard. At runtime it is still possible to use
<code class="docutils literal notranslate"><span class="pre">numpy.arange</span></code> with <code class="docutils literal notranslate"><span class="pre">start</span></code> as a keyword argument.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/30147">gh-30147</a>)</p>
</li>
<li><p>The Macro NPY_ALIGNMENT_REQUIRED has been removed The macro was defined in
the <code class="docutils literal notranslate"><span class="pre">npy_cpu.h</span></code> file, so might be regarded as semi public. As it turns out,
with modern compilers and hardware it is almost always the case that
alignment is required, so numpy no longer uses the macro.  It is unlikely
anyone uses it, but you might want to compile with the <code class="docutils literal notranslate"><span class="pre">-Wundef</span></code> flag or
equivalent to be sure.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29094">gh-29094</a>)</p>
</li>
</ul>
</section>
<section id="c-api-changes">
<h2>C API changes<a class="headerlink" href="#c-api-changes" title="Link to this heading">#</a></h2>
<section id="the-npy-sortkind-enum-has-been-enhanced-with-new-variables">
<h3>The NPY_SORTKIND enum has been enhanced with new variables<a class="headerlink" href="#the-npy-sortkind-enum-has-been-enhanced-with-new-variables" title="Link to this heading">#</a></h3>
<p>This is of interest if you are using <code class="docutils literal notranslate"><span class="pre">PyArray_Sort</span></code> or <code class="docutils literal notranslate"><span class="pre">PyArray_ArgSort</span></code>.
We have changed the semantics of the old names in the <code class="docutils literal notranslate"><span class="pre">NPY_SORTKIND</span></code> enum and
added new ones. The changes are backward compatible, and no recompilation is
needed. The new names of interest are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NPY_SORT_DEFAULT</span></code> – default sort (same value as <code class="docutils literal notranslate"><span class="pre">NPY_QUICKSORT</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NPY_SORT_STABLE</span></code>  – the sort must be stable (same value as <code class="docutils literal notranslate"><span class="pre">NPY_MERGESORT</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NPY_SORT_DESCENDING</span></code> – the sort must be descending</p></li>
</ul>
<p>The semantic change is that <code class="docutils literal notranslate"><span class="pre">NPY_HEAPSORT</span></code> is mapped to <code class="docutils literal notranslate"><span class="pre">NPY_QUICKSORT</span></code> when used.
Note that <code class="docutils literal notranslate"><span class="pre">NPY_SORT_DESCENDING</span></code> is not yet implemented.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29642">gh-29642</a>)</p>
</section>
<section id="new-npy-dt-get-constant-slot-for-dtype-constant-retrieval">
<h3>New <code class="docutils literal notranslate"><span class="pre">NPY_DT_get_constant</span></code> slot for DType constant retrieval<a class="headerlink" href="#new-npy-dt-get-constant-slot-for-dtype-constant-retrieval" title="Link to this heading">#</a></h3>
<p>A new slot <code class="docutils literal notranslate"><span class="pre">NPY_DT_get_constant</span></code> has been added to the DType API, allowing
dtype implementations to provide constant values such as machine limits and
special values. The slot function has the signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">get_constant</span><span class="p">(</span><span class="n">PyArray_Descr</span> <span class="o">*</span><span class="n">descr</span><span class="p">,</span> <span class="nb">int</span> <span class="n">constant_id</span><span class="p">,</span> <span class="n">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">)</span>
</pre></div>
</div>
<p>It returns 1 on success, 0 if the constant is not available, or -1 on error.
The function is always called with the GIL held and may write to unaligned memory.</p>
<p>Integer constants (marked with the <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;&lt;</span> <span class="pre">16</span></code> bit) return <code class="docutils literal notranslate"><span class="pre">npy_intp</span></code> values,
while floating-point constants return values of the dtype’s native type.</p>
<p>Implementing this can be used by user DTypes to provide <code class="docutils literal notranslate"><span class="pre">numpy.finfo</span></code> values.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29836">gh-29836</a>)</p>
</section>
<section id="a-new-pyufunc-addloopsfromspecs-convenience-function-has-been-added-to-the-c-api">
<h3>A new <code class="docutils literal notranslate"><span class="pre">PyUFunc_AddLoopsFromSpecs</span></code> convenience function has been added to the C API.<a class="headerlink" href="#a-new-pyufunc-addloopsfromspecs-convenience-function-has-been-added-to-the-c-api" title="Link to this heading">#</a></h3>
<p>This function allows adding multiple ufunc loops from their specs in one call
using a NULL-terminated array of <code class="docutils literal notranslate"><span class="pre">PyUFunc_LoopSlot</span></code> structs. It allows
registering sorting and argsorting loops using the new ArrayMethod API.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29900">gh-29900</a>)</p>
</section>
</section>
<section id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Link to this heading">#</a></h2>
<ul>
<li><p>Let <code class="docutils literal notranslate"><span class="pre">np.size</span></code> accept multiple axes.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29240">gh-29240</a>)</p>
</li>
<li><p>Extend <code class="docutils literal notranslate"><span class="pre">numpy.pad</span></code> to accept a dictionary for the <code class="docutils literal notranslate"><span class="pre">pad_width</span></code> argument.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29273">gh-29273</a>)</p>
</li>
</ul>
<section id="same-value-for-casting-by-value">
<h3><code class="docutils literal notranslate"><span class="pre">'same_value'</span></code> for casting by value<a class="headerlink" href="#same-value-for-casting-by-value" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">casting</span></code> kwarg now has a <code class="docutils literal notranslate"><span class="pre">'same_value'</span></code> option that checks the actual
values can be round-trip cast without changing value. Currently it is only
implemented in <code class="docutils literal notranslate"><span class="pre">ndarray.astype</span></code>. This will raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if any of the
values in the array would change as a result of the cast, including rounding of
floats or overflowing of ints.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29129">gh-29129</a>)</p>
</section>
<section id="stringdtype-fill-value-support-in-numpy-ma-maskedarray">
<h3><code class="docutils literal notranslate"><span class="pre">StringDType</span></code> fill_value support in <code class="docutils literal notranslate"><span class="pre">numpy.ma.MaskedArray</span></code><a class="headerlink" href="#stringdtype-fill-value-support-in-numpy-ma-maskedarray" title="Link to this heading">#</a></h3>
<p>Masked arrays now accept and preserve a Python <code class="docutils literal notranslate"><span class="pre">str</span></code> as their <code class="docutils literal notranslate"><span class="pre">fill_value</span></code>
when using the variable‑width <code class="docutils literal notranslate"><span class="pre">StringDType</span></code> (kind <code class="docutils literal notranslate"><span class="pre">'T'</span></code>), including through
slicing and views.  The default is <code class="docutils literal notranslate"><span class="pre">'N/A'</span></code> and may be overridden by any valid
string. This fixes issue <a class="reference external" href="https://github.com/numpy/numpy/issues/29421">gh‑29421</a>
and was implemented in pull request <a class="reference external" href="https://github.com/numpy/numpy/pull/29423">gh‑29423</a>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29423">gh-29423</a>)</p>
</section>
<section id="ndmax-option-for-numpy-array">
<h3><code class="docutils literal notranslate"><span class="pre">ndmax</span></code> option for <code class="docutils literal notranslate"><span class="pre">numpy.array</span></code><a class="headerlink" href="#ndmax-option-for-numpy-array" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ndmax</span></code> option is now available for <code class="docutils literal notranslate"><span class="pre">numpy.array</span></code>.
It explicitly limits the maximum number of dimensions created from nested sequences.</p>
<p>This is particularly useful when creating arrays of list-like objects with <code class="docutils literal notranslate"><span class="pre">dtype=object</span></code>.
By default, NumPy recurses through all nesting levels to create the highest possible
dimensional array, but this behavior may not be desired when the intent is to preserve
nested structures as objects. The <code class="docutils literal notranslate"><span class="pre">ndmax</span></code> parameter provides explicit control over
this recursion depth.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default behavior: Creates a 2D array</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
       <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># With ndmax=1: Creates a 1D array</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">,</span> <span class="n">ndmax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="n">array</span><span class="p">([</span><span class="nb">list</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span> <span class="nb">list</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">shape</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29569">gh-29569</a>)</p>
</section>
<section id="warning-emitted-when-using-where-without-out">
<h3>Warning emitted when using <code class="docutils literal notranslate"><span class="pre">where</span></code> without <code class="docutils literal notranslate"><span class="pre">out</span></code><a class="headerlink" href="#warning-emitted-when-using-where-without-out" title="Link to this heading">#</a></h3>
<p>Ufuncs called with a <code class="docutils literal notranslate"><span class="pre">where</span></code> mask and without an <code class="docutils literal notranslate"><span class="pre">out</span></code> positional or kwarg will
now emit a warning. This usage tends to trip up users who expect some value in
output locations where the mask is <code class="docutils literal notranslate"><span class="pre">False</span></code> (the ufunc will not touch those
locations). The warning can be suppressed by using <code class="docutils literal notranslate"><span class="pre">out=None</span></code>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29813">gh-29813</a>)</p>
</section>
<section id="dtype-sorting-and-argsorting-supports-the-arraymethod-api">
<h3>DType sorting and argsorting supports the ArrayMethod API<a class="headerlink" href="#dtype-sorting-and-argsorting-supports-the-arraymethod-api" title="Link to this heading">#</a></h3>
<p>User-defined dtypes can now implement custom sorting and argsorting using the
<code class="docutils literal notranslate"><span class="pre">ArrayMethod</span></code> API. This mechanism can be used in place of the
<code class="docutils literal notranslate"><span class="pre">PyArray_ArrFuncs</span></code> slots which may be deprecated in the future.</p>
<p>The sorting and argsorting methods are registered by passing the arraymethod
specs that implement the operations to the new <code class="docutils literal notranslate"><span class="pre">PyUFunc_AddLoopsFromSpecs</span></code>
function.  See the <code class="docutils literal notranslate"><span class="pre">ArrayMethod</span></code> API documentation for details.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29900">gh-29900</a>)</p>
</section>
<section id="new-numpy-dtype-protocol">
<h3>New <code class="docutils literal notranslate"><span class="pre">__numpy_dtype__</span></code> protocol<a class="headerlink" href="#new-numpy-dtype-protocol" title="Link to this heading">#</a></h3>
<p>NumPy now has a new <code class="docutils literal notranslate"><span class="pre">__numpy_dtype__</span></code> protocol. NumPy will check
for this attribute when converting to a NumPy dtype via <code class="docutils literal notranslate"><span class="pre">np.dtype(obj)</span></code>
or any <code class="docutils literal notranslate"><span class="pre">dtype=</span></code> argument.</p>
<p>Downstream projects are encouraged to implement this for all dtype like
objects which may previously have used a <code class="docutils literal notranslate"><span class="pre">.dtype</span></code> attribute that returned
a NumPy dtype.
We expect to deprecate <code class="docutils literal notranslate"><span class="pre">.dtype</span></code> in the future to prevent interpreting
array-like objects with a <code class="docutils literal notranslate"><span class="pre">.dtype</span></code> attribute as a dtype.
If you wish you can implement <code class="docutils literal notranslate"><span class="pre">__numpy_dtype__</span></code> to ensure an earlier
warning or error (<code class="docutils literal notranslate"><span class="pre">.dtype</span></code> is ignored if this is found).</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/30179">gh-30179</a>)</p>
</section>
</section>
<section id="improvements">
<h2>Improvements<a class="headerlink" href="#improvements" title="Link to this heading">#</a></h2>
<section id="fix-flatiter-indexing-edge-cases">
<h3>Fix <code class="docutils literal notranslate"><span class="pre">flatiter</span></code> indexing edge cases<a class="headerlink" href="#fix-flatiter-indexing-edge-cases" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">flatiter</span></code> object now shares the same index preparation logic as
<code class="docutils literal notranslate"><span class="pre">ndarray</span></code>, ensuring consistent behavior and fixing several issues where
invalid indices were previously accepted or misinterpreted.</p>
<p>Key fixes and improvements:</p>
<ul>
<li><p>Stricter index validation</p>
<ul class="simple">
<li><p>Boolean non-array indices like <code class="docutils literal notranslate"><span class="pre">arr.flat[[True,</span> <span class="pre">True]]</span></code> were
incorrectly treated as <code class="docutils literal notranslate"><span class="pre">arr.flat[np.array([1,</span> <span class="pre">1],</span> <span class="pre">dtype=int)]</span></code>.
They now raise an index error. Note that indices that match the
iterator’s shape are expected to not raise in the future and be
handled as regular boolean indices. Use <code class="docutils literal notranslate"><span class="pre">np.asarray(&lt;index&gt;)</span></code> if
you want to match that behavior.</p></li>
<li><p>Float non-array indices were also cast to integer and incorrectly
treated as <code class="docutils literal notranslate"><span class="pre">arr.flat[np.array([1.0,</span> <span class="pre">1.0],</span> <span class="pre">dtype=int)]</span></code>. This is now
deprecated and will be removed in a future version.</p></li>
<li><p>0-dimensional boolean indices like <code class="docutils literal notranslate"><span class="pre">arr.flat[True]</span></code> are also
deprecated and will be removed in a future version.</p></li>
</ul>
</li>
<li><p>Consistent error types:</p>
<p>Certain invalid <code class="docutils literal notranslate"><span class="pre">flatiter</span></code> indices that previously raised <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>
now correctly raise <code class="docutils literal notranslate"><span class="pre">IndexError</span></code>, aligning with <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> behavior.</p>
</li>
<li><p>Improved error messages:</p>
<p>The error message for unsupported index operations now provides more
specific details, including explicitly listing the valid index types,
instead of the generic <code class="docutils literal notranslate"><span class="pre">IndexError:</span> <span class="pre">unsupported</span> <span class="pre">index</span> <span class="pre">operation</span></code>.</p>
</li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/28590">gh-28590</a>)</p>
</section>
<section id="improved-error-handling-in-np-quantile">
<h3>Improved error handling in <code class="docutils literal notranslate"><span class="pre">np.quantile</span></code><a class="headerlink" href="#improved-error-handling-in-np-quantile" title="Link to this heading">#</a></h3>
<p><em class="xref py py-obj">np.quantile</em> now raises errors if:</p>
<ul class="simple">
<li><p>All weights are zero</p></li>
<li><p>At least one weight is <code class="docutils literal notranslate"><span class="pre">np.nan</span></code></p></li>
<li><p>At least one weight is <code class="docutils literal notranslate"><span class="pre">np.inf</span></code></p></li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/28595">gh-28595</a>)</p>
</section>
<section id="improved-error-message-for-assert-array-compare">
<h3>Improved error message for <code class="docutils literal notranslate"><span class="pre">assert_array_compare</span></code><a class="headerlink" href="#improved-error-message-for-assert-array-compare" title="Link to this heading">#</a></h3>
<p>The error message generated by <code class="docutils literal notranslate"><span class="pre">assert_array_compare</span></code> which is used by functions
like <code class="docutils literal notranslate"><span class="pre">assert_allclose</span></code>, <code class="docutils literal notranslate"><span class="pre">assert_array_less</span></code> etc. now also includes information
about the indices at which the assertion fails.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29112">gh-29112</a>)</p>
</section>
<section id="show-unit-information-in-repr-for-datetime64-nat">
<h3>Show unit information in <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> for <code class="docutils literal notranslate"><span class="pre">datetime64(&quot;NaT&quot;)</span></code><a class="headerlink" href="#show-unit-information-in-repr-for-datetime64-nat" title="Link to this heading">#</a></h3>
<p>When a <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> object is “Not a Time” (NaT), its <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> method now
includes the time unit of the datetime64 type. This makes it consistent with
the behavior of a <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> object.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29396">gh-29396</a>)</p>
</section>
<section id="performance-increase-for-scalar-calculations">
<h3>Performance increase for scalar calculations<a class="headerlink" href="#performance-increase-for-scalar-calculations" title="Link to this heading">#</a></h3>
<p>The speed of calculations on scalars has been improved by about a factor 6 for
ufuncs that take only one input (like <code class="docutils literal notranslate"><span class="pre">np.sin(scalar)</span></code>), reducing the speed
difference from their <code class="docutils literal notranslate"><span class="pre">math</span></code> equivalents from a factor 19 to 3 (the speed
for arrays is left unchanged).</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29819">gh-29819</a>)</p>
</section>
<section id="numpy-finfo-refactor">
<h3><code class="docutils literal notranslate"><span class="pre">numpy.finfo</span></code> Refactor<a class="headerlink" href="#numpy-finfo-refactor" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">numpy.finfo</span></code> class has been completely refactored to obtain floating-point
constants directly from C compiler macros rather than deriving them at runtime.
This provides better accuracy, platform compatibility and corrected
several attribute calculations:</p>
<ul class="simple">
<li><p>Constants like <code class="docutils literal notranslate"><span class="pre">eps</span></code>, <code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">smallest_normal</span></code>, and
<code class="docutils literal notranslate"><span class="pre">smallest_subnormal</span></code> now come directly from standard C macros (<code class="docutils literal notranslate"><span class="pre">FLT_EPSILON</span></code>,
<code class="docutils literal notranslate"><span class="pre">DBL_MIN</span></code>, etc.), ensuring platform-correct values.</p></li>
<li><p>The deprecated <code class="docutils literal notranslate"><span class="pre">MachAr</span></code> runtime discovery mechanism has been removed.</p></li>
<li><p>Derived attributes have been corrected to match standard definitions:
<code class="docutils literal notranslate"><span class="pre">machep</span></code> and <code class="docutils literal notranslate"><span class="pre">negep</span></code> now use <code class="docutils literal notranslate"><span class="pre">int(log2(eps))</span></code>; <code class="docutils literal notranslate"><span class="pre">nexp</span></code> accounts for
all exponent patterns; <code class="docutils literal notranslate"><span class="pre">nmant</span></code> excludes the implicit bit; and <code class="docutils literal notranslate"><span class="pre">minexp</span></code>
follows the C standard definition.</p></li>
<li><p>longdouble constants, Specifically <code class="docutils literal notranslate"><span class="pre">smallest_normal</span></code> now follows the
C standard definitions as per respecitive platform.</p></li>
<li><p>Special handling added for PowerPC’s IBM double-double format.</p></li>
<li><p>New test suite added in <code class="docutils literal notranslate"><span class="pre">test_finfo.py</span></code> to validate all
<code class="docutils literal notranslate"><span class="pre">finfo</span></code> properties against expected machine arithmetic values for
float16, float32, and float64 types.</p></li>
</ul>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29836">gh-29836</a>)</p>
</section>
<section id="multiple-axes-are-now-supported-in-numpy-trim-zeros">
<h3>Multiple axes are now supported in <code class="docutils literal notranslate"><span class="pre">numpy.trim_zeros</span></code><a class="headerlink" href="#multiple-axes-are-now-supported-in-numpy-trim-zeros" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument of <code class="docutils literal notranslate"><span class="pre">numpy.trim_zeros</span></code> now accepts a sequence; for example
<code class="docutils literal notranslate"><span class="pre">np.trim_zeros(x,</span> <span class="pre">axis=(0,</span> <span class="pre">1))</span></code> will trim the zeros from a multi-dimensional
array <code class="docutils literal notranslate"><span class="pre">x</span></code> along axes 0 and 1. This fixes issue
<a class="reference external" href="https://github.com/numpy/numpy/issues/29945">gh‑29945</a> and was implemented
in pull request <a class="reference external" href="https://github.com/numpy/numpy/pull/29947">gh‑29947</a>.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29947">gh-29947</a>)</p>
</section>
<section id="runtime-signature-introspection-support-has-been-significantly-improved">
<h3>Runtime signature introspection support has been significantly improved<a class="headerlink" href="#runtime-signature-introspection-support-has-been-significantly-improved" title="Link to this heading">#</a></h3>
<p>Many NumPy functions, classes, and methods that previously raised
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when passed to <code class="docutils literal notranslate"><span class="pre">inspect.signature()</span></code> now return meaningful
signatures. This improves support for runtime type checking, IDE autocomplete,
documentation generation, and runtime introspection capabilities across the
NumPy API.</p>
<p>Over three hundred classes and functions have been updated in total, including,
but not limited to, core classes such as <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="docutils literal notranslate"><span class="pre">generic</span></code>, <code class="docutils literal notranslate"><span class="pre">dtype</span></code>,
<code class="docutils literal notranslate"><span class="pre">ufunc</span></code>, <code class="docutils literal notranslate"><span class="pre">broadcast</span></code>, <code class="docutils literal notranslate"><span class="pre">nditer</span></code>, etc., most methods of <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> and
scalar types, array constructor functions (<code class="docutils literal notranslate"><span class="pre">array</span></code>, <code class="docutils literal notranslate"><span class="pre">empty</span></code>, <code class="docutils literal notranslate"><span class="pre">arange</span></code>,
<code class="docutils literal notranslate"><span class="pre">fromiter</span></code>, etc.), all <code class="docutils literal notranslate"><span class="pre">ufuncs</span></code>, and many other commonly used functions,
including <code class="docutils literal notranslate"><span class="pre">dot</span></code>, <code class="docutils literal notranslate"><span class="pre">concat</span></code>, <code class="docutils literal notranslate"><span class="pre">where</span></code>, <code class="docutils literal notranslate"><span class="pre">bincount</span></code>, <code class="docutils literal notranslate"><span class="pre">can_cast</span></code>, and
numerous others.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/30208">gh-30208</a>)</p>
</section>
</section>
<section id="performance-improvements-and-changes">
<h2>Performance improvements and changes<a class="headerlink" href="#performance-improvements-and-changes" title="Link to this heading">#</a></h2>
<section id="performance-improvements-to-np-unique-for-string-dtypes">
<h3>Performance improvements to <code class="docutils literal notranslate"><span class="pre">np.unique</span></code> for string dtypes<a class="headerlink" href="#performance-improvements-to-np-unique-for-string-dtypes" title="Link to this heading">#</a></h3>
<p>The hash-based algorithm for unique extraction provides an order-of-magnitude
speedup on large string arrays.  In an internal benchmark with about 1 billion
string elements, the hash-based np.unique completed in roughly 33.5 seconds,
compared to 498 seconds with the sort-based method – about 15× faster for
unsorted unique operations on strings.  This improvement greatly reduces the
time to find unique values in very large string datasets.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/28767">gh-28767</a>)</p>
</section>
<section id="rewrite-of-np-ndindex-using-itertools-product">
<h3>Rewrite of <code class="docutils literal notranslate"><span class="pre">np.ndindex</span></code> using <code class="docutils literal notranslate"><span class="pre">itertools.product</span></code><a class="headerlink" href="#rewrite-of-np-ndindex-using-itertools-product" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">numpy.ndindex</span></code> function now uses <code class="docutils literal notranslate"><span class="pre">itertools.product</span></code> internally,
providing significant improvements in performance for large iteration spaces,
while maintaining the original behavior and interface.  For example, for an
array of shape (50, 60, 90) the NumPy <code class="docutils literal notranslate"><span class="pre">ndindex</span></code> benchmark improves
performance by a factor 5.2.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29165">gh-29165</a>)</p>
</section>
<section id="performance-improvements-to-np-unique-for-complex-dtypes">
<h3>Performance improvements to <code class="docutils literal notranslate"><span class="pre">np.unique</span></code> for complex dtypes<a class="headerlink" href="#performance-improvements-to-np-unique-for-complex-dtypes" title="Link to this heading">#</a></h3>
<p>The hash-based algorithm for unique extraction now also supports
complex dtypes, offering noticeable performance gains.</p>
<p>In our benchmarks on complex128 arrays with 200,000 elements,
the hash-based approach was about 1.4–1.5× faster
than the sort-based baseline when there were 20% of unique values,
and about 5× faster when there were 0.2% of unique values.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29537">gh-29537</a>)</p>
</section>
</section>
<section id="changes">
<h2>Changes<a class="headerlink" href="#changes" title="Link to this heading">#</a></h2>
<ul>
<li><p>Multiplication between a string and integer now raises OverflowError instead
of MemoryError if the result of the multiplication would create a string that
is too large to be represented. This follows Python’s behavior.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29060">gh-29060</a>)</p>
</li>
<li><p>The accuracy of <code class="docutils literal notranslate"><span class="pre">np.quantile</span></code> and <code class="docutils literal notranslate"><span class="pre">np.percentile</span></code> for 16- and 32-bit
floating point input data has been improved.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29105">gh-29105</a>)</p>
</li>
</ul>
<section id="unique-values-for-string-dtypes-may-return-unsorted-data">
<h3><code class="docutils literal notranslate"><span class="pre">unique_values</span></code> for string dtypes may return unsorted data<a class="headerlink" href="#unique-values-for-string-dtypes-may-return-unsorted-data" title="Link to this heading">#</a></h3>
<p>np.unique now supports hash‐based duplicate removal for string dtypes.
This enhancement extends the hash-table algorithm to byte strings (‘S’),
Unicode strings (‘U’), and the experimental string dtype (‘T’, StringDType).
As a result, calling np.unique() on an array of strings will use
the faster hash-based method to obtain unique values.
Note that this hash-based method does not guarantee that the returned unique values will be sorted.
This also works for StringDType arrays containing None (missing values)
when using equal_nan=True (treating missing values as equal).</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/28767">gh-28767</a>)</p>
</section>
<section id="modulate-dispatched-x86-cpu-features">
<h3>Modulate dispatched x86 CPU features<a class="headerlink" href="#modulate-dispatched-x86-cpu-features" title="Link to this heading">#</a></h3>
<p><strong>IMPORTANT</strong>: The default setting for <code class="docutils literal notranslate"><span class="pre">cpu-baseline</span></code> on x86 has been raised
to <code class="docutils literal notranslate"><span class="pre">x86-64-v2</span></code> microarchitecture.  This can be changed to none during build
time to support older CPUs, though SIMD optimizations for pre-2009 processors
are no longer maintained.</p>
<p>NumPy has reorganized x86 CPU features into microarchitecture-based groups
instead of individual features, aligning with Linux distribution standards and
Google Highway requirements.</p>
<p>Key changes:</p>
<ul class="simple">
<li><p>Replaced individual x86 features with microarchitecture levels: <code class="docutils literal notranslate"><span class="pre">X86_V2</span></code>,
<code class="docutils literal notranslate"><span class="pre">X86_V3</span></code>, and <code class="docutils literal notranslate"><span class="pre">X86_V4</span></code></p></li>
<li><p>Raised the baseline to <code class="docutils literal notranslate"><span class="pre">X86_V2</span></code></p></li>
<li><p>Improved <code class="docutils literal notranslate"><span class="pre">-</span></code> operator behavior to properly exclude successor features that
imply the excluded feature</p></li>
<li><p>Added meson redirections for removed feature names to maintain backward
compatibility</p></li>
<li><p>Removed compiler compatibility workarounds for partial feature support (e.g.,
AVX512 without mask operations)</p></li>
<li><p>Removed legacy AMD features (XOP, FMA4) and discontinued Intel Xeon Phi
support</p></li>
</ul>
<p>New Feature Group Hierarchy:</p>
<div class="pst-scrollable-table-container"><table class="table table-left">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Implies</p></th>
<th class="head"><p>Includes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">X86_V2</span></code></p></td>
<td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE4_1</span></code> <code class="docutils literal notranslate"><span class="pre">SSE4_2</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">CX16</span></code> <code class="docutils literal notranslate"><span class="pre">LAHF</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">X86_V3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">X86_V2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">AVX2</span></code> <code class="docutils literal notranslate"><span class="pre">FMA3</span></code> <code class="docutils literal notranslate"><span class="pre">BMI</span></code> <code class="docutils literal notranslate"><span class="pre">BMI2</span></code> <code class="docutils literal notranslate"><span class="pre">LZCNT</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code> <code class="docutils literal notranslate"><span class="pre">MOVBE</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">X86_V4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">X86_V3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512CD</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512VL</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512BW</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512DQ</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AVX512_ICL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">X86_V4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX512VBMI</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512VBMI2</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512VNNI</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512BITALG</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512VPOPCNTDQ</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512IFMA</span></code> <code class="docutils literal notranslate"><span class="pre">VAES</span></code> <code class="docutils literal notranslate"><span class="pre">GFNI</span></code> <code class="docutils literal notranslate"><span class="pre">VPCLMULQDQ</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AVX512_SPR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX512_ICL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX512FP16</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>These groups correspond to CPU generations:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">X86_V2</span></code>: x86-64-v2 microarchitectures (CPUs since 2009)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">X86_V3</span></code>: x86-64-v3 microarchitectures (CPUs since 2015)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">X86_V4</span></code>: x86-64-v4 microarchitectures (AVX-512 capable CPUs)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AVX512_ICL</span></code>: Intel Ice Lake and similar CPUs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AVX512_SPR</span></code>: Intel Sapphire Rapids and newer CPUs</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On 32-bit x86, <code class="docutils literal notranslate"><span class="pre">cx16</span></code> is excluded from <code class="docutils literal notranslate"><span class="pre">X86_V2</span></code>.</p>
</div>
<p>Documentation has been updated with details on using these new feature groups
with the current meson build system.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/28896">gh-28896</a>)</p>
</section>
<section id="fix-bug-in-matmul-for-non-contiguous-out-kwarg-parameter">
<h3>Fix bug in <code class="docutils literal notranslate"><span class="pre">matmul</span></code> for non-contiguous out kwarg parameter<a class="headerlink" href="#fix-bug-in-matmul-for-non-contiguous-out-kwarg-parameter" title="Link to this heading">#</a></h3>
<p>In some cases, if <code class="docutils literal notranslate"><span class="pre">out</span></code> was non-contiguous, <code class="docutils literal notranslate"><span class="pre">np.matmul</span></code> would cause memory
corruption or a c-level assert. This was new to v2.3.0 and fixed in v2.3.1.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29179">gh-29179</a>)</p>
</section>
<section id="array-interface-with-null-pointer-changed">
<h3><code class="docutils literal notranslate"><span class="pre">__array_interface__</span></code> with NULL pointer changed<a class="headerlink" href="#array-interface-with-null-pointer-changed" title="Link to this heading">#</a></h3>
<p>The array interface now accepts NULL pointers (NumPy will do its own dummy
allocation, though).  Previously, these incorrectly triggered an undocumented
scalar path.  In the unlikely event that the scalar path was actually desired,
you can (for now) achieve the previous behavior via the correct scalar path by
not providing a <code class="docutils literal notranslate"><span class="pre">data</span></code> field at all.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29338">gh-29338</a>)</p>
</section>
<section id="unique-values-for-complex-dtypes-may-return-unsorted-data">
<h3><code class="docutils literal notranslate"><span class="pre">unique_values</span></code> for complex dtypes may return unsorted data<a class="headerlink" href="#unique-values-for-complex-dtypes-may-return-unsorted-data" title="Link to this heading">#</a></h3>
<p>np.unique now supports hash‐based duplicate removal for complex dtypes.  This
enhancement extends the hash‐table algorithm to all complex types (‘c’), and
their extended precision variants.  The hash‐based method provides faster
extraction of unique values but does not guarantee that the result will be
sorted.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29537">gh-29537</a>)</p>
</section>
<section id="sorting-kind-heapsort-now-maps-to-kind-quicksort">
<h3>Sorting <code class="docutils literal notranslate"><span class="pre">kind='heapsort'</span></code> now maps to <code class="docutils literal notranslate"><span class="pre">kind='quicksort'</span></code><a class="headerlink" href="#sorting-kind-heapsort-now-maps-to-kind-quicksort" title="Link to this heading">#</a></h3>
<p>It is unlikely that this change will be noticed, but if you do see a change in
execution time or unstable argsort order, that is likely the cause. Please let
us know if there is a performance regression. Congratulate us if it is improved
:)</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29642">gh-29642</a>)</p>
</section>
<section id="numpy-typing-dtypelike-no-longer-accepts-none">
<h3><code class="docutils literal notranslate"><span class="pre">numpy.typing.DTypeLike</span></code> no longer accepts <code class="docutils literal notranslate"><span class="pre">None</span></code><a class="headerlink" href="#numpy-typing-dtypelike-no-longer-accepts-none" title="Link to this heading">#</a></h3>
<p>The type alias <code class="docutils literal notranslate"><span class="pre">numpy.typing.DTypeLike</span></code> no longer accepts <code class="docutils literal notranslate"><span class="pre">None</span></code>. Instead of</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dtype</span><span class="p">:</span> <span class="n">DTypeLike</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
<p>it should now be</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dtype</span><span class="p">:</span> <span class="n">DTypeLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
<p>instead.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29739">gh-29739</a>)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">npymath</span></code> and <code class="docutils literal notranslate"><span class="pre">npyrandom</span></code> libraries now have a <code class="docutils literal notranslate"><span class="pre">.lib</span></code> rather than a
<code class="docutils literal notranslate"><span class="pre">.a</span></code> file extension on win-arm64, for compatibility for building with MSVC
and <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>. Please note that using these static libraries is
discouraged and for existing projects using it, it’s best to use it with a
matching compiler toolchain, which is <code class="docutils literal notranslate"><span class="pre">clang-cl</span></code> on Windows on Arm.</p>
<p>(<a class="reference external" href="https://github.com/numpy/numpy/pull/29750">gh-29750</a>)</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="2.4.1-notes.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">NumPy 2.4.1 Release Notes</p>
      </div>
    </a>
    <a class="right-next"
       href="2.3.5-notes.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">NumPy 2.3.5 Release Notes</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#highlights">Highlights</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecations">Deprecations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-the-strides-attribute-is-deprecated">Setting the <code class="docutils literal notranslate"><span class="pre">strides</span></code> attribute is deprecated</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#positional-out-argument-to-np-maximum-np-minimum-is-deprecated">Positional <code class="docutils literal notranslate"><span class="pre">out</span></code> argument to <code class="docutils literal notranslate"><span class="pre">np.maximum</span></code>, <code class="docutils literal notranslate"><span class="pre">np.minimum</span></code> is deprecated</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#align-must-be-passed-as-boolean-to-np-dtype"><code class="docutils literal notranslate"><span class="pre">align=</span></code> must be passed as boolean to <code class="docutils literal notranslate"><span class="pre">np.dtype()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assertion-and-warning-control-utilities-are-deprecated">Assertion and warning control utilities are deprecated</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#np-fix-is-pending-deprecation"><code class="docutils literal notranslate"><span class="pre">np.fix</span></code> is pending deprecation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#in-place-modification-of-ndarray-shape-is-pending-deprecation">in-place modification of <code class="docutils literal notranslate"><span class="pre">ndarray.shape</span></code> is pending deprecation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecation-of-numpy-lib-user-array-container">Deprecation of <code class="docutils literal notranslate"><span class="pre">numpy.lib.user_array.container</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#expired-deprecations">Expired deprecations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-deprecated-machar-runtime-discovery-mechanism">Removed deprecated <code class="docutils literal notranslate"><span class="pre">MachAr</span></code> runtime discovery mechanism.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raise-typeerror-on-attempt-to-convert-array-with-ndim-0-to-scalar">Raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> on attempt to convert array with <code class="docutils literal notranslate"><span class="pre">ndim</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> to scalar</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-numpy-linalg-linalg-and-numpy-fft-helper">Removed numpy.linalg.linalg and numpy.fft.helper</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-interpolation-parameter-from-quantile-and-percentile-functions">Removed <code class="docutils literal notranslate"><span class="pre">interpolation</span></code> parameter from quantile and percentile functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-numpy-in1d">Removed <code class="docutils literal notranslate"><span class="pre">numpy.in1d</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-numpy-ndindex-ndincr">Removed <code class="docutils literal notranslate"><span class="pre">numpy.ndindex.ndincr()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-fix-imports-parameter-from-numpy-save">Removed <code class="docutils literal notranslate"><span class="pre">fix_imports</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">numpy.save</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removal-of-four-undocumented-ndarray-ctypes-methods">Removal of four undocumented <code class="docutils literal notranslate"><span class="pre">ndarray.ctypes</span></code> methods</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-newshape-parameter-from-numpy-reshape">Removed <code class="docutils literal notranslate"><span class="pre">newshape</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">numpy.reshape</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removal-of-deprecated-functions-and-arguments">Removal of deprecated functions and arguments</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#removed-delimitor-parameter-from-numpy-ma-mrecords-fromtextfile">Removed <code class="docutils literal notranslate"><span class="pre">delimitor</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">numpy.ma.mrecords.fromtextfile()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-array2string-and-numpy-sum-deprecations-finalized"><code class="docutils literal notranslate"><span class="pre">numpy.array2string</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.sum</span></code> deprecations finalized</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compatibility-notes">Compatibility notes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#c-api-changes">C API changes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-npy-sortkind-enum-has-been-enhanced-with-new-variables">The NPY_SORTKIND enum has been enhanced with new variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-npy-dt-get-constant-slot-for-dtype-constant-retrieval">New <code class="docutils literal notranslate"><span class="pre">NPY_DT_get_constant</span></code> slot for DType constant retrieval</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-new-pyufunc-addloopsfromspecs-convenience-function-has-been-added-to-the-c-api">A new <code class="docutils literal notranslate"><span class="pre">PyUFunc_AddLoopsFromSpecs</span></code> convenience function has been added to the C API.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#new-features">New Features</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#same-value-for-casting-by-value"><code class="docutils literal notranslate"><span class="pre">'same_value'</span></code> for casting by value</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stringdtype-fill-value-support-in-numpy-ma-maskedarray"><code class="docutils literal notranslate"><span class="pre">StringDType</span></code> fill_value support in <code class="docutils literal notranslate"><span class="pre">numpy.ma.MaskedArray</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ndmax-option-for-numpy-array"><code class="docutils literal notranslate"><span class="pre">ndmax</span></code> option for <code class="docutils literal notranslate"><span class="pre">numpy.array</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#warning-emitted-when-using-where-without-out">Warning emitted when using <code class="docutils literal notranslate"><span class="pre">where</span></code> without <code class="docutils literal notranslate"><span class="pre">out</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dtype-sorting-and-argsorting-supports-the-arraymethod-api">DType sorting and argsorting supports the ArrayMethod API</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#new-numpy-dtype-protocol">New <code class="docutils literal notranslate"><span class="pre">__numpy_dtype__</span></code> protocol</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#improvements">Improvements</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fix-flatiter-indexing-edge-cases">Fix <code class="docutils literal notranslate"><span class="pre">flatiter</span></code> indexing edge cases</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improved-error-handling-in-np-quantile">Improved error handling in <code class="docutils literal notranslate"><span class="pre">np.quantile</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improved-error-message-for-assert-array-compare">Improved error message for <code class="docutils literal notranslate"><span class="pre">assert_array_compare</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#show-unit-information-in-repr-for-datetime64-nat">Show unit information in <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> for <code class="docutils literal notranslate"><span class="pre">datetime64("NaT")</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#performance-increase-for-scalar-calculations">Performance increase for scalar calculations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-finfo-refactor"><code class="docutils literal notranslate"><span class="pre">numpy.finfo</span></code> Refactor</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multiple-axes-are-now-supported-in-numpy-trim-zeros">Multiple axes are now supported in <code class="docutils literal notranslate"><span class="pre">numpy.trim_zeros</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#runtime-signature-introspection-support-has-been-significantly-improved">Runtime signature introspection support has been significantly improved</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#performance-improvements-and-changes">Performance improvements and changes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#performance-improvements-to-np-unique-for-string-dtypes">Performance improvements to <code class="docutils literal notranslate"><span class="pre">np.unique</span></code> for string dtypes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rewrite-of-np-ndindex-using-itertools-product">Rewrite of <code class="docutils literal notranslate"><span class="pre">np.ndindex</span></code> using <code class="docutils literal notranslate"><span class="pre">itertools.product</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#performance-improvements-to-np-unique-for-complex-dtypes">Performance improvements to <code class="docutils literal notranslate"><span class="pre">np.unique</span></code> for complex dtypes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#changes">Changes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unique-values-for-string-dtypes-may-return-unsorted-data"><code class="docutils literal notranslate"><span class="pre">unique_values</span></code> for string dtypes may return unsorted data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#modulate-dispatched-x86-cpu-features">Modulate dispatched x86 CPU features</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fix-bug-in-matmul-for-non-contiguous-out-kwarg-parameter">Fix bug in <code class="docutils literal notranslate"><span class="pre">matmul</span></code> for non-contiguous out kwarg parameter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#array-interface-with-null-pointer-changed"><code class="docutils literal notranslate"><span class="pre">__array_interface__</span></code> with NULL pointer changed</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unique-values-for-complex-dtypes-may-return-unsorted-data"><code class="docutils literal notranslate"><span class="pre">unique_values</span></code> for complex dtypes may return unsorted data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sorting-kind-heapsort-now-maps-to-kind-quicksort">Sorting <code class="docutils literal notranslate"><span class="pre">kind='heapsort'</span></code> now maps to <code class="docutils literal notranslate"><span class="pre">kind='quicksort'</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-typing-dtypelike-no-longer-accepts-none"><code class="docutils literal notranslate"><span class="pre">numpy.typing.DTypeLike</span></code> no longer accepts <code class="docutils literal notranslate"><span class="pre">None</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2008-2026, NumPy Developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>