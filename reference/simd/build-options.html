
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>CPU build options &#8212; NumPy v1.23.dev0 Manual</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How does the CPU dispatcher work?" href="how-it-works.html" />
    <link rel="prev" title="CPU/SIMD Optimizations" href="index.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<link rel="stylesheet" href="../../_static/numpy.css" type="text/css" />

    <!-- PR #17220: This is added via javascript in versionwarning.js  -->
    <!-- link rel="canonical" href="http://numpy.org/doc/stable/reference/simd/build-options.html" / -->


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/numpylogo.svg" class="logo" alt="logo">
</a>      


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../user/index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../dev/index.html">
  Development
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://numpy.org/numpy-tutorials/">Learn<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/numpy/numpy" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/numpy_team" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../arrays.html">
   Array objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../array_api.html">
   Array API Standard Compatibility
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../constants.html">
   Constants
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ufuncs.html">
   Universal functions (
   <code class="xref py py-class docutils literal notranslate">
    <span class="pre">
     ufunc
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../routines.html">
   Routines
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../typing.html">
   Typing (
   <code class="xref py py-mod docutils literal notranslate">
    <span class="pre">
     numpy.typing
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../global_state.html">
   Global State
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../distutils.html">
   Packaging (
   <code class="xref py py-mod docutils literal notranslate">
    <span class="pre">
     numpy.distutils
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../distutils_guide.html">
   NumPy Distutils - Users Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../distutils_status_migration.html">
   Status of
   <code class="docutils literal notranslate">
    <span class="pre">
     numpy.distutils
    </span>
   </code>
   and migration advice
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c-api/index.html">
   NumPy C-API
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   CPU/SIMD Optimizations
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     CPU build options
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="how-it-works.html">
     How does the CPU dispatcher work?
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../swig.html">
   NumPy and SWIG
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#description">
   Description
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quick-start">
   Quick Start
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#i-am-building-numpy-for-my-local-use">
     I am building NumPy for my local use
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#i-do-not-want-to-support-the-old-processors-of-the-x86-architecture">
     I do not want to support the old processors of the
     <em class="xref py py-obj">
      x86
     </em>
     architecture
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#i-m-facing-the-same-case-above-but-with-ppc64-architecture">
     I’m facing the same case above but with
     <em class="xref py py-obj">
      ppc64
     </em>
     architecture
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#having-issues-with-avx512-features">
     Having issues with
     <em class="xref py py-obj">
      AVX512
     </em>
     features?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#supported-features">
   Supported Features
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#on-x86">
     On x86
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#on-ibm-power-big-endian">
     On IBM/POWER big-endian
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#on-ibm-power-little-endian">
     On IBM/POWER little-endian
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#on-armv7-a32">
     On ARMv7/A32
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#on-armv8-a64">
     On ARMv8/A64
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#on-ibm-zsystem-s390x">
     On IBM/ZSYSTEM(S390X)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#special-options">
   Special Options
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#behaviors">
   Behaviors
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#platform-differences">
   Platform differences
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#on-x86-intel-compiler">
     On x86::Intel Compiler
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#on-x86-microsoft-visual-c-c">
     On x86::Microsoft Visual C/C++
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#build-report">
   Build report
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#runtime-trace">
   Runtime Trace
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="cpu-build-options">
<h1>CPU build options<a class="headerlink" href="#cpu-build-options" title="Permalink to this headline">¶</a></h1>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The following options are mainly used to change the default behavior of optimizations
that target certain CPU features:</p>
<ul>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">--cpu-baseline</span></code>: minimal set of required CPU features.</dt><dd><p>Default value is <code class="docutils literal notranslate"><span class="pre">min</span></code> which provides the minimum CPU features that can
safely run on a wide range of platforms within the processor family.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During the runtime, NumPy modules will fail to load if any of specified features
are not supported by the target CPU (raises Python runtime error).</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">--cpu-dispatch</span></code>: dispatched set of additional CPU features.</dt><dd><p>Default value is <code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">-xop</span> <span class="pre">-fma4</span></code> which enables all CPU
features, except for AMD legacy features (in case of X86).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During the runtime, NumPy modules will skip any specified features
that are not available in the target CPU.</p>
</div>
</dd>
</dl>
</li>
</ul>
<p>These options are accessible through <a class="reference external" href="https://docs.python.org/3/library/distutils.html#module-distutils" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">distutils</span></code></a> commands
<a class="reference external" href="https://docs.python.org/3/distutils/apiref.html#module-distutils.command.build" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">distutils.command.build</span></code></a>, <a class="reference external" href="https://docs.python.org/3/distutils/apiref.html#module-distutils.command.build_clib" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">distutils.command.build_clib</span></code></a> and
<a class="reference external" href="https://docs.python.org/3/distutils/apiref.html#module-distutils.command.build_ext" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">distutils.command.build_ext</span></code></a>.
They accept a set of <a class="reference internal" href="#opt-supported-features"><span class="std std-ref">CPU features</span></a>
or groups of features that gather several features or
<a class="reference internal" href="#opt-special-options"><span class="std std-ref">special options</span></a> that
perform a series of procedures.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">build_clib</span></code> or <code class="docutils literal notranslate"><span class="pre">build_ext</span></code> are not specified by the user,
the arguments of <code class="docutils literal notranslate"><span class="pre">build</span></code> will be used instead, which also holds the default values.</p>
</div>
<p>To customize both <code class="docutils literal notranslate"><span class="pre">build_ext</span></code> and <code class="docutils literal notranslate"><span class="pre">build_clib</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">numpy</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;avx2 fma3&quot;</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span>
</pre></div>
</div>
<p>To customize only <code class="docutils literal notranslate"><span class="pre">build_ext</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">numpy</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build_ext</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;avx2 fma3&quot;</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span>
</pre></div>
</div>
<p>To customize only <code class="docutils literal notranslate"><span class="pre">build_clib</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">numpy</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build_clib</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;avx2 fma3&quot;</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span>
</pre></div>
</div>
<p>You can also customize CPU/build options through PIP command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">use</span><span class="o">-</span><span class="n">pep517</span> <span class="o">--</span><span class="k">global</span><span class="o">-</span><span class="n">option</span><span class="o">=</span><span class="n">build</span> \
<span class="o">--</span><span class="k">global</span><span class="o">-</span><span class="n">option</span><span class="o">=</span><span class="s2">&quot;--cpu-baseline=avx2 fma3&quot;</span> \
<span class="o">--</span><span class="k">global</span><span class="o">-</span><span class="n">option</span><span class="o">=</span><span class="s2">&quot;--cpu-dispatch=max&quot;</span> <span class="o">./</span>
</pre></div>
</div>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<p>In general, the default settings tend to not impose certain CPU features that
may not be available on some older processors. Raising the ceiling of the
baseline features will often improve performance and may also reduce
binary size.</p>
<p>The following are the most common scenarios that may require changing
the default settings:</p>
<section id="i-am-building-numpy-for-my-local-use">
<h3>I am building NumPy for my local use<a class="headerlink" href="#i-am-building-numpy-for-my-local-use" title="Permalink to this headline">¶</a></h3>
<p>And I do not intend to export the build to other users or target a
different CPU than what the host has.</p>
<p>Set <em class="xref py py-obj">native</em> for baseline, or manually specify the CPU features in case of option
<em class="xref py py-obj">native</em> isn’t supported by your platform:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;native&quot;</span> <span class="n">bdist</span>
</pre></div>
</div>
<p>Building NumPy with extra CPU features isn’t necessary for this case,
since all supported features are already defined within the baseline features:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="n">native</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">dispatch</span><span class="o">=</span><span class="n">none</span> <span class="n">bdist</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A fatal error will be raised if <em class="xref py py-obj">native</em> isn’t supported by the host platform.</p>
</div>
</section>
<section id="i-do-not-want-to-support-the-old-processors-of-the-x86-architecture">
<h3>I do not want to support the old processors of the <em class="xref py py-obj">x86</em> architecture<a class="headerlink" href="#i-do-not-want-to-support-the-old-processors-of-the-x86-architecture" title="Permalink to this headline">¶</a></h3>
<p>Since most of the CPUs nowadays support at least <em class="xref py py-obj">AVX</em>, <em class="xref py py-obj">F16C</em> features, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;avx f16c&quot;</span> <span class="n">bdist</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">--cpu-baseline</span></code> force combine all implied features, so there’s no need
to add SSE features.</p>
</div>
</section>
<section id="i-m-facing-the-same-case-above-but-with-ppc64-architecture">
<h3>I’m facing the same case above but with <em class="xref py py-obj">ppc64</em> architecture<a class="headerlink" href="#i-m-facing-the-same-case-above-but-with-ppc64-architecture" title="Permalink to this headline">¶</a></h3>
<p>Then raise the ceiling of the baseline features to Power8:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;vsx2&quot;</span> <span class="n">bdist</span>
</pre></div>
</div>
</section>
<section id="having-issues-with-avx512-features">
<h3>Having issues with <em class="xref py py-obj">AVX512</em> features?<a class="headerlink" href="#having-issues-with-avx512-features" title="Permalink to this headline">¶</a></h3>
<p>You may have some reservations about including of <em class="xref py py-obj">AVX512</em> or
any other CPU feature and you want to exclude from the dispatched features:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">dispatch</span><span class="o">=</span><span class="s2">&quot;max -avx512f -avx512cd </span><span class="se">\</span>
<span class="s2">-avx512_knl -avx512_knm -avx512_skx -avx512_clx -avx512_cnl -avx512_icl&quot;</span> \
<span class="n">bdist</span>
</pre></div>
</div>
</section>
</section>
<section id="supported-features">
<span id="opt-supported-features"></span><h2>Supported Features<a class="headerlink" href="#supported-features" title="Permalink to this headline">¶</a></h2>
<p>The names of the features can express one feature or a group of features,
as shown in the following tables supported depend on the lowest interest:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following features may not be supported by all compilers,
also some compilers may produce different set of implied features
when it comes to features like <code class="docutils literal notranslate"><span class="pre">AVX512</span></code>, <code class="docutils literal notranslate"><span class="pre">AVX2</span></code>, and <code class="docutils literal notranslate"><span class="pre">FMA3</span></code>.
See <a class="reference internal" href="#opt-platform-differences"><span class="std std-ref">Platform differences</span></a> for more details.</p>
</div>
<section id="on-x86">
<h3>On x86<a class="headerlink" href="#on-x86" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 6%" />
<col style="width: 72%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Implies</p></th>
<th class="head"><p>Gathers</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE2</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SSE2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SSE3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SSSE3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SSE41</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">POPCNT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SSE42</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AVX</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">XOP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">FMA4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">F16C</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">FMA3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AVX2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AVX512F</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code> <code class="docutils literal notranslate"><span class="pre">FMA3</span></code> <code class="docutils literal notranslate"><span class="pre">AVX2</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AVX512CD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code> <code class="docutils literal notranslate"><span class="pre">FMA3</span></code> <code class="docutils literal notranslate"><span class="pre">AVX2</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AVX512_KNL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code> <code class="docutils literal notranslate"><span class="pre">FMA3</span></code> <code class="docutils literal notranslate"><span class="pre">AVX2</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512CD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX512ER</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512PF</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AVX512_KNM</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code> <code class="docutils literal notranslate"><span class="pre">FMA3</span></code> <code class="docutils literal notranslate"><span class="pre">AVX2</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512CD</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512_KNL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX5124FMAPS</span></code> <code class="docutils literal notranslate"><span class="pre">AVX5124VNNIW</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512VPOPCNTDQ</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AVX512_SKX</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code> <code class="docutils literal notranslate"><span class="pre">FMA3</span></code> <code class="docutils literal notranslate"><span class="pre">AVX2</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512CD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX512VL</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512BW</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512DQ</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AVX512_CLX</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code> <code class="docutils literal notranslate"><span class="pre">FMA3</span></code> <code class="docutils literal notranslate"><span class="pre">AVX2</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512CD</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512_SKX</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX512VNNI</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AVX512_CNL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code> <code class="docutils literal notranslate"><span class="pre">FMA3</span></code> <code class="docutils literal notranslate"><span class="pre">AVX2</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512CD</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512_SKX</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX512IFMA</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512VBMI</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AVX512_ICL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSSE3</span></code> <code class="docutils literal notranslate"><span class="pre">SSE41</span></code> <code class="docutils literal notranslate"><span class="pre">POPCNT</span></code> <code class="docutils literal notranslate"><span class="pre">SSE42</span></code> <code class="docutils literal notranslate"><span class="pre">AVX</span></code> <code class="docutils literal notranslate"><span class="pre">F16C</span></code> <code class="docutils literal notranslate"><span class="pre">FMA3</span></code> <code class="docutils literal notranslate"><span class="pre">AVX2</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512F</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512CD</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512_SKX</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512_CLX</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512_CNL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AVX512VBMI2</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512BITALG</span></code> <code class="docutils literal notranslate"><span class="pre">AVX512VPOPCNTDQ</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="on-ibm-power-big-endian">
<h3>On IBM/POWER big-endian<a class="headerlink" href="#on-ibm-power-big-endian" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 24%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Implies</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VSX</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VSX2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VSX</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VSX3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VSX</span></code> <code class="docutils literal notranslate"><span class="pre">VSX2</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VSX4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VSX</span></code> <code class="docutils literal notranslate"><span class="pre">VSX2</span></code> <code class="docutils literal notranslate"><span class="pre">VSX3</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="on-ibm-power-little-endian">
<h3>On IBM/POWER little-endian<a class="headerlink" href="#on-ibm-power-little-endian" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 24%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Implies</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VSX</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VSX2</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VSX2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VSX</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VSX3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VSX</span></code> <code class="docutils literal notranslate"><span class="pre">VSX2</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VSX4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VSX</span></code> <code class="docutils literal notranslate"><span class="pre">VSX2</span></code> <code class="docutils literal notranslate"><span class="pre">VSX3</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="on-armv7-a32">
<h3>On ARMv7/A32<a class="headerlink" href="#on-armv7-a32" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Implies</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ASIMD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ASIMDHP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMD</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ASIMDDP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMD</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ASIMDFHM</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMD</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMDHP</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="on-armv8-a64">
<h3>On ARMv8/A64<a class="headerlink" href="#on-armv8-a64" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Implies</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMD</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMD</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMD</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ASIMD</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ASIMDHP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMD</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ASIMDDP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMD</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ASIMDFHM</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMD</span></code> <code class="docutils literal notranslate"><span class="pre">ASIMDHP</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="on-ibm-zsystem-s390x">
<h3>On IBM/ZSYSTEM(S390X)<a class="headerlink" href="#on-ibm-zsystem-s390x" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 36%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Implies</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VX</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VXE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VX</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VXE2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VX</span></code> <code class="docutils literal notranslate"><span class="pre">VXE</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="special-options">
<span id="opt-special-options"></span><h2>Special Options<a class="headerlink" href="#special-options" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code>: enable no features.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NATIVE</span></code>: Enables all CPU features that supported by the host CPU,
this operation is based on the compiler flags (<code class="docutils literal notranslate"><span class="pre">-march=native</span></code>, <code class="docutils literal notranslate"><span class="pre">-xHost</span></code>, <code class="docutils literal notranslate"><span class="pre">/QxHost</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MIN</span></code>: Enables the minimum CPU features that can safely run on a wide range of platforms:</p>
<table class="table">
<colgroup>
<col style="width: 49%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>For Arch</p></th>
<th class="head"><p>Implies</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x86 (32-bit mode)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>x86_64</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSE</span></code> <code class="docutils literal notranslate"><span class="pre">SSE2</span></code> <code class="docutils literal notranslate"><span class="pre">SSE3</span></code></p></td>
</tr>
<tr class="row-even"><td><p>IBM/POWER (big-endian mode)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>IBM/POWER (little-endian mode)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VSX</span></code> <code class="docutils literal notranslate"><span class="pre">VSX2</span></code></p></td>
</tr>
<tr class="row-even"><td><p>ARMHF</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>ARM64 A.K. AARCH64</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NEON</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_FP16</span></code> <code class="docutils literal notranslate"><span class="pre">NEON_VFPV4</span></code>
<code class="docutils literal notranslate"><span class="pre">ASIMD</span></code></p></td>
</tr>
<tr class="row-even"><td><p>IBM/ZSYSTEM(S390X)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></td>
</tr>
</tbody>
</table>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MAX</span></code>: Enables all supported CPU features by the compiler and platform.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Operators-/+</span></code>: remove or add features, useful with options <code class="docutils literal notranslate"><span class="pre">MAX</span></code>, <code class="docutils literal notranslate"><span class="pre">MIN</span></code> and <code class="docutils literal notranslate"><span class="pre">NATIVE</span></code>.</p></li>
</ul>
</section>
<section id="behaviors">
<h2>Behaviors<a class="headerlink" href="#behaviors" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>CPU features and other options are case-insensitive, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">dispatch</span><span class="o">=</span><span class="s2">&quot;SSE41 avx2 FMA3&quot;</span>
</pre></div>
</div>
</li>
<li><p>The order of the requested optimizations doesn’t matter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">dispatch</span><span class="o">=</span><span class="s2">&quot;SSE41 AVX2 FMA3&quot;</span>
<span class="c1"># equivalent to</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">dispatch</span><span class="o">=</span><span class="s2">&quot;FMA3 AVX2 SSE41&quot;</span>
</pre></div>
</div>
</li>
<li><p>Either commas or spaces or ‘+’ can be used as a separator,
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">dispatch</span><span class="o">=</span><span class="s2">&quot;avx2 avx512f&quot;</span>
<span class="c1"># or</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">dispatch</span><span class="o">=</span><span class="n">avx2</span><span class="p">,</span><span class="n">avx512f</span>
<span class="c1"># or</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">dispatch</span><span class="o">=</span><span class="s2">&quot;avx2+avx512f&quot;</span>
</pre></div>
</div>
<p>all works but arguments should be enclosed in quotes or escaped
by backslash if any spaces are used.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cpu-baseline</span></code> combines all implied CPU features, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="n">sse42</span>
<span class="c1"># equivalent to</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;sse sse2 sse3 ssse3 sse41 popcnt sse42&quot;</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cpu-baseline</span></code> will be treated as “native” if compiler native flag
<code class="docutils literal notranslate"><span class="pre">-march=native</span></code> or <code class="docutils literal notranslate"><span class="pre">-xHost</span></code> or <code class="docutils literal notranslate"><span class="pre">/QxHost</span></code> is enabled through environment variable
<em class="xref py py-obj">CFLAGS</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">CFLAGS</span><span class="o">=</span><span class="s2">&quot;-march=native&quot;</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span>
<span class="c1"># is equivalent to</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="n">native</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cpu-baseline</span></code> escapes any specified features that aren’t supported
by the target platform or compiler rather than raising fatal errors.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">--cpu-baseline</span></code> combines all implied features, the maximum
supported of implied features will be enabled rather than escape all of them.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Requesting `AVX2,FMA3` but the compiler only support **SSE** features</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;avx2 fma3&quot;</span>
<span class="c1"># is equivalent to</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;sse sse2 sse3 ssse3 sse41 popcnt sse42&quot;</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cpu-dispatch</span></code> does not combain any of implied CPU features,
so you must add them unless you want to disable one or all of them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Only dispatches AVX2 and FMA3</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">dispatch</span><span class="o">=</span><span class="n">avx2</span><span class="p">,</span><span class="n">fma3</span>
<span class="c1"># Dispatches AVX and SSE features</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="n">ssse3</span><span class="p">,</span><span class="n">sse41</span><span class="p">,</span><span class="n">sse42</span><span class="p">,</span><span class="n">avx</span><span class="p">,</span><span class="n">avx2</span><span class="p">,</span><span class="n">fma3</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cpu-dispatch</span></code> escapes any specified baseline features and also escapes
any features not supported by the target platform or compiler without raising
fatal errors.</p></li>
</ul>
<p>Eventually, you should always check the final report through the build log
to verify the enabled features. See <a class="reference internal" href="#opt-build-report"><span class="std std-ref">Build report</span></a> for more details.</p>
</section>
<section id="platform-differences">
<span id="opt-platform-differences"></span><h2>Platform differences<a class="headerlink" href="#platform-differences" title="Permalink to this headline">¶</a></h2>
<p>Some exceptional conditions force us to link some features together when it come to
certain compilers or architectures, resulting in the impossibility of building them separately.</p>
<p>These conditions can be divided into two parts, as follows:</p>
<p><strong>Architectural compatibility</strong></p>
<p>The need to align certain CPU features that are assured to be supported by
successive generations of the same architecture, some cases:</p>
<ul class="simple">
<li><p>On ppc64le <code class="docutils literal notranslate"><span class="pre">VSX(ISA</span> <span class="pre">2.06)</span></code> and <code class="docutils literal notranslate"><span class="pre">VSX2(ISA</span> <span class="pre">2.07)</span></code> both imply one another since the
first generation that supports little-endian mode is Power-8`(ISA 2.07)`</p></li>
<li><p>On AArch64 <code class="docutils literal notranslate"><span class="pre">NEON</span> <span class="pre">NEON_FP16</span> <span class="pre">NEON_VFPV4</span> <span class="pre">ASIMD</span></code> implies each other since they are part of the
hardware baseline.</p></li>
</ul>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># On ARMv8/A64, specify NEON is going to enable Advanced SIMD</span>
<span class="c1"># and all predecessor extensions</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="n">neon</span>
<span class="c1"># which equivalent to</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;neon neon_fp16 neon_vfpv4 asimd&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please take a deep look at <a class="reference internal" href="#opt-supported-features"><span class="std std-ref">Supported Features</span></a>,
in order to determine the features that imply one another.</p>
</div>
<p><strong>Compilation compatibility</strong></p>
<p>Some compilers don’t provide independent support for all CPU features. For instance
<strong>Intel</strong>’s compiler doesn’t provide separated flags for <code class="docutils literal notranslate"><span class="pre">AVX2</span></code> and <code class="docutils literal notranslate"><span class="pre">FMA3</span></code>,
it makes sense since all Intel CPUs that comes with <code class="docutils literal notranslate"><span class="pre">AVX2</span></code> also support <code class="docutils literal notranslate"><span class="pre">FMA3</span></code>,
but this approach is incompatible with other <strong>x86</strong> CPUs from <strong>AMD</strong> or <strong>VIA</strong>.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify AVX2 will force enables FMA3 on Intel compilers</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="n">avx2</span>
<span class="c1"># which equivalent to</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span> <span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;avx2 fma3&quot;</span>
</pre></div>
</div>
<p>The following tables only show the differences imposed by some compilers from the
general context that been shown in the <a class="reference internal" href="#opt-supported-features"><span class="std std-ref">Supported Features</span></a> tables:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Features names with strikeout represent the unsupported CPU features.</p>
</div>
<style>
    .enabled-feature {color:green; font-weight:bold;}
    .disabled-feature {color:red; text-decoration: line-through;}
</style><section id="on-x86-intel-compiler">
<h3>On x86::Intel Compiler<a class="headerlink" href="#on-x86-intel-compiler" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Implies</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FMA3</p></td>
<td><p>SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C <span class="enabled-feature">AVX2</span></p></td>
</tr>
<tr class="row-odd"><td><p>AVX2</p></td>
<td><p>SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C <span class="enabled-feature">FMA3</span></p></td>
</tr>
<tr class="row-even"><td><p>AVX512F</p></td>
<td><p>SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 <span class="enabled-feature">AVX512CD</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="disabled-feature">XOP</span></p></td>
<td><p><span class="disabled-feature">SSE</span> <span class="disabled-feature">SSE2</span> <span class="disabled-feature">SSE3</span> <span class="disabled-feature">SSSE3</span> <span class="disabled-feature">SSE41</span> <span class="disabled-feature">POPCNT</span> <span class="disabled-feature">SSE42</span> <span class="disabled-feature">AVX</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="disabled-feature">FMA4</span></p></td>
<td><p><span class="disabled-feature">SSE</span> <span class="disabled-feature">SSE2</span> <span class="disabled-feature">SSE3</span> <span class="disabled-feature">SSSE3</span> <span class="disabled-feature">SSE41</span> <span class="disabled-feature">POPCNT</span> <span class="disabled-feature">SSE42</span> <span class="disabled-feature">AVX</span></p></td>
</tr>
</tbody>
</table>
</section>
<section id="on-x86-microsoft-visual-c-c">
<h3>On x86::Microsoft Visual C/C++<a class="headerlink" href="#on-x86-microsoft-visual-c-c" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 6%" />
<col style="width: 72%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Implies</p></th>
<th class="head"><p>Gathers</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FMA3</p></td>
<td><p>SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C <span class="enabled-feature">AVX2</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>AVX2</p></td>
<td><p>SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C <span class="enabled-feature">FMA3</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>AVX512F</p></td>
<td><p>SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 <span class="enabled-feature">AVX512CD</span> <span class="enabled-feature">AVX512_SKX</span></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>AVX512CD</p></td>
<td><p>SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F <span class="enabled-feature">AVX512_SKX</span></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><span class="disabled-feature">AVX512_KNL</span></p></td>
<td><p><span class="disabled-feature">SSE</span> <span class="disabled-feature">SSE2</span> <span class="disabled-feature">SSE3</span> <span class="disabled-feature">SSSE3</span> <span class="disabled-feature">SSE41</span> <span class="disabled-feature">POPCNT</span> <span class="disabled-feature">SSE42</span> <span class="disabled-feature">AVX</span> <span class="disabled-feature">F16C</span> <span class="disabled-feature">FMA3</span> <span class="disabled-feature">AVX2</span> <span class="disabled-feature">AVX512F</span> <span class="disabled-feature">AVX512CD</span></p></td>
<td><p><span class="disabled-feature">AVX512ER</span> <span class="disabled-feature">AVX512PF</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="disabled-feature">AVX512_KNM</span></p></td>
<td><p><span class="disabled-feature">SSE</span> <span class="disabled-feature">SSE2</span> <span class="disabled-feature">SSE3</span> <span class="disabled-feature">SSSE3</span> <span class="disabled-feature">SSE41</span> <span class="disabled-feature">POPCNT</span> <span class="disabled-feature">SSE42</span> <span class="disabled-feature">AVX</span> <span class="disabled-feature">F16C</span> <span class="disabled-feature">FMA3</span> <span class="disabled-feature">AVX2</span> <span class="disabled-feature">AVX512F</span> <span class="disabled-feature">AVX512CD</span> <span class="disabled-feature">AVX512_KNL</span></p></td>
<td><p><span class="disabled-feature">AVX5124FMAPS</span> <span class="disabled-feature">AVX5124VNNIW</span> <span class="disabled-feature">AVX512VPOPCNTDQ</span></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="build-report">
<span id="opt-build-report"></span><h2>Build report<a class="headerlink" href="#build-report" title="Permalink to this headline">¶</a></h2>
<p>In most cases, the CPU build options do not produce any fatal errors that lead to hanging the build.
Most of the errors that may appear in the build log serve as heavy warnings due to the lack of some
expected CPU features by the compiler.</p>
<p>So we strongly recommend checking the final report log, to be aware of what kind of CPU features
are enabled and what are not.</p>
<p>You can find the final report of CPU optimizations at the end of the build log,
and here is how it looks on x86_64/gcc:</p>
<style>#build-report .highlight-bash pre{max-height:450px; overflow-y: scroll;}</style><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">########### EXT COMPILER OPTIMIZATION ###########</span>
Platform      :
  Architecture: x64
  Compiler    : gcc

CPU baseline  :
  Requested   : <span class="s1">&#39;min&#39;</span>
  Enabled     : SSE SSE2 SSE3
  Flags       : -msse -msse2 -msse3
  Extra checks: none

CPU dispatch  :
  Requested   : <span class="s1">&#39;max -xop -fma4&#39;</span>
  Enabled     : SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD AVX512_KNL AVX512_KNM AVX512_SKX AVX512_CLX AVX512_CNL AVX512_ICL
  Generated   :
              :
  SSE41       : SSE SSE2 SSE3 SSSE3
  Flags       : -msse -msse2 -msse3 -mssse3 -msse4.1
  Extra checks: none
  Detect      : SSE SSE2 SSE3 SSSE3 SSE41
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_arithmetic.dispatch.c
              : numpy/core/src/umath/_umath_tests.dispatch.c
              :
  SSE42       : SSE SSE2 SSE3 SSSE3 SSE41 POPCNT
  Flags       : -msse -msse2 -msse3 -mssse3 -msse4.1 -mpopcnt -msse4.2
  Extra checks: none
  Detect      : SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42
              : build/src.linux-x86_64-3.9/numpy/core/src/_simd/_simd.dispatch.c
              :
  AVX2        : SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C
  Flags       : -msse -msse2 -msse3 -mssse3 -msse4.1 -mpopcnt -msse4.2 -mavx -mf16c -mavx2
  Extra checks: none
  Detect      : AVX F16C AVX2
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_arithm_fp.dispatch.c
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_arithmetic.dispatch.c
              : numpy/core/src/umath/_umath_tests.dispatch.c
              :
  <span class="o">(</span>FMA3 AVX2<span class="o">)</span> : SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C
  Flags       : -msse -msse2 -msse3 -mssse3 -msse4.1 -mpopcnt -msse4.2 -mavx -mf16c -mfma -mavx2
  Extra checks: none
  Detect      : AVX F16C FMA3 AVX2
              : build/src.linux-x86_64-3.9/numpy/core/src/_simd/_simd.dispatch.c
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_exponent_log.dispatch.c
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_trigonometric.dispatch.c
              :
  AVX512F     : SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2
  Flags       : -msse -msse2 -msse3 -mssse3 -msse4.1 -mpopcnt -msse4.2 -mavx -mf16c -mfma -mavx2 -mavx512f
  Extra checks: AVX512F_REDUCE
  Detect      : AVX512F
              : build/src.linux-x86_64-3.9/numpy/core/src/_simd/_simd.dispatch.c
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_arithm_fp.dispatch.c
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_arithmetic.dispatch.c
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_exponent_log.dispatch.c
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_trigonometric.dispatch.c
              :
  AVX512_SKX  : SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD
  Flags       : -msse -msse2 -msse3 -mssse3 -msse4.1 -mpopcnt -msse4.2 -mavx -mf16c -mfma -mavx2 -mavx512f -mavx512cd -mavx512vl -mavx512bw -mavx512dq
  Extra checks: AVX512BW_MASK AVX512DQ_MASK
  Detect      : AVX512_SKX
              : build/src.linux-x86_64-3.9/numpy/core/src/_simd/_simd.dispatch.c
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_arithmetic.dispatch.c
              : build/src.linux-x86_64-3.9/numpy/core/src/umath/loops_exponent_log.dispatch.c
CCompilerOpt.cache_flush<span class="o">[</span><span class="m">804</span><span class="o">]</span> : write cache to path -&gt; /home/seiko/work/repos/numpy/build/temp.linux-x86_64-3.9/ccompiler_opt_cache_ext.py

<span class="c1">########### CLIB COMPILER OPTIMIZATION ###########</span>
Platform      :
  Architecture: x64
  Compiler    : gcc

CPU baseline  :
  Requested   : <span class="s1">&#39;min&#39;</span>
  Enabled     : SSE SSE2 SSE3
  Flags       : -msse -msse2 -msse3
  Extra checks: none

CPU dispatch  :
  Requested   : <span class="s1">&#39;max -xop -fma4&#39;</span>
  Enabled     : SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD AVX512_KNL AVX512_KNM AVX512_SKX AVX512_CLX AVX512_CNL AVX512_ICL
  Generated   : none
</pre></div>
</div>
<p>As you see, there is a separate report for each of <code class="docutils literal notranslate"><span class="pre">build_ext</span></code> and <code class="docutils literal notranslate"><span class="pre">build_clib</span></code>
that includes several sections, and each section has several values, representing the following:</p>
<p><strong>Platform</strong>:</p>
<ul class="simple">
<li><p><span class="enabled-feature">Architecture</span>: The architecture name of target CPU. It should be one of
<code class="docutils literal notranslate"><span class="pre">x86</span></code>, <code class="docutils literal notranslate"><span class="pre">x64</span></code>, <code class="docutils literal notranslate"><span class="pre">ppc64</span></code>, <code class="docutils literal notranslate"><span class="pre">ppc64le</span></code>, <code class="docutils literal notranslate"><span class="pre">armhf</span></code>, <code class="docutils literal notranslate"><span class="pre">aarch64</span></code>, <code class="docutils literal notranslate"><span class="pre">s390x</span></code> or <code class="docutils literal notranslate"><span class="pre">unknown</span></code>.</p></li>
<li><p><span class="enabled-feature">Compiler</span>: The compiler name. It should be one of
gcc, clang, msvc, icc, iccw or unix-like.</p></li>
</ul>
<p><strong>CPU baseline</strong>:</p>
<ul class="simple">
<li><p><span class="enabled-feature">Requested</span>: The specific features and options to <code class="docutils literal notranslate"><span class="pre">--cpu-baseline</span></code> as-is.</p></li>
<li><p><span class="enabled-feature">Enabled</span>: The final set of enabled CPU features.</p></li>
<li><p><span class="enabled-feature">Flags</span>: The compiler flags that were used to all NumPy <em class="xref py py-obj">C/C++</em> sources
during the compilation except for temporary sources that have been used for generating
the binary objects of dispatched features.</p></li>
<li><p><span class="enabled-feature">Extra checks</span>: list of internal checks that activate certain functionality
or intrinsics related to the enabled features, useful for debugging when it comes
to developing SIMD kernels.</p></li>
</ul>
<p><strong>CPU dispatch</strong>:</p>
<ul class="simple">
<li><p><span class="enabled-feature">Requested</span>: The specific features and options to <code class="docutils literal notranslate"><span class="pre">--cpu-dispatch</span></code> as-is.</p></li>
<li><p><span class="enabled-feature">Enabled</span>: The final set of enabled CPU features.</p></li>
<li><p><span class="enabled-feature">Generated</span>: At the beginning of the next row of this property,
the features for which optimizations have been generated are shown in the
form of several sections with similar properties explained as follows:</p>
<ul>
<li><p><span class="enabled-feature">One or multiple dispatched feature</span>: The implied CPU features.</p></li>
<li><p><span class="enabled-feature">Flags</span>: The compiler flags that been used for these features.</p></li>
<li><p><span class="enabled-feature">Extra checks</span>: Similar to the baseline but for these dispatched features.</p></li>
<li><p><span class="enabled-feature">Detect</span>: Set of CPU features that need be detected in runtime in order to
execute the generated optimizations.</p></li>
<li><p>The lines that come after the above property and end with a ‘:’ on a separate line,
represent the paths of c/c++ sources that define the generated optimizations.</p></li>
</ul>
</li>
</ul>
</section>
<section id="runtime-trace">
<h2>Runtime Trace<a class="headerlink" href="#runtime-trace" title="Permalink to this headline">¶</a></h2>
<p>To be completed.</p>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">CPU/SIMD Optimizations</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="how-it-works.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">How does the CPU dispatcher work?</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2008-2022, NumPy Developers.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>